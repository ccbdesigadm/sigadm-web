{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js!/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarCompraModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarCompraModal.vue","mtime":1577190729736},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport _slicedToArray from \"/home/joel/Projetos/Web/sigadm-web/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport swal from \"sweetalert2\";\nimport { VMoney } from \"v-money\";\nimport CadNota from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroNotaFiscalP\";\nimport StoreCompra from \"./store/storeCompra.js\";\nexport default {\n  components: {\n    CadNota: CadNota\n  },\n  data: function data() {\n    return {\n      tombamento: null,\n      empresa: null,\n      empresas: [],\n      nota: null,\n      money: {\n        decimal: \",\",\n        thousands: \".\",\n        prefix: \"R$ \",\n        suffix: \"\",\n        precision: 2,\n        masked: false\n        /* doesn't work with directive */\n\n      },\n      preco_instrumento: 0.0,\n      dialog_compra_modal: false,\n      data_compra: null,\n      dialog_compra: false,\n      modal: false,\n      modal_compra: false\n    };\n  },\n  props: {\n    numero_tombamento: String\n  },\n  directives: {\n    money: VMoney\n  },\n  computed: {\n    computedDateFormatted: function computedDateFormatted() {\n      return this.formatDate(this.data_compra);\n    }\n  },\n  watch: {\n    dialog_compra: function dialog_compra() {\n      this.empresas = StoreCompra.state.empresas;\n      this.Fechar();\n    },\n    date: function date(val) {\n      this.dateFormatted = this.formatDate(this.data_compra);\n    }\n  },\n  methods: {\n    SalvarCompra: function SalvarCompra() {\n      var Usuario = sessionStorage.getItem(\"usuario\");\n      var autorizacao = JSON.parse(Usuario);\n      this.$http.post(this.$url + \"CompraInstrumento/v1\", {\n        id: 0,\n        valor: this.preco_instrumento,\n        tombamento: this.numero_tombamento,\n        notafiscal: this.nota,\n        empresa: this.empresa,\n        dataCompra: this.data_compra,\n        launchDate: new Date().toISOString().substr(0, 19)\n      }, {\n        headers: {\n          authorization: \"Bearer \" + autorizacao.accessToken\n        }\n      }).then(function (response) {\n        ////console.log(response.status);\n        if (response.status == 200) {//console.log(response.data);\n        }\n      }).catch(function (e) {\n        toast.toast(\"top\", \"error\", \"Atenção\", \"Sem conexão com a internet ou falha do sistema.\");\n      });\n      this.$emit(\"SalvarInstrumento\");\n    },\n    Fechar: function Fechar() {\n      this.empresa = null;\n      this.nota = null;\n      this.data_compra = null;\n      this.preco_instrumento = 0.0;\n      this.money = {\n        decimal: \",\",\n        thousands: \".\",\n        prefix: \"R$ \",\n        suffix: \"\",\n        precision: 2,\n        masked: false\n        /* doesn't work with directive */\n\n      };\n    },\n    formatDate: function formatDate(date) {\n      if (!date) return null;\n\n      var _date$split = date.split(\"-\"),\n          _date$split2 = _slicedToArray(_date$split, 3),\n          year = _date$split2[0],\n          month = _date$split2[1],\n          day = _date$split2[2];\n\n      return \"\".concat(day, \"/\").concat(month, \"/\").concat(year);\n    }\n  }\n};",{"version":3,"sources":["CadastrarCompraModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout>\n    <v-dialog v-model=\"dialog_compra\" persistent max-width=\"950px\">\n      <v-btn color=\"indigo darken-4\" center class=\"white--text\" slot=\"activator\">\n        <small>Registrar compra</small>\n        <v-icon right color=\"white\">fas fa-shopping-cart</v-icon>\n      </v-btn>\n      <v-card>\n        <v-flex xs12 sm12>\n          <div class=\"pt-1\">\n            <v-btn\n              right\n              class=\"white--text\"\n              small\n              fab\n              round\n              box\n              color=\"red darken-1\"\n              absolute\n              v-on:click=\"dialog_compra = false, Fechar()\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n          </div>\n        </v-flex>\n        <v-card-title>\n          <v-flex xs12 sm12 md12 lg12 align-center>\n            <span\n              class=\"font-weight-bold headline blue--text text--darken-4\"\n            >Cadastrar instrumento e registrar compra</span>\n          </v-flex>\n        </v-card-title>\n        <v-card-text>\n          <v-container grid-list-md>\n            <v-layout wrap>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"empresa\"\n                  :items=\"empresas\"\n                  label=\"Empresa\"\n                  item-text=\"nome\"\n                  item-value=\"nome\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.nome}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.nome}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3>\n                <v-dialog\n                  ref=\"dialog_compra_modal\"\n                  v-model=\"modal_compra\"\n                  :return-value.sync=\"data_compra\"\n                  persistent\n                  lazy\n                  full-width\n                  width=\"290px\"\n                >\n                  <v-text-field\n                    slot=\"activator\"\n                    v-model=\"computedDateFormatted\"\n                    label=\"Data da compra\"\n                    append-icon=\"event\"\n                    readonly\n                    color=\"blue darken-4\"\n                    hint\n                    single-line\n                    persistent-hint\n                    box\n                  ></v-text-field>\n                  <v-date-picker\n                    v-model=\"data_compra\"\n                    scrollable\n                    locale=\"pt-BR\"\n                    color=\"blue darken-4\"\n                  >\n                    <v-spacer></v-spacer>\n                    <v-btn flat color=\"primary\" @click=\"dialog = false\">Cancelar</v-btn>\n                    <v-btn\n                      flat\n                      color=\"primary\"\n                      @click=\"$refs.dialog_compra_modal.save(data_compra)\"\n                    >OK</v-btn>\n                  </v-date-picker>\n                </v-dialog>\n              </v-flex>\n              <v-flex sm12 md3 lg3>\n                <v-text-field\n                  v-money=\"money\"\n                  v-model.lazy=\"preco_instrumento\"\n                  box\n                  color=\"blue darken-4\"\n                  append-icon=\"fas fa-hand-holding-usd\"\n                  label=\"Valor do instrumento*\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3>\n                <v-text-field box v-model=\"nota\" label=\"Nota fiscal\"></v-text-field>\n              </v-flex>\n              <cad-nota v-bind:numero_tombamento=\"tombamento\" @SalvarCompra=\"SalvarCompra\"></cad-nota>\n            </v-layout>\n          </v-container>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-layout>\n</template>\n<script>\nimport swal from \"sweetalert2\";\nimport { VMoney } from \"v-money\";\nimport CadNota from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroNotaFiscalP\";\nimport StoreCompra from \"./store/storeCompra.js\";\nexport default {\n  components: {\n    CadNota\n  },\n  data() {\n    return {\n      tombamento: null,\n      empresa: null,\n      empresas: [],\n      nota: null,\n      money: {\n        decimal: \",\",\n        thousands: \".\",\n        prefix: \"R$ \",\n        suffix: \"\",\n        precision: 2,\n        masked: false /* doesn't work with directive */\n      },\n      preco_instrumento: 0.0,\n      dialog_compra_modal: false,\n      data_compra: null,\n      dialog_compra: false,\n      modal: false,\n      modal_compra: false\n    };\n  },\n  props: {\n    numero_tombamento: String\n  },\n  directives: { money: VMoney },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_compra);\n    }\n  },\n  watch: {\n    dialog_compra: function() {\n      this.empresas = StoreCompra.state.empresas;\n      this.Fechar();\n    },\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_compra);\n    }\n  },\n  methods: {\n    SalvarCompra() {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .post(\n          this.$url + \"CompraInstrumento/v1\",\n          {\n            id: 0,\n            valor: this.preco_instrumento,\n            tombamento: this.numero_tombamento,\n            notafiscal: this.nota,\n            empresa: this.empresa,\n            dataCompra: this.data_compra,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: { authorization: \"Bearer \" + autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n          }\n        })\n        .catch(e => {\n          toast.toast(\"top\",\"error\",\"Atenção\", \"Sem conexão com a internet ou falha do sistema.\");\n        });\n\n      this.$emit(\"SalvarInstrumento\");\n    },\n    Fechar() {\n      this.empresa = null;\n      this.nota = null;\n      this.data_compra = null;\n      this.preco_instrumento = 0.0;\n      this.money = {decimal: \",\",thousands: \".\",prefix: \"R$ \",suffix: \"\",precision: 2,masked: false /* doesn't work with directive */\n      }\n      \n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    }\n  }\n};\n</script>\n<style>\n.mesmo-tamanho {\n  width: 100%;\n  white-space: normal;\n}\n</style>\n"],"sourceRoot":"src/pages/Modulos/Patrimonio/Instrumento/Cadastros"}]}