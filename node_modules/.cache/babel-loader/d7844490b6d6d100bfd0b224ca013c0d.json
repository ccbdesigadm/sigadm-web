{"remainingRequest":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/babel-loader/lib/index.js!/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/sigadm-team/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroTermos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroTermos.vue","mtime":1577190729000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// Import FilePond\nimport vueFilePond from \"vue-filepond\"; // Import plugins\n\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.esm.js\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.esm.js\";\nimport FilePondPluginFileRename from \"filepond-plugin-file-rename\";\nimport swal from \"sweetalert2\"; // Import styles\n\nimport \"filepond/dist/filepond.min.css\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\"; // Create FilePond component\n\nvar FilePond = vueFilePond(FilePondPluginFileValidateType, FilePondPluginImagePreview, FilePondPluginFileRename);\nexport default {\n  props: [\"numero_tombamento\"],\n  name: \"cadastrotermos\",\n  data: function data() {\n    return {\n      myFiles: [],\n      arquivos: [],\n      tipo: [\"application/pdf\"],\n      termo_valid: false\n    };\n  },\n  methods: {\n    handleFilePondInit: function handleFilePondInit() {\n      ////console.log(\"FilePond has initialized\");\n      // example of instance method call on pond reference\n      ////console.log('Termo Doacao arquivo',this.$refs.pondtermodoacao.getFiles());\n      this.termoDoacao(this.$refs.pondtermodoacao.getFiles()); ////console.log(\"Nota fiscal doação arquivo\",this.$refs.pondnotafiscal.getFiles());\n\n      this.notaFiscal(this.$refs.pondnotafiscal.getFiles()); ////console.log(\"outros docs doação arquivo\",this.$refs.pondoutrosdocs.getFiles());\n\n      this.outrosDocs(this.$refs.pondoutrosdocs.getFiles());\n\n      if (this.termo_valid == false) {\n        swal.fire(\"Atenção!\", \"O Termo de  precisa ser anexada ao instrumento!\", \"warning\");\n      } else {\n        this.$emit(\"cadastrarDoacao\");\n      }\n    },\n    termoDoacao: function termoDoacao(termo) {\n      var _this = this;\n\n      ////console.log('Tamanho da quantidade termos de doacao',termo.length);\n      if (termo.length == 0) {\n        ////console.log('Tamanho da quantidade termos de doacao dentro do eslse if',termo.length);\n        swal.fire(\"Atenção!\", \"O Termo de  precisa ser anexada ao instrumento!\", \"warning\");\n      } else if (termo.length == 1) {\n        termo.forEach(function (element) {\n          ////console.log(element.file);\n          var formData = new FormData(); ////console.log(\"numero\", this.numero_tombamento);\n\n          if (_this.numero_tombamento == \"\") {\n            swal.fire(\"Atenção!\", \"Para continuar numero de tombamento precisa ser selecionado!\", \"warning\");\n          } else {\n            formData.append(\"file\", element.file, _this.numero_tombamento + \"-\" + element.filename);\n          }\n\n          _this.salvarTermo(formData);\n\n          _this.termo_valid = true; // //console.log(formData.getAll(\"file\"));\n        });\n      }\n    },\n    salvarTermo: function salvarTermo(termo) {\n      var _this2 = this;\n\n      var autorizacaoAux = sessionStorage.getItem(\"usuario\");\n\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux); //console.log(\"entrou para anexar termo de doação\");\n\n        this.$http.post(this.$url + \"DoacaoInstrumento/v1/salvar-termo-doacao-instrumento\", termo, {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          }\n        }).then(function (response) {\n          if (response.status == 200) {\n            _this2.dialog = false;\n            swal.fire({\n              type: \"success\",\n              title: \"Anexado com sucesso\",\n              text: \"...\"\n            }); //console.log(response.data);\n\n            _this2.$emit(\"path_nota\", {\n              path: response.data\n            });\n          } else if (response.status == 401) {} else if (response.status == 500) {} ////console.log(response.data);\n\n        }).catch(function (e) {\n          swal.fire(\"Sua autorização expirou!\", \"Entre com suas credencias novamente.\", \"warning\");\n\n          _this2.$router.push(\"/\"); //console.error(e);\n          //console.data(e.data);\n\n        });\n      }\n    },\n    notaFiscal: function notaFiscal(nota) {\n      var _this3 = this;\n\n      //console.log(\"Tamanho da quantidade outros docs de doacao\", nota.length);\n      if (nota.length == 1) {\n        nota.forEach(function (element) {\n          //console.log(element.file);\n          var formData = new FormData(); //console.log(\"numero\", this.numero_tombamento);\n\n          if (_this3.numero_tombamento == \"\") {\n            swal.fire(\"Atenção!\", \"Para continuar numero de tombamento precisa ser selecionado!\", \"warning\");\n          } else {\n            formData.append(\"file\", element.file, _this3.numero_tombamento + \"-\" + element.filename);\n          }\n\n          _this3.salvarNota(formData); //console.log(formData.getAll(\"file\"));\n\n        });\n      }\n    },\n    salvarNota: function salvarNota(nota) {\n      var _this4 = this;\n\n      var autorizacaoAux = sessionStorage.getItem(\"usuario\");\n\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux); //console.log(\"entrou para anexar Nota Fiscal\");\n\n        this.$http.post(this.$url + \"DoacaoInstrumento/v1/salvar-nota-doacao-instrumento\", nota, {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          }\n        }).then(function (response) {\n          if (response.status == 200) {\n            _this4.dialog = false;\n            swal.fire({\n              type: \"success\",\n              title: \"Anexado com sucesso\",\n              text: \"...\"\n            }); //console.log(response.data);\n\n            _this4.$emit(\"path_nota\", {\n              path: response.data\n            });\n          } else if (response.status == 401) {} else if (response.status == 500) {} ////console.log(response.data);\n\n        }).catch(function (e) {\n          swal.fire(\"Sua autorização expirou!\", \"Entre com suas credencias novamente.\", \"warning\");\n\n          _this4.$router.push(\"/\"); //console.error(e);\n          //console.data(e.data);\n\n        });\n      }\n    },\n    outrosDocs: function outrosDocs(docs) {\n      var _this5 = this;\n\n      //console.log(\"Tamanho da quantidade notas de doacao\", docs.length);\n      docs.forEach(function (element) {\n        //console.log(element.file);\n        var formData = new FormData(); //console.log(\"numero\", this.numero_tombamento);\n\n        if (_this5.numero_tombamento == \"\") {\n          swal.fire(\"Atenção!\", \"Para continuar o numero de tombamento precisa ser selecionado!\", \"warning\");\n        } else {\n          formData.append(\"file\", element.file, _this5.numero_tombamento + \"-\" + element.filename);\n        }\n\n        _this5.salvarDocs(formData); //console.log(formData.getAll(\"file\"));\n\n      });\n    },\n    salvarDocs: function salvarDocs(doc) {\n      var _this6 = this;\n\n      var autorizacaoAux = sessionStorage.getItem(\"usuario\");\n\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux); //console.log(\"entrou para anexar Nota Fiscal\");\n\n        this.$http.post(this.$url + \"DoacaoInstrumento/v1/salvar-outros-doacao-instrumento\", doc, {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          }\n        }).then(function (response) {\n          if (response.status == 200) {\n            _this6.dialog = false;\n            swal.fire({\n              type: \"success\",\n              title: \"Anexado com sucesso\",\n              text: \"...\"\n            }); //console.log(response.data);\n\n            _this6.$emit(\"path_nota\", {\n              path: response.data\n            });\n          } else if (response.status == 401) {} else if (response.status == 500) {} ////console.log(response.data);\n\n        }).catch(function (e) {\n          swal.fire(\"Sua autorização expirou!\", \"Entre com suas credencias novamente.\", \"warning\");\n\n          _this6.$router.push(\"/\"); //console.error(e);\n          //console.data(e.data);\n\n        });\n      }\n    }\n  },\n  components: {\n    FilePond: FilePond\n  }\n};",{"version":3,"sources":["CadastroTermos.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-layout>\n    <v-flex xs12 sm12 md12 lg12>\n      <v-layout>\n        <v-flex xs12 sm12 md4 lg4>\n          <v-hover>\n            <v-card slot-scope=\"{ hover }\" :class=\"`elevation-${hover ? 12 : 2}`\" class=\"mx-auto\">\n              <v-card-title primary-title>\n                <div>\n                  <h3 class=\"font-weight-bold subheading blue--text text--darken-4\">\n                    Termo da doação\n                  </h3>\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <span id=\"cadastrotermos\">\n                  <file-pond\n                    style=\"cursor:pointer\"\n                    name=\"test\"\n                    ref=\"pondtermodoacao\"\n                    class-name=\"my-pond\"\n                    label-idle=\"anexar aqui\"\n                    :accepted-file-types=\"tipo\"\n                    v-bind:files=\"myFiles\"\n                    labelFileTypeNotAllowed=\"NÃO ACEITO\"\n                    fileValidateTypeLabelExpectedTypes=\"É esperado um PDF\"\n                  ></file-pond>\n                </span>\n              </v-card-text>\n            </v-card>\n          </v-hover>\n        </v-flex>\n        <v-flex xs12 sm12 md4 lg4>\n          <v-hover>\n            <v-card slot-scope=\"{ hover }\" :class=\"`elevation-${hover ? 12 : 2}`\" class=\"mx-auto\">\n              <v-card-title primary-title>\n                <div>\n                  <h3 class=\"font-weight-bold subheading blue--text text--darken-4\">\n                    Nota fiscal\n                  </h3>\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <span id=\"cadastrotermos\">\n                  <file-pond\n                    style=\"cursor:pointer\"\n                    name=\"test\"\n                    ref=\"pondnotafiscal\"\n                    class-name=\"my-pond\"\n                    label-idle=\"Anexar aqui\"\n                    :accepted-file-types=\"tipo\"\n                    v-bind:files=\"myFiles\"\n                    labelFileTypeNotAllowed=\"NÃO ACEITO\"\n                    fileValidateTypeLabelExpectedTypes=\"É esperado um PDF\"\n                  ></file-pond>\n                </span>\n              </v-card-text>\n            </v-card>\n          </v-hover>\n        </v-flex>\n        <v-flex xs12 sm12 md4 lg4>\n          <v-hover>\n            <v-card slot-scope=\"{ hover }\" :class=\"`elevation-${hover ? 12 : 2}`\" class=\"mx-auto\">\n              <v-card-title primary-title>\n                <div>\n                  <h3 class=\"font-weight-bold subheading blue--text text--darken-4\">\n                    Outros documentos\n                  </h3>\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <span id=\"cadastrotermos\">\n                  <file-pond\n                    style=\"cursor:pointer\"\n                    name=\"test\"\n                    ref=\"pondoutrosdocs\"\n                    class-name=\"my-pond\"\n                    label-idle=\"Anexar aqui\"\n                    :accepted-file-types=\"tipo\"\n                    v-bind:files=\"myFiles\"\n                    labelFileTypeNotAllowed=\"NÃO ACEITO\"\n                    fileValidateTypeLabelExpectedTypes=\"É esperado um PDF\"\n                  ></file-pond>\n                </span>\n              </v-card-text>\n            </v-card>\n          </v-hover>\n        </v-flex>\n      </v-layout>\n       <!--\n    <v-flex xs12 sm12 md12 lg12 align-center>\n      <v-btn        \n        color=\"green darken-4\"\n        dark\n        v-on:click=\"handleFilePondInit\"\n      >\n        SALVAR INSTRUMENTO\n      </v-btn>\n    </v-flex>-->\n    <v-flex xs12 sm12 md12 lg12 align-center>\n      <v-btn        \n        color=\"green darken-4\"\n        dark\n      >\n        SALVAR INSTRUMENTO\n      </v-btn>\n    </v-flex>\n    </v-flex>\n  </v-layout>\n</template>  \n  <script>\n// Import FilePond\nimport vueFilePond from \"vue-filepond\";\n// Import plugins\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.esm.js\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.esm.js\";\nimport FilePondPluginFileRename from \"filepond-plugin-file-rename\";\nimport swal from \"sweetalert2\";\n// Import styles\nimport \"filepond/dist/filepond.min.css\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\n// Create FilePond component\nconst FilePond = vueFilePond(\n  FilePondPluginFileValidateType,\n  FilePondPluginImagePreview,\n  FilePondPluginFileRename\n);\nexport default {\n  props: [\"numero_tombamento\"],\n  name: \"cadastrotermos\",\n  data: function() {\n    return {\n      myFiles: [],\n      arquivos: [],\n      tipo: [\"application/pdf\"],\n      termo_valid: false\n    };\n  },\n  methods: {\n    handleFilePondInit: function() {\n      ////console.log(\"FilePond has initialized\");\n      // example of instance method call on pond reference\n      ////console.log('Termo Doacao arquivo',this.$refs.pondtermodoacao.getFiles());\n      this.termoDoacao(this.$refs.pondtermodoacao.getFiles());\n      ////console.log(\"Nota fiscal doação arquivo\",this.$refs.pondnotafiscal.getFiles());\n      this.notaFiscal(this.$refs.pondnotafiscal.getFiles());\n      ////console.log(\"outros docs doação arquivo\",this.$refs.pondoutrosdocs.getFiles());\n      this.outrosDocs(this.$refs.pondoutrosdocs.getFiles());\n      if (this.termo_valid == false) {\n        swal.fire(\n          \"Atenção!\",\n          \"O Termo de  precisa ser anexada ao instrumento!\",\n          \"warning\"\n        );\n      } else {\n        this.$emit(\"cadastrarDoacao\");\n      }\n    },\n    termoDoacao(termo) {\n      ////console.log('Tamanho da quantidade termos de doacao',termo.length);\n      if (termo.length == 0) {\n        ////console.log('Tamanho da quantidade termos de doacao dentro do eslse if',termo.length);\n        swal.fire(\n          \"Atenção!\",\n          \"O Termo de  precisa ser anexada ao instrumento!\",\n          \"warning\"\n        );\n      } else if (termo.length == 1) {\n        termo.forEach(element => {\n          ////console.log(element.file);\n          let formData = new FormData();\n          ////console.log(\"numero\", this.numero_tombamento);\n          if (this.numero_tombamento == \"\") {\n            swal.fire(\n              \"Atenção!\",\n              \"Para continuar numero de tombamento precisa ser selecionado!\",\n              \"warning\"\n            );\n          } else {\n            formData.append(\n              \"file\",\n              element.file,\n              this.numero_tombamento + \"-\" + element.filename\n            );\n          }\n          this.salvarTermo(formData);\n          this.termo_valid = true;\n          // //console.log(formData.getAll(\"file\"));\n        });\n      }\n    },\n    salvarTermo(termo) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        //console.log(\"entrou para anexar termo de doação\");\n        this.$http\n          .post(\n            this.$url + \"DoacaoInstrumento/v1/salvar-termo-doacao-instrumento\",\n            termo,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              swal.fire({\n                type: \"success\",\n                title: \"Anexado com sucesso\",\n                text: \"...\"\n              });\n              //console.log(response.data);\n              this.$emit(\"path_nota\", { path: response.data });\n            } else if (response.status == 401) {\n            } else if (response.status == 500) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    notaFiscal(nota) {\n      //console.log(\"Tamanho da quantidade outros docs de doacao\", nota.length);\n      if (nota.length == 1) {\n        nota.forEach(element => {\n          //console.log(element.file);\n          let formData = new FormData();\n          //console.log(\"numero\", this.numero_tombamento);\n          if (this.numero_tombamento == \"\") {\n            swal.fire(\n              \"Atenção!\",\n              \"Para continuar numero de tombamento precisa ser selecionado!\",\n              \"warning\"\n            );\n          } else {\n            formData.append(\n              \"file\",\n              element.file,\n              this.numero_tombamento + \"-\" + element.filename\n            );\n          }\n          this.salvarNota(formData);\n          //console.log(formData.getAll(\"file\"));\n        });\n      }\n    },\n    salvarNota(nota) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        //console.log(\"entrou para anexar Nota Fiscal\");\n        this.$http\n          .post(\n            this.$url + \"DoacaoInstrumento/v1/salvar-nota-doacao-instrumento\",\n            nota,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              swal.fire({\n                type: \"success\",\n                title: \"Anexado com sucesso\",\n                text: \"...\"\n              });\n              //console.log(response.data);\n              this.$emit(\"path_nota\", { path: response.data });\n            } else if (response.status == 401) {\n            } else if (response.status == 500) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    outrosDocs(docs) {\n      //console.log(\"Tamanho da quantidade notas de doacao\", docs.length);\n      docs.forEach(element => {\n        //console.log(element.file);\n        let formData = new FormData();\n        //console.log(\"numero\", this.numero_tombamento);\n        if (this.numero_tombamento == \"\") {\n          swal.fire(\n            \"Atenção!\",\n            \"Para continuar o numero de tombamento precisa ser selecionado!\",\n            \"warning\"\n          );\n        } else {\n          formData.append(\n            \"file\",\n            element.file,\n            this.numero_tombamento + \"-\" + element.filename\n          );\n        }\n        this.salvarDocs(formData);\n        //console.log(formData.getAll(\"file\"));\n      });\n    },\n    salvarDocs(doc) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        //console.log(\"entrou para anexar Nota Fiscal\");\n        this.$http\n          .post(\n            this.$url + \"DoacaoInstrumento/v1/salvar-outros-doacao-instrumento\",\n            doc,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              swal.fire({\n                type: \"success\",\n                title: \"Anexado com sucesso\",\n                text: \"...\"\n              });\n              //console.log(response.data);\n              this.$emit(\"path_nota\", { path: response.data });\n            } else if (response.status == 401) {\n            } else if (response.status == 500) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    }\n  },\n  components: {\n    FilePond\n  }\n};\n</script>\n  <style  type=\"text/css\">\n/* the text color of the drop label*/\n.filepond--drop-label {\n  color: white;\n}\n.filepond--panel-root {\n  background-color: rgb(43, 48, 128);\n}\n</style>\n  \n  "],"sourceRoot":"src/pages/Modulos/Patrimonio/Instrumento/Cadastros"}]}