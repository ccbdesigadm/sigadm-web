{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/app/modulos/patrimonio/Setorizacao/Inicio/Home.vue?vue&type=style&index=0&id=58b18d42&scoped=true&lang=css&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/app/modulos/patrimonio/Setorizacao/Inicio/Home.vue","mtime":1572273015820},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/css-loader/dist/cjs.js","mtime":1569691725705},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1569691710961},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/postcss-loader/src/index.js","mtime":1569691706876},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable.v-table tbody td:first-child,\ntable.v-table tbody td:not(:first-child),\ntable.v-table tbody th:first-child,\ntable.v-table tbody th:not(:first-child),\ntable.v-table thead td:first-child,\ntable.v-table thead td:not(:first-child),\ntable.v-table thead th:first-child,\ntable.v-table thead th:not(:first-child) {\n  padding: 0 1px;\n}\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/app/Modulos/Patrimonio/Setorizacao/Inicio","sourcesContent":[" \n<template>\n  <site-patrimonio>\n    <div class=\"block-header align-center mt-5\">\n      <h2 class=\"font-weight-bold headline blue--text text--darken-4\">Igrejas do Rio Grande do Norte</h2>\n    </div>\n    <v-card></v-card>\n    <!-- Exportable Table -->\n    <v-card>\n      <v-flex xs12 sm12 md12 lg12 d-flex>\n        <v-flex xs4 sm4 md6 lg3 v-if=\"busca == false\" class=\"pt-5 pl-4\">\n          <v-hover>\n            <v-text-field\n              box\n              v-model=\"procurar\"\n              append-icon=\"search\"\n              label=\"Procurar igrejas ...\"\n              class=\"text--pink\"\n              color=\"blue darken-4\"\n              hide-details\n            ></v-text-field>\n          </v-hover>\n        </v-flex>\n        <v-flex xs6 sm6 md3 lg3 offset-md5 align-center class=\"pt-5 pl-4\" v-if=\"busca == false\">\n          <cad-igreja @Igreja=\"BuscarIgrejas()\"></cad-igreja>\n          <cad-editar\n            :dialog_ativar=\"ativar_edicao\"\n            :igreja_edicao=\"igreja_edicao\"\n            @Igreja=\"BuscarIgrejas()\"\n          ></cad-editar>\n        </v-flex>\n        <!--\n        BOTÃO PARA ATIVAR MODO EDIÇÃO\n        <v-flex-- class=\"pt-5 pl-4\" v-if=\"busca == false\">\n          <v-btn outline color=\"red\" @click=\"openEdicao\">\n            <v-icon>fas fa-cog</v-icon>\n          </v-btn>\n        </v-flex\n        -->\n      </v-flex>\n      <v-layout row align-center>\n        <v-dialog v-model=\"busca\" max-width=\"350\" persistent>\n          <v-card>\n            <v-card-title class=\"headline light-blue darken-4 white--text\">\n              <v-flex align-center class=\"white--text text--darken-4\">SETORIZAÇÃO |\n            <span class=\"grey--text text--lighten-1\">IGREJAS</span></v-flex>\n            </v-card-title>\n            <v-card-text>\n              <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n                <span>\n                  <v-progress-circular\n                    :size=\"50\"\n                    :width=\"3\"\n                    color=\"light-blue darken-4\"\n                    indeterminate\n                  >\n                    <v-icon color=\"light-blue darken-4\">fas fa-map-marker-alt</v-icon>\n                  </v-progress-circular>\n                  <br />\n                  <h5 class=\"light-blue--text text--darken-4\">Esperando informações ...</h5>\n                </span>\n              </v-flex>\n            </v-card-text>\n          </v-card>\n        </v-dialog>\n      </v-layout>\n\n      <v-data-table\n        class=\"pt-5\"\n        :search=\"procurar\"\n        :headers=\"headers\"\n        v-if=\"busca == false\"\n        :items=\"igrejas\"\n        :item-key=\"igrejas.id\"\n        :pagination.sync=\"pagination\"\n      >\n        <template slot=\"items\" slot-scope=\"props\">\n          <tr>\n            <td\n              class=\"pl-4 text-xs-left\"\n              @click=\"AtivarEdicao(props.item)\"\n              style=\"cursor:pointer;\"\n            >{{props.item.codigo.substring(2,'')+'-'+props.item.codigo.substring(2,4)+'-'+props.item.codigo.substring(4,8)}}</td>\n            <td\n              class=\"pl-4 text-xs-left\"\n              @click=\"AtivarEdicao(props.item)\"\n              style=\"cursor:pointer;\"\n            >{{props.item.cidade}}</td>\n            <td\n              class=\"pl-4 text-xs-left\"\n              @click=\"AtivarEdicao(props.item)\"\n              style=\"cursor:pointer;\"\n            >{{props.item.nomeRelatorio}}</td>\n            <td class=\"pl-3 text-xs-center\">\n              <v-edit-dialog\n                :return-value.sync=\"props.item.encRegional\"\n                lazy\n                @save=\"saveRegional(props.item.encRegional,props.item)\"\n                @cancel=\"cancel\"\n                @open=\"open\"\n                @close=\"close\"\n              >\n                <span class=\"ml-1\">{{ props.item.encRegional }}</span>\n                <template v-slot:input>\n                  <v-autocomplete\n                    class=\"mt-3\"\n                    v-model=\"props.item.encRegional\"\n                    :items=\"regionais\"\n                    box\n                    label=\"Encarregado regional\"\n                    item-text=\"nome\"\n                    item-value=\"nome\"\n                    color=\"teal darken-3\"\n                    single-line\n                  >\n                    <template slot=\"item\" slot-scope=\"data\">\n                      <v-flex xs10 sm10>\n                        <v-list-tile>\n                          <v-list-tile-content v-html=\"data.item.nome\"></v-list-tile-content>\n                        </v-list-tile>\n                      </v-flex>\n                    </template>\n                  </v-autocomplete>\n                </template>\n              </v-edit-dialog>\n            </td>\n            <td class=\"pl-3 text-xs-center\">\n              <v-edit-dialog\n                :return-value.sync=\"props.item.encLocal\"\n                lazy\n                @save=\"saveEncLocal(props.item.encLocal,props.item)\"\n                @cancel=\"cancel\"\n                @open=\"open\"\n                @close=\"close\"\n              >\n                <span class=\"ml-1\">{{ props.item.encLocal }}</span>\n                <template v-slot:input>\n                  <v-autocomplete\n                    class=\"mt-3\"\n                    v-model=\"props.item.encLocal\"\n                    :items=\"encLocais\"\n                    box\n                    label=\"Encarregado local\"\n                    item-text=\"nome\"\n                    item-value=\"nome\"\n                    color=\"teal darken-3\"\n                    single-line\n                  >\n                    <template slot=\"item\" slot-scope=\"data\">\n                      <v-flex xs10 sm10>\n                        <v-list-tile>\n                          <v-list-tile-content v-html=\"data.item.nome\"></v-list-tile-content>\n                        </v-list-tile>\n                      </v-flex>\n                    </template>\n                  </v-autocomplete>\n                </template>\n              </v-edit-dialog>\n            </td>\n          </tr>\n        </template>\n      </v-data-table>\n      <v-snackbar v-model=\"snack\" :timeout=\"5000\" :color=\"snackColor\" :botton=\"true\" :right=\"true\">\n        {{ snackText }}\n        <v-btn flat @click=\"snack = false\">\n          <v-icon>close</v-icon>\n        </v-btn>\n      </v-snackbar>\n      <v-snackbar v-model=\"snackEdicao\" :timeout=\"1000000\" color=\"yellow\" :top=\"true\" :right=\"true\">\n        <span class=\"black--text\">{{ snackTextEdicao }}</span>\n        <v-btn color=\"indigo\" @click=\"closeEdicao\">Desativar</v-btn>\n      </v-snackbar>\n      <v-snackbar\n        v-model=\"snackDesativadaEdicao\"\n        :timeout=\"5000\"\n        color=\"green\"\n        :top=\"true\"\n        :right=\"true\"\n      >\n        <span class=\"white--text\">{{ snackTextEdicao }}</span>\n      </v-snackbar>\n    </v-card>\n\n    <!-- #END# Exportable Table -->\n  </site-patrimonio>\n</template>\n\n<script>\nimport SitePatrimonio from \"@/templates/SitePatrimonio\";\nimport CadIgreja from \"@/pages/Modulos/Patrimonio/Setorizacao/Cadastros/IgrejaModal\";\nimport CadEditar from \"@/pages/Modulos/Patrimonio/Setorizacao/Cadastros/IgrejaEditarModal\";\n\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    CadIgreja,\n    CadEditar\n  },\n  data() {\n    return {\n      ativar_edicao: \"\",\n      igreja_edicao: Object,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      snack: false,\n      snackEdicao: false,\n      snackDesativadaEdicao: false,\n      snackColor: \"\",\n      snackText: \"\",\n      snackTextEdicao: \"\",\n      max25chars: v => v.length <= 25 || \"Input too long!\",\n      headers: [\n        {\n          text: \"CÓDIGO RELATÓRIO\",\n          align: \"left\",\n          value: \"codigo\",\n          class: \"blue darken-3 white--text\",\n          width: \"1%\"\n        },\n        {\n          text: \"CIDADE\",\n          align: \"left\",\n          class: \"blue darken-3 white--text\",\n          value: \"cidade\",\n          width: \"1%\"\n        },\n        {\n          text: \"CASA DE ORAÇÃO\",\n          align: \"left\",\n          class: \"blue darken-3 white--text\",\n          value: \"nomeRelatorio\",\n          width: \"1%\"\n        },\n        {\n          text: \"ENCARREGADO REGIONAL\",\n          value: \"encRegional\",\n          class: \"blue darken-3 white--text\",\n          width: \"1%\"\n        },\n        {\n          text: \"ENCARREGADO LOCAL\",\n          value: \"encLocal\",\n          class: \"blue darken-3 white--text\",\n          width: \"1%\"\n        }\n      ],\n      autorizacao: false,\n      igrejas: [],\n      show: false,\n      busca: true,\n      regionais: [{ nome: \"Sem encarregado\" }],\n      encLocais: [{ nome: \"Sem encarregado\" }],\n      token: \"\"\n    };\n  },\n  created() {\n    this.BuscarIgrejas();\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate();\n    }\n  },\n  watch: {\n    /* eslint-disable */\n    date(val) {\n      this.dateFormatted = this.formatDate();\n    }\n  },\n  methods: {\n    AtivarEdicao(igreja) {\n      // //console.log(igreja);\n      this.ativar_edicao = Math.random();\n      this.igreja_edicao = igreja;\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    BuscarIgrejas() {\n      /* eslint-disable */\n      this.igrejas = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.token = Math.random();\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Igreja/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.data.length == 0) {\n              this.busca = false;\n            }\n            //console.log(response.status);\n            if (response.status == 200) {\n              this.igrejas = response.data;\n              this.BuscarEncarregadosRegionais();\n              this.BuscarEncarregadosLocais();\n              this.busca = false;\n              //console.log(\"Igrejas N Relatorio:\", this.igrejas);\n            } else if (response.status == 401) {\n              this.token = Math.random();\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            this.token = Math.random();\n            //console.log(\"Nao autorizado\", this.token);\n            ////console.error(e);\n            ////console.data(e.data);\n          });        \n      }\n    },\n    IgrejaPut(item) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        //console.log(\"Nao autorizado\");\n      } else if (usuarioAutorize) {\n        //console.log(\"Put list \", item);\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .put(\n            this.$url + \"Igreja/v1\",\n            {\n              id: item[0].id,\n              codigo: item[0].codigo,\n              cidade: item[0].cidade,\n              bairro: item[0].bairro,\n              endereco: item[0].endereco,\n              cep: item[0].cep,\n              encRegional: item[0].encRegional,\n              encLocal: item[0].encLocal,\n              launchDate: item[0].launchDate\n            },\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              //console.log(\"Salvo com sucesso, dados:\", response.data);\n              //this.closeEdicao();\n              this.busca = false;\n            }\n          })\n          .catch(e => {\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    BuscarEncarregadosRegionais() {\n      //console.log(\"buscar regional\");\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (!autorizacaoAux) {\n        swal.fire(\n          \"Sua autorização expirou!\",\n          \"Entre com suas credencias novamente.\",\n          \"warning\"\n        );\n        this.$router.push(\"/\");\n      }\n      if (autorizacaoAux) {\n        //console.log(\"regional buscando\");\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        ////console.log(\"entrou no cadastro de devolucao\");\n        this.$http\n          .get(this.$url + \"Usuario/v1\", {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              this.regionais = [];\n              response.data.forEach(element => {\n                if (element.cargo == \"Encarregado Regional\") {\n                  this.regionais.push({ nome: element.nome });\n                }\n              });\n              this.regionais.push({ nome: \"Sem encarregado\" });\n              this.regionais.reverse();\n            }\n          })\n          .catch(e => {\n            this.token = Math.random();\n            //console.log(\"Nao autorizado\", this.token);\n          });\n      }\n    },\n    BuscarEncarregadosLocais() {\n      //console.log(\"buscar encarregado local\");\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (!autorizacaoAux) {\n        swal.fire(\n          \"Sua autorização expirou!\",\n          \"Entre com suas credencias novamente.\",\n          \"warning\"\n        );\n        this.$router.push(\"/\");\n      }\n      if (autorizacaoAux) {\n        //console.log(\"local buscando\");\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        ////console.log(\"entrou no cadastro de devolucao\");\n        this.$http\n          .get(this.$url + \"Usuario/v1\", {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              this.encLocais = [];\n              response.data.forEach(element => {\n                if (element.cargo == \"Encarregado Local\") {\n                  this.encLocais.push({ nome: element.nome });\n                }\n              });\n              this.encLocais.push({ nome: \"Sem encarregado\" });\n              this.encLocais.reverse();\n            }\n          })\n          .catch(e => {\n            this.token = Math.random();\n            //console.log(\"Nao autorizado\", this.token);\n          });\n      }\n    },\n    saveRegional(item, lista) {\n      this.snack = true;\n      this.snackColor = \"green accent-4\";\n      this.snackText = \"Edição salva\";\n      //console.log(\"item: \" + item);\n      //console.log(\"lista: \", lista);\n      let listaNova = [];\n      listaNova.push({\n        id: lista.id,\n        codigo: lista.codigo,\n        cidade: lista.cidade,\n        bairro: lista.cidade,\n        endereco: lista.endereco,\n        cep: lista.cep,\n        encRegional: item,\n        encLocal: lista.encLocal,\n        launchDate: lista.launchDate\n      });\n      //console.log(listaNova);\n      this.IgrejaPut(listaNova);\n    },\n    saveEncLocal(item, lista) {\n      this.snack = true;\n      this.snackColor = \"green accent-4\";\n      this.snackText = \"Edição salva\";\n      //console.log(\"item: \", item);\n      //console.log(\"lista: \", lista);\n      let listaNova = [];\n      listaNova.push({\n        id: lista.id,\n        codigo: lista.codigo,\n        cidade: lista.cidade,\n        bairro: lista.cidade,\n        endereco: lista.endereco,\n        cep: lista.cep,\n        encRegional: lista.encRegional,\n        encLocal: item,\n        launchDate: lista.launchDate\n      });\n      //console.log(listaNova);\n      this.IgrejaPut(listaNova);\n    },\n    cancel() {\n      this.snack = true;\n      this.snackColor = \"error\";\n      this.snackText = \"Edição cancelada\";\n    },\n    open() {\n      this.snack = true;\n      this.snackColor = \"indigo\";\n      this.snackText = \"Edição iniciada\";\n    },\n    open() {\n      this.snack = true;\n      this.snackColor = \"indigo\";\n      this.snackText = \"Edição iniciada\";\n    },\n    openEdicao() {\n      this.snackEdicao = true;\n      this.snackTextEdicao = \"Modo de edição ativado\";\n    },\n    closeEdicao() {\n      this.snackEdicao = false;\n      this.snackDesativadaEdicao = true;\n      this.snackTextEdicao = \"Modo de edição desativado\";\n    },\n    close() {\n      //console.log(\"Dialog closed\");\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ntable.v-table tbody td:first-child,\ntable.v-table tbody td:not(:first-child),\ntable.v-table tbody th:first-child,\ntable.v-table tbody th:not(:first-child),\ntable.v-table thead td:first-child,\ntable.v-table thead td:not(:first-child),\ntable.v-table thead th:first-child,\ntable.v-table thead th:not(:first-child) {\n  padding: 0 1px;\n}\n</style>\n"]}]}