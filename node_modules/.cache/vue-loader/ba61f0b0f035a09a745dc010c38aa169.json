{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AutorizarSolicitacaoEmprestimoModal.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AutorizarSolicitacaoEmprestimoModal.vue","mtime":1577190729900},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/css-loader/dist/cjs.js","mtime":1569691725705},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1569691710961},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/postcss-loader/src/index.js","mtime":1569691706876},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mesmo-tamanho {\n  width: 100%;\n  white-space: normal;\n}\n",{"version":3,"sources":["AutorizarSolicitacaoEmprestimoModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgSA;AACA;AACA;AACA","file":"AutorizarSolicitacaoEmprestimoModal.vue","sourceRoot":"src/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar","sourcesContent":["<template>\n  <v-layout>\n    <v-dialog v-model=\"dialog\" persistent max-width=\"400px\">\n      <v-btn\n        flat\n        color=\"warning\"\n        v-if=\"statusSolicitacao == 'Aguardando'\"\n        @click=\"Mostrar\"\n        slot=\"activator\"\n      >\n      <v-icon small left>fas fa-exclamation-circle</v-icon>\n        <small>AUTORIZAR</small>\n      </v-btn>\n      <v-card>\n        <v-flex xs12 sm12>\n          <div class=\"pt-1\">\n            <v-btn\n              right\n              class=\"white--text\"\n              small\n              fab\n              round\n              box\n              color=\"red darken-1\"\n              absolute\n              v-on:click=\"dialog = false\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n          </div>\n        </v-flex>\n        <v-card-title>\n          <v-flex xs12 sm12 md12 lg12 pt-4 align-center>\n            <span class=\"font-weight-bold headline blue--text text--darken-4\">\n              Solicitação de intrumento para\n              <br />\n              o irmão {{irmao}}\n            </span>\n          </v-flex>\n        </v-card-title>\n        <v-card-text>\n          <br />\n          <h3\n            class=\"light-blue--text text--darken-4\"\n          >Qual foi tipo de autorização?</h3>\n          <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n            <v-radio-group v-model=\"radios\" :mandatory=\"false\">\n              <v-radio label=\"Reunião de encarregados regionais\" value=\"reuniao\"></v-radio>\n              <v-radio label=\"Fundo musical\" value=\"fundo_musical\"></v-radio>\n            </v-radio-group>\n          </v-flex>\n          <v-flex xs12 sm12 md12 lg12>\n            <v-dialog\n              ref=\"dialog_dataCadastro_modal\"\n              v-model=\"modal_dataCadastro\"\n              :return-value.sync=\"data_cadastro\"\n              persistent\n              lazy\n              full-width\n              width=\"290px\"\n            >\n              <v-text-field\n                slot=\"activator\"\n                v-model=\"computedDateFormatted\"\n                label=\"Data da deliberação\"\n                append-icon=\"event\"\n                readonly\n                color=\"teal darken-3\"\n                hint\n                persistent-hint\n                box\n              ></v-text-field>\n              <v-date-picker\n                v-model=\"data_cadastro\"\n                scrollable\n                locale=\"pt-BR\"\n                color=\"blue darken-4\"\n              >\n                <v-spacer></v-spacer>\n                <v-btn flat color=\"primary\" @click=\"modal_dataCadastro = false\">Cancelar</v-btn>\n                <v-btn\n                  flat\n                  color=\"primary\"\n                  @click=\"$refs.dialog_dataCadastro_modal.save(data_cadastro)\"\n                >OK</v-btn>\n              </v-date-picker>\n            </v-dialog>\n          </v-flex>\n          <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n            <span>\n              <v-btn\n                outline\n                color=\"error\"\n                v-if=\"statusSolicitacao == 'Aguardando'\"\n                @click=\"SalvarStatusNaoAutorizadoSolicitacaoEmprestimo\"\n              >\n                <small>Não autorizar</small>\n              </v-btn>\n              <v-btn\n                flat\n                color=\"success\"\n                v-if=\"statusSolicitacao == 'Aguardando'\"\n                @click=\"SalvarStatusAprovadoSolicitacaoEmprestimo\"\n              >\n                <v-icon small left>fas fa-check</v-icon>\n                <small>Autorizar</small>\n              </v-btn>\n            </span>\n          </v-flex>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-layout>\n</template>\n<script>\nimport swal from \"sweetalert2\";\nimport StoreInstrumento from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeInstrumento\";\n\nexport default {\n  props: [\"statusSolicitacao\", \"irmao\", \"solicitacao\"],\n  data() {\n    return {\n      dialog: false,\n      modal: false,\n      radios: \"reuniao\",\n      dialog_dataCadastro_modal: null,\n      modal_dataCadastro: false,\n      data_cadastro: new Date().toISOString().substr(0, 10)\n    };\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_cadastro);\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_cadastro);\n    }\n  },\n  methods: {\n    SalvarDeliberacao(){\n       let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n\n      this.$http\n        .post(\n          this.$url + \"DeliberacaoEmprestimo/v1\",\n          {\n            id: 0,\n            tipo: this.radios+\"_\"+this.solicitacao.id,            \n            dataCadastro: this.solicitacao.dataCadastro,           \n            launchDate: this.solicitacao.launcDate\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {           \n          }\n        console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AlertaMixin(type, title, time) {\n      const Toast = swal.mixin({\n        toast: true,\n        position: \"top\",\n        showConfirmButton: false,\n        timer: time\n      });\n\n      Toast.fire({\n        type: type,\n        title: title\n      });\n    },\n    Mostrar() {\n      //console.log(this.solicitacao)\n    },\n    SalvarStatusAprovadoSolicitacaoEmprestimo() {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n\n      this.$http\n        .put(\n          this.$url + \"SolicitacaoEmprestimo/v1\",\n          {\n            id: this.solicitacao.id,\n            nome: this.solicitacao.nome,\n            irmao:this.solicitacao.irmao,\n            comumCongregacao: this.solicitacao.comumCongregacao,\n            primeiroInstrumento: this.solicitacao.primeiroInstrumento,\n            primeiraCategoria: this.solicitacao.primeiraCategoria,\n            segundoInstrumento: this.solicitacao.segundoInstrumento,\n            segundaCategoria: this.solicitacao.segundaCategoria,\n            dataCadastro: this.solicitacao.dataCadastro,\n            status: \"Aprovado\",\n            launchDate: this.solicitacao.launcDate\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Solicitação de empréstimo salva com sucesso\");\n            let irmao = response.data;\n            this.SalvarDeliberacao();\n            this.$emit(\"solicitacaoSalva\");\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    SalvarStatusNaoAutorizadoSolicitacaoEmprestimo() {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .put(\n          this.$url + \"SolicitacaoEmprestimo/v1\",\n          {\n            id: this.solicitacao.id,\n            nome: this.solicitacao.nome,\n            irmao:this.solicitacao.irmao,\n            comumCongregacao: this.solicitacao.comumCongregacao,\n            primeiroInstrumento: this.solicitacao.primeiroInstrumento,\n            primeiraCategoria: this.solicitacao.primeiraCategoria,\n            segundoInstrumento: this.solicitacao.segundoInstrumento,\n            segundaCategoria: this.solicitacao.segundaCategoria,\n            dataCadastro: this.solicitacao.dataCadastro,\n            status: \"Não aprovado\",\n            launchDate: this.solicitacao.launcDate\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Solicitação de empréstimo salva com sucesso\");\n            let irmao = response.data;\n            this.SalvarDeliberacao();\n            this.$emit(\"solicitacaoSalva\");\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    Loading(title, icon) {\n      swal.fire({\n        title: title,\n        html:\n          \"Por favor só um momento... \" + '<i class=\"fas fa-' + icon + \"></i>\",\n        timer: 3000,\n        onOpen: () => {\n          swal.enableLoading();\n        }\n      });\n    },\n    Salvo(title, msg, type) {\n      swal.fire(title, msg, type);\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    }\n  }\n};\n</script>\n<style>\n.mesmo-tamanho {\n  width: 100%;\n  white-space: normal;\n}\n</style>\n"]}]}