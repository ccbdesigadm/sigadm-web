{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Inicio/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Inicio/Home.vue","mtime":1577190729900},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SolicitacaoEmprestimo from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Cadastros/CadastroSolicitacaoEmprestimoModal.vue\";\nimport SitePatrimonio from \"@/templates/SitePatrimonio.vue\";\nimport EditarSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/EditarSolicitacaoEmprestimoModal.vue\";\nimport AutorizarSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AutorizarSolicitacaoEmprestimoModal.vue\";\nimport AtenderSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AtenderSolicitacaoEmprestimoModal.vue\";\nimport AnexarSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AnexarSolicitacaoEmprestimoModal.vue\";\nimport Termos from \"@/pages/Modulos/Patrimonio/Instrumento/Emprestimo/Termos\";\n\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    SolicitacaoEmprestimo,\n    EditarSolicitacao,\n    AutorizarSolicitacao,\n    AtenderSolicitacao,\n    AnexarSolicitacao\n  },\n  data() {\n    return {\n      total_solicitacao_emprestimo: 0,\n      total_solicitacao_andamento: 0,\n      total_solicitacao_finalizadas: 0,\n      tab: null,\n      ativar_edicao: \"\",\n      solicitacao_edicao: Object,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      headers: [\n        {\n          text: \"NOME\",\n          align: \"left\",\n          value: \"nome\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"INSTRUMENTO 01\",\n          align: \"left\",\n          value: \"primeiroInstrumento\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"INSTRUMENTO 02\",\n          align: \"left\",\n          value: \"segundoInstrumento\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CASA DE ORAÇÃO\",\n          align: \"left\",\n          value: \"comumCongregacao\",\n          sortable: false,\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"DATA DE CADASTRO\",\n          align: \"left\",\n          value: \"dataCadastro\",\n          sortable: false,\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"SITUAÇÃO\",\n          align: \"justify\",\n          value: \"status\",\n          class: \"blue darken-3 white--text\"\n        }\n      ],\n      autorizacao: false,\n      solicitacoes_emprestimos: [],\n      solicitacoes_andamento: [],\n      solicitacoes_finalizadas: [],\n      show: false,\n      busca: true,\n      identificacaoIgreja: \"\",\n      igreja: [],\n      idUsuario: null,\n      dataCadastro: null\n    };\n  },\n  created() {\n    this.BuscarSolicitacoesEmprestimo();\n  },\n  methods: {\n    AtivarEdicao(irmao) {\n      this.ativar_edicao = Math.random();\n      this.solicitacao_edicao = irmao;\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    CadastrarIrmao() {\n      this.$router.push(\"/cadastro-patrimonio-novo-irmao\");\n    },\n    BuscarSolicitacoesEmprestimo() {\n      this.solicitacoes_emprestimos = [];\n      this.solicitacoes_andamento = [];\n      this.solicitacoes_finalizadas = [];\n      this.total_solicitacao_emprestimo = 0;\n      this.total_solicitacao_andamento = 0;\n      this.total_solicitacao_finalizadas = 0;\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        //this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"SolicitacaoEmprestimo/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              this.busca = false;\n              response.data.forEach(element => {\n                this.solicitacoes_emprestimos.push({\n                  id: element.id,\n                  nome: element.nome,\n                  id_irmao: element.irmao,\n                  primeiroInstrumento: element.primeiroInstrumento,\n                  segundoInstrumento: element.segundoInstrumento,\n                  primeiraCategoria: element.primeiraCategoria,\n                  segundaCategoria: element.segundaCategoria,\n                  comumCongregacao: element.comumCongregacao,\n                  dataCadastro: element.dataCadastro.substring(0, 10),\n                  status: element.status,\n                  dados: element\n                });\n                this.total_solicitacao_emprestimo++;\n                if (\n                  element.status != \"Não aprovado\" &&\n                  element.status != \"Finalizada\"\n                ) {\n                  this.solicitacoes_andamento.push({\n                    id: element.id,\n                    nome: element.nome,\n                    id_irmao: element.irmao,\n                    primeiroInstrumento: element.primeiroInstrumento,\n                    segundoInstrumento: element.segundoInstrumento,\n                    primeiraCategoria: element.primeiraCategoria,\n                    segundaCategoria: element.segundaCategoria,\n                    comumCongregacao: element.comumCongregacao,\n                    dataCadastro: element.dataCadastro.substring(0, 10),\n                    status: element.status,\n                    dados: element\n                  });\n                  this.total_solicitacao_andamento++;\n                }\n                if (\n                  element.status == \"Não aprovado\" ||\n                  element.status == \"Finalizada\"\n                ) {\n                  this.solicitacoes_finalizadas.push({\n                    id: element.id,\n                    nome: element.nome,\n                    id_irmao: element.irmao,\n                    primeiroInstrumento: element.primeiroInstrumento,\n                    segundoInstrumento: element.segundoInstrumento,\n                    primeiraCategoria: element.primeiraCategoria,\n                    segundaCategoria: element.segundaCategoria,\n                    comumCongregacao: element.comumCongregacao,\n                    dataCadastro: element.dataCadastro.substring(0, 10),\n                    status: element.status,\n                    dados: element\n                  });\n                  this.total_solicitacao_finalizadas++;\n                }\n              });\n              this.solicitacoes_emprestimos.reverse();\n              this.solicitacoes_andamento.reverse();\n              this.solicitacoes_finalizadas.reverse();\n\n              //console.log(this.igreja);\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            //console.error(e.status);\n            //console.data(e.data);\n          });\n      }\n    }\n  }\n};\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsbA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Inicio","sourcesContent":["<template>\n  <site-patrimonio>\n    <div class=\"block-header align-center pt-4\">\n      <h2\n        class=\"font-weight-bold headline blue--text text--darken-4\"\n      >SOLICITAÇÕES PARA EMPRÉSTIMO DE INSTRUMENTOS</h2>\n    </div>\n    <v-flex xs12 sm12 md12 lg12>\n      <v-tabs v-model=\"tab\" background-color=\"transparent\" color=\"basil\" grow>\n        <v-tab>\n         <v-badge color=\"blue\">\n      <template v-slot:badge>\n       {{total_solicitacao_emprestimo}}\n      </template>\n      <span>Todas</span>\n    </v-badge>\n        </v-tab>\n        <v-tab>\n           <v-badge color=\"green\">\n      <template v-slot:badge>\n       {{total_solicitacao_andamento}}\n      </template>\n      <span>Em andamento</span>\n    </v-badge>\n        </v-tab>\n        <v-tab>\n           <v-badge color=\"brown\">\n      <template v-slot:badge>\n       {{total_solicitacao_finalizadas}}\n      </template>\n      <span>Finalizadas ou Não aprovadas</span>\n    </v-badge>\n        </v-tab>\n      </v-tabs>\n\n      <v-tabs-items v-model=\"tab\">\n        <v-tab-item>\n          <v-card class=\"elevation-0\">\n            <v-flex xs12 sm12 md12 lg12 d-flex>\n              <v-flex xs4 sm4 md6 lg3 v-if=\"busca == false\" class=\"pt-5 pl-4\">\n                <v-hover>\n                  <v-text-field\n                    v-model=\"procurar\"\n                    append-icon=\"search\"\n                    label=\"Procurar solicitação ...\"\n                    color=\"blue darken-4\"\n                    hide-details\n                  ></v-text-field>\n                </v-hover>\n              </v-flex>\n              <v-flex\n                xs6\n                sm6\n                md4\n                lg4\n                offset-md5\n                align-center\n                class=\"pt-5 pl-4\"\n                v-if=\"busca == false\"\n              >\n                <solicitacao-emprestimo @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo()\"></solicitacao-emprestimo>\n              </v-flex>\n            </v-flex>\n            <v-layout row align-center>\n              <v-dialog v-model=\"busca\" max-width=\"150\" persistent>\n                <v-card>\n                  <v-card-title class=\"subheader light-blue darken-4 white--text\">\n                    <v-flex align-center class=\"white--text text--darken-4\">SOLICITAÇÕES</v-flex>\n                  </v-card-title>\n                  <v-card-text>\n                    <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n                      <span>\n                        <v-progress-circular\n                          :size=\"50\"\n                          :width=\"3\"\n                          color=\"light-blue darken-4\"\n                          indeterminate\n                        >\n                          <v-icon color=\"light-blue darken-4\" small>fas fa-file-import</v-icon>\n                        </v-progress-circular>\n                        <br />\n                        <h5 class=\"light-blue--text text--darken-4\">Buscando ...</h5>\n                      </span>\n                    </v-flex>\n                  </v-card-text>\n                </v-card>\n              </v-dialog>\n            </v-layout>\n\n            <v-data-table\n              class=\"mt-5\"\n              :search=\"procurar\"\n              :headers=\"headers\"\n              v-if=\"busca == false\"\n              :items=\"solicitacoes_emprestimos\"\n              :item-key=\"solicitacoes_emprestimos.id\"\n              :pagination.sync=\"pagination\"\n            >\n              <template slot=\"items\" slot-scope=\"props\" class=\"mb-3\">\n                <tr class=\"pl-4 text-xs-left\" style=\"cursor:pointer;\">\n                  <td @click.stop=\"AtivarEdicao(props.item.dados)\" class>{{ props.item.nome }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.primeiroInstrumento + \" \" + props.item.primeiraCategoria }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.segundoInstrumento + \" \" + props.item.segundaCategoria}}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.comumCongregacao }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{formatDate(props.item.dataCadastro)}}</td>\n                  <td>\n                    <span v-if=\"props.item.status == 'Aguardando'\">\n                      <autorizar-solicitacao\n                        :statusSolicitacao=\"props.item.status\"\n                        :irmao=\"props.item.nome\"\n                        :solicitacao=\"props.item.dados\"\n                        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n                      ></autorizar-solicitacao>\n                    </span>\n                    <span v-if=\"props.item.status == 'Aprovado'\">\n                      <atender-solicitacao\n                        :statusSolicitacao=\"props.item.status\"\n                        :irmao=\"props.item.id_irmao\"\n                        :solicitacao=\"props.item.dados\"\n                        :instrumento_um=\"props.item.primeiroInstrumento\"\n                        :instrumento_dois=\"props.item.segundoInstrumento\"\n                        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n                        @emprestimo_sucesso=\"BuscarSolicitacoesEmprestimo\"\n                      ></atender-solicitacao>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Não aprovado'\">\n                      <v-btn flat color=\"error\">\n                        <small>\n                          <v-icon small left>fas fa-times-circle</v-icon>\n                          {{props.item.status}}\n                        </small>\n                      </v-btn>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Anexar'\">\n                      <anexar-solicitacao\n                        :solicitacao=\"props.item.dados\"\n                        :statusSolicitacao=\"props.item.status\"\n                        @anexar_sucesso=\"BuscarSolicitacoesEmprestimo\"\n                      ></anexar-solicitacao>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Finalizada'\">\n                      <v-btn flat color=\"brown\">\n                        <small>\n                          <v-icon small left>fas fa-file-alt</v-icon>\n                          {{props.item.status}}\n                        </small>\n                      </v-btn>\n                    </span>\n                  </td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card>\n        </v-tab-item>\n        <v-tab-item>\n          <v-card class=\"elevation-0\">\n            <v-flex xs12 sm12 md12 lg12 d-flex>\n              <v-flex xs4 sm4 md6 lg3 v-if=\"busca == false\" class=\"pt-5 pl-4\">\n                <v-hover>\n                  <v-text-field\n                    v-model=\"procurar\"\n                    append-icon=\"search\"\n                    label=\"Procurar solicitação ...\"\n                    color=\"blue darken-4\"\n                    hide-details\n                  ></v-text-field>\n                </v-hover>\n              </v-flex>\n              <v-flex\n                xs6\n                sm6\n                md4\n                lg4\n                offset-md5\n                align-center\n                class=\"pt-5 pl-4\"\n                v-if=\"busca == false\"\n              >\n                <solicitacao-emprestimo @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo()\"></solicitacao-emprestimo>\n              </v-flex>\n            </v-flex>\n            <v-layout row align-center>\n              <v-dialog v-model=\"busca\" max-width=\"150\" persistent>\n                <v-card>\n                  <v-card-title class=\"subheader light-blue darken-4 white--text\">\n                    <v-flex align-center class=\"white--text text--darken-4\">SOLICITAÇÕES</v-flex>\n                  </v-card-title>\n                  <v-card-text>\n                    <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n                      <span>\n                        <v-progress-circular\n                          :size=\"50\"\n                          :width=\"3\"\n                          color=\"light-blue darken-4\"\n                          indeterminate\n                        >\n                          <v-icon color=\"light-blue darken-4\" small>fas fa-file-import</v-icon>\n                        </v-progress-circular>\n                        <br />\n                        <h5 class=\"light-blue--text text--darken-4\">Buscando ...</h5>\n                      </span>\n                    </v-flex>\n                  </v-card-text>\n                </v-card>\n              </v-dialog>\n            </v-layout>\n\n            <v-data-table\n              class=\"mt-5\"\n              :search=\"procurar\"\n              :headers=\"headers\"\n              v-if=\"busca == false\"\n              :items=\"solicitacoes_andamento\"\n              :item-key=\"solicitacoes_andamento.id\"\n              :pagination.sync=\"pagination\"\n            >\n              <template slot=\"items\" slot-scope=\"props\" class=\"mb-3\">\n                <tr class=\"pl-4 text-xs-left\" style=\"cursor:pointer;\">\n                  <td @click=\"AtivarEdicao(props.item.dados)\">{{ props.item.nome }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.primeiroInstrumento + \" \" + props.item.primeiraCategoria }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.segundoInstrumento + \" \" + props.item.segundaCategoria}}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.comumCongregacao }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{formatDate(props.item.dataCadastro)}}</td>\n                  <td>\n                    <span v-if=\"props.item.status == 'Aguardando'\">\n                      <autorizar-solicitacao\n                        :statusSolicitacao=\"props.item.status\"\n                        :irmao=\"props.item.nome\"\n                        :solicitacao=\"props.item.dados\"\n                        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n                      ></autorizar-solicitacao>\n                    </span>\n                    <span v-if=\"props.item.status == 'Aprovado'\">\n                      <atender-solicitacao\n                        :statusSolicitacao=\"props.item.status\"\n                        :irmao=\"props.item.id_irmao\"\n                        :solicitacao=\"props.item.dados\"\n                        :instrumento_um=\"props.item.primeiroInstrumento\"\n                        :instrumento_dois=\"props.item.segundoInstrumento\"\n                        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n                        @emprestimo_sucesso=\"BuscarSolicitacoesEmprestimo\"\n                      ></atender-solicitacao>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Não aprovado'\">\n                      <v-btn flat color=\"error\">\n                        <small>\n                          <v-icon small left>fas fa-times-circle</v-icon>\n                          {{props.item.status}}\n                        </small>\n                      </v-btn>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Anexar'\">\n                      <anexar-solicitacao\n                        :solicitacao=\"props.item.dados\"\n                        :statusSolicitacao=\"props.item.status\"\n                        @anexar_sucesso=\"BuscarSolicitacoesEmprestimo\"\n                      ></anexar-solicitacao>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Finalizada'\">\n                      <v-btn flat color=\"brown\">\n                        <small>\n                          <v-icon small left>fas fa-file-alt</v-icon>\n                          {{props.item.status}}\n                        </small>\n                      </v-btn>\n                    </span>\n                  </td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card>\n        </v-tab-item>\n        <v-tab-item>\n          <v-card class=\"elevation-0\">\n            <v-flex xs12 sm12 md12 lg12 d-flex>\n              <v-flex xs4 sm4 md6 lg3 v-if=\"busca == false\" class=\"pt-5 pl-4\">\n                <v-hover>\n                  <v-text-field\n                    v-model=\"procurar\"\n                    append-icon=\"search\"\n                    label=\"Procurar solicitação ...\"\n                    color=\"blue darken-4\"\n                    hide-details\n                  ></v-text-field>\n                </v-hover>\n              </v-flex>\n              <v-flex\n                xs6\n                sm6\n                md4\n                lg4\n                offset-md5\n                align-center\n                class=\"pt-5 pl-4\"\n                v-if=\"busca == false\"\n              >\n                <solicitacao-emprestimo @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo()\"></solicitacao-emprestimo>\n              </v-flex>\n            </v-flex>\n            <v-layout row align-center>\n              <v-dialog v-model=\"busca\" max-width=\"150\" persistent>\n                <v-card>\n                  <v-card-title class=\"subheader light-blue darken-4 white--text\">\n                    <v-flex align-center class=\"white--text text--darken-4\">SOLICITAÇÕES</v-flex>\n                  </v-card-title>\n                  <v-card-text>\n                    <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n                      <span>\n                        <v-progress-circular\n                          :size=\"50\"\n                          :width=\"3\"\n                          color=\"light-blue darken-4\"\n                          indeterminate\n                        >\n                          <v-icon color=\"light-blue darken-4\" small>fas fa-file-import</v-icon>\n                        </v-progress-circular>\n                        <br />\n                        <h5 class=\"light-blue--text text--darken-4\">Buscando ...</h5>\n                      </span>\n                    </v-flex>\n                  </v-card-text>\n                </v-card>\n              </v-dialog>\n            </v-layout>\n\n            <v-data-table\n              class=\"mt-5\"\n              :search=\"procurar\"\n              :headers=\"headers\"\n              v-if=\"busca == false\"\n              :items=\"solicitacoes_finalizadas\"\n              :item-key=\"solicitacoes_finalizadas.id\"\n              :pagination.sync=\"pagination\"\n            >\n              <template slot=\"items\" slot-scope=\"props\" class=\"mb-3\">\n                <tr class=\"pl-4 text-xs-left\" style=\"cursor:pointer;\">\n                  <td @click=\"AtivarEdicao(props.item.dados)\" class>{{ props.item.nome }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.primeiroInstrumento + \" \" + props.item.primeiraCategoria }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.segundoInstrumento + \" \" + props.item.segundaCategoria}}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{ props.item.comumCongregacao }}</td>\n                  <td\n                    @click=\"AtivarEdicao(props.item.dados)\"\n                    class\n                  >{{formatDate(props.item.dataCadastro)}}</td>\n                  <td>\n                    <span v-if=\"props.item.status == 'Aguardando'\">\n                      <autorizar-solicitacao\n                        :statusSolicitacao=\"props.item.status\"\n                        :irmao=\"props.item.nome\"\n                        :solicitacao=\"props.item.dados\"\n                        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n                      ></autorizar-solicitacao>\n                    </span>\n                    <span v-if=\"props.item.status == 'Aprovado'\">\n                      <atender-solicitacao\n                        :statusSolicitacao=\"props.item.status\"\n                        :irmao=\"props.item.id_irmao\"\n                        :solicitacao=\"props.item.dados\"\n                        :instrumento_um=\"props.item.primeiroInstrumento\"\n                        :instrumento_dois=\"props.item.segundoInstrumento\"\n                        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n                        @emprestimo_sucesso=\"BuscarSolicitacoesEmprestimo\"\n                      ></atender-solicitacao>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Não aprovado'\">\n                      <v-btn flat color=\"error\">\n                        <small>\n                          <v-icon small left>fas fa-times-circle</v-icon>\n                          {{props.item.status}}\n                        </small>\n                      </v-btn>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Anexar'\">\n                      <anexar-solicitacao\n                        :solicitacao=\"props.item.dados\"\n                        :statusSolicitacao=\"props.item.status\"\n                        @anexar_sucesso=\"BuscarSolicitacoesEmprestimo\"\n                      ></anexar-solicitacao>\n                    </span>\n                    <span class=\"center-block\" v-if=\"props.item.status == 'Finalizada'\">\n                      <v-btn flat color=\"brown\">\n                        <small>\n                          <v-icon small left>fas fa-file-alt</v-icon>\n                          {{props.item.status}}\n                        </small>\n                      </v-btn>\n                    </span>\n                  </td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card>\n        </v-tab-item>\n      </v-tabs-items>\n      <editar-solicitacao\n        :dialog_ativar=\"ativar_edicao\"\n        :solicitacao_dados=\"solicitacao_edicao\"\n        @SolicitacaoDeletada=\"BuscarSolicitacoesEmprestimo\"\n        @solicitacaoSalva=\"BuscarSolicitacoesEmprestimo\"\n      ></editar-solicitacao>\n    </v-flex>\n  </site-patrimonio>\n</template>\n\n<script>\nimport SolicitacaoEmprestimo from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Cadastros/CadastroSolicitacaoEmprestimoModal.vue\";\nimport SitePatrimonio from \"@/templates/SitePatrimonio.vue\";\nimport EditarSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/EditarSolicitacaoEmprestimoModal.vue\";\nimport AutorizarSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AutorizarSolicitacaoEmprestimoModal.vue\";\nimport AtenderSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AtenderSolicitacaoEmprestimoModal.vue\";\nimport AnexarSolicitacao from \"@/pages/Modulos/Patrimonio/SolicitacoesEmprestimo/Editar/AnexarSolicitacaoEmprestimoModal.vue\";\nimport Termos from \"@/pages/Modulos/Patrimonio/Instrumento/Emprestimo/Termos\";\n\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    SolicitacaoEmprestimo,\n    EditarSolicitacao,\n    AutorizarSolicitacao,\n    AtenderSolicitacao,\n    AnexarSolicitacao\n  },\n  data() {\n    return {\n      total_solicitacao_emprestimo: 0,\n      total_solicitacao_andamento: 0,\n      total_solicitacao_finalizadas: 0,\n      tab: null,\n      ativar_edicao: \"\",\n      solicitacao_edicao: Object,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      headers: [\n        {\n          text: \"NOME\",\n          align: \"left\",\n          value: \"nome\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"INSTRUMENTO 01\",\n          align: \"left\",\n          value: \"primeiroInstrumento\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"INSTRUMENTO 02\",\n          align: \"left\",\n          value: \"segundoInstrumento\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CASA DE ORAÇÃO\",\n          align: \"left\",\n          value: \"comumCongregacao\",\n          sortable: false,\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"DATA DE CADASTRO\",\n          align: \"left\",\n          value: \"dataCadastro\",\n          sortable: false,\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"SITUAÇÃO\",\n          align: \"justify\",\n          value: \"status\",\n          class: \"blue darken-3 white--text\"\n        }\n      ],\n      autorizacao: false,\n      solicitacoes_emprestimos: [],\n      solicitacoes_andamento: [],\n      solicitacoes_finalizadas: [],\n      show: false,\n      busca: true,\n      identificacaoIgreja: \"\",\n      igreja: [],\n      idUsuario: null,\n      dataCadastro: null\n    };\n  },\n  created() {\n    this.BuscarSolicitacoesEmprestimo();\n  },\n  methods: {\n    AtivarEdicao(irmao) {\n      this.ativar_edicao = Math.random();\n      this.solicitacao_edicao = irmao;\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    CadastrarIrmao() {\n      this.$router.push(\"/cadastro-patrimonio-novo-irmao\");\n    },\n    BuscarSolicitacoesEmprestimo() {\n      this.solicitacoes_emprestimos = [];\n      this.solicitacoes_andamento = [];\n      this.solicitacoes_finalizadas = [];\n      this.total_solicitacao_emprestimo = 0;\n      this.total_solicitacao_andamento = 0;\n      this.total_solicitacao_finalizadas = 0;\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        //this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"SolicitacaoEmprestimo/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              this.busca = false;\n              response.data.forEach(element => {\n                this.solicitacoes_emprestimos.push({\n                  id: element.id,\n                  nome: element.nome,\n                  id_irmao: element.irmao,\n                  primeiroInstrumento: element.primeiroInstrumento,\n                  segundoInstrumento: element.segundoInstrumento,\n                  primeiraCategoria: element.primeiraCategoria,\n                  segundaCategoria: element.segundaCategoria,\n                  comumCongregacao: element.comumCongregacao,\n                  dataCadastro: element.dataCadastro.substring(0, 10),\n                  status: element.status,\n                  dados: element\n                });\n                this.total_solicitacao_emprestimo++;\n                if (\n                  element.status != \"Não aprovado\" &&\n                  element.status != \"Finalizada\"\n                ) {\n                  this.solicitacoes_andamento.push({\n                    id: element.id,\n                    nome: element.nome,\n                    id_irmao: element.irmao,\n                    primeiroInstrumento: element.primeiroInstrumento,\n                    segundoInstrumento: element.segundoInstrumento,\n                    primeiraCategoria: element.primeiraCategoria,\n                    segundaCategoria: element.segundaCategoria,\n                    comumCongregacao: element.comumCongregacao,\n                    dataCadastro: element.dataCadastro.substring(0, 10),\n                    status: element.status,\n                    dados: element\n                  });\n                  this.total_solicitacao_andamento++;\n                }\n                if (\n                  element.status == \"Não aprovado\" ||\n                  element.status == \"Finalizada\"\n                ) {\n                  this.solicitacoes_finalizadas.push({\n                    id: element.id,\n                    nome: element.nome,\n                    id_irmao: element.irmao,\n                    primeiroInstrumento: element.primeiroInstrumento,\n                    segundoInstrumento: element.segundoInstrumento,\n                    primeiraCategoria: element.primeiraCategoria,\n                    segundaCategoria: element.segundaCategoria,\n                    comumCongregacao: element.comumCongregacao,\n                    dataCadastro: element.dataCadastro.substring(0, 10),\n                    status: element.status,\n                    dados: element\n                  });\n                  this.total_solicitacao_finalizadas++;\n                }\n              });\n              this.solicitacoes_emprestimos.reverse();\n              this.solicitacoes_andamento.reverse();\n              this.solicitacoes_finalizadas.reverse();\n\n              //console.log(this.igreja);\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            //console.error(e.status);\n            //console.data(e.data);\n          });\n      }\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n"]}]}