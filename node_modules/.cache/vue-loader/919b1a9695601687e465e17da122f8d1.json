{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Cadastro.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Cadastro.vue","mtime":1569691366103},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport AcessoBotao from \"@/pages/Modulos/Patrimonio/Instrumento/Inicio/AcessoBotao\";\nimport SitePatrimonio from \"@/templates/SitePatrimonio\";\nimport CadCaracteristica from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Cadastro/Cadastro_Caracteristica\";\nimport CadTombamento from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Cadastro/Cadastro_Tombamento\";\nimport CadDoacao from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Doacao/Cadastro/CadDoacao\";\nimport CadDoacaoSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Doacao/Cadastro/CadDoacao_sem\";\nimport CadCompra from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Compra/Cadastro/Cadastro_Compra\";\nimport CadCompraSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Compra/Cadastro/Cadastro_Compra_sem\";\nimport SelecaoNome from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Nome\";\nimport SelecaoNomeSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Nome_sem\";\nimport SelecaoAno from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Ano\";\nimport SelecaoAnoSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Ano_sem\";\nimport SelecaoMarca from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Marca\";\nimport SelecaoMarcaSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Marca_sem\";\nimport SelecaoComponentes from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Componentes\";\nimport SelecaoComponentesSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Componentes_sem\";\nimport SelecaoOrigem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Doacao/Origem/CadastroOrigem\";\nimport AtivarEdicao from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Acoes/Adicionar\";\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Cadastro\",\n  components: {\n    AcessoBotao,\n    SitePatrimonio,\n    CadCaracteristica,\n    CadTombamento,\n    CadDoacao,\n    CadDoacaoSem,\n    CadCompra,\n    CadCompraSem,\n    SelecaoNome,\n    SelecaoNomeSem,\n    SelecaoAno,\n    SelecaoAnoSem,\n    SelecaoMarca,\n    SelecaoMarcaSem,\n    SelecaoComponentes,\n    SelecaoComponentesSem,\n    SelecaoOrigem,\n    AtivarEdicao\n  },\n  data() {\n    return {\n      valid: false,\n      tombamentos: [],\n      tombamentos_id: [],\n      caracteristicas: [],\n      componentes_sel: [],\n      componentes: [],\n      nome: \"\",\n      ano: \"\",\n      tombamento: \"\",\n      administracao: \"\",\n      caracteristica: \"\",\n      marca: \"\",\n      descricao: \"\",\n      aquisicao: \"\",\n      autorizacao: false,\n      link: [],\n      compra: false,\n      cor_compra: \"\",\n      doacao: false,\n      cor_doacao: \"\",\n      menu: false,\n      modal: false,\n      menu2: false,\n      id_tombamento_selecao: \"\",\n      numero_tombamento_selecao: \"\",\n      launch_date_tombamento_selecao: \"\",\n      naipe: \"\",\n      idNomeInstrumento: \"\",\n      edicao: false,\n      busca: true,\n      items: [\n        {\n          text: \"ESTOQUE\",\n          disabled: false,\n          href: \"/inicio-patrimonio\",\n          color: \"purple\"\n        },\n        {\n          text: \"CADASTRO DE INSTRUMENTOS\",\n          disabled: true,\n          href: \"#\"\n        }\n      ]\n    };\n  },\n  created() {\n    this.AtualizarTudo();\n    const toast = swal.mixin({\n      toast: true,\n      position: \"top-end\",\n      showConfirmButton: false,\n      timer: 5000\n    });\n    toast({\n      type: \"success\",\n      title: \"Cadastro de instrumento.\"\n    });\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_compra, this.data_doacao);\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_compra, this.data_doacao);\n    }\n  },\n\n  methods: {\n    Home() {\n      this.$router.push(\"/inicio-patrimonio\");\n    },\n    mostrarTombamento() {\n      //console.log(this.tombamento);\n    },\n    SelecionarEdicao(payload) {\n      //console.log(this.edicao);\n      this.edicao = payload.ativar;\n    },\n    SelecionarNome(payload) {\n      this.caracteristicas = [];\n      //console.log(\"antes: \", this.idNomeInstrumento);\n      this.idNomeInstrumento = payload.idNomeInstrumento;\n      //console.log(\"depois: \", this.idNomeInstrumento);\n      this.BuscarNome(this.idNomeInstrumento);\n      this.edicao = false;\n    },\n    SelecionarAno(payload) {\n      //console.log(\"antes: \", this.ano);\n      this.ano = payload.ano;\n      //console.log(\"depois: \", this.ano);\n    },\n    SelecionarMarca(payload) {\n      //console.log(\"antes: \", this.marca);\n      this.marca = payload.marca;\n      //console.log(\"depois: \", this.marca);\n    },\n    SelecionarComponentes(payload) {\n      //console.log(\"antes: \", this.componentes_sel);\n      this.componentes_sel = payload.componentes;\n      //console.log(\"depois: \", this.componentes_sel);\n    },\n    Compra() {\n      this.compra = true;\n    },\n    Doacao() {\n      this.doacao = true;\n    },\n    PreenchimentoInstrumento(aquisicao) {\n      //console.log(\"preenchimento\");\n      //console.log(this.componentes_sel.toString());\n      //console.log(\"compra antes\", this.compra);\n      //console.log(\"doacao antes\", this.doacao);\n      if (\n        this.nome == \"\" ||\n        this.caracteristica == \"\" ||\n        this.ano == \"\" ||\n        this.tombamento == \"\" ||\n        this.marca == \"\" ||\n        this.componentes_sel.toString() == \"\"\n      ) {\n        swal.fire({\n          type: \"warning\",\n          title:\n            \"Atenção verifique os dados antes de prosseguir para \" + aquisicao,\n          text: \"Todas as informações estão selecionadas corretamente?\"\n        });\n      } else {\n        this.valid == true;\n        if (aquisicao == \"compra\") {\n          this.compra = true;\n          this.doacao = false;\n          //console.log(\"compra \", this.compra);\n          //console.log(\"doacao \", this.doacao);\n        } else if (aquisicao == \"doacao\") {\n          this.doacao = true;\n          this.compra = false;\n          //console.log(\"compra \", this.compra);\n          //console.log(\"doacao \", this.doacao);\n        }\n      }\n    },\n    CadastrarInstrumento(tipo_aquisicao) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        if (\n          this.nome == \"\" ||\n          this.caracteristica == \"\" ||\n          this.ano == \"\" ||\n          this.tombamento == \"\" ||\n          this.marca == \"\" ||\n          this.componentes_sel.toString() == \"\"\n        ) {\n          swal.fire({\n            type: \"warning\",\n            title: \"Oops, verifique...\",\n            text: \"Tem algum campo obrigatório que ainda pode estar em branco!\"\n          });\n        } else {\n          //console.log(this.componentes.toString());\n          //console.log(\"entrou no cadastro\");\n          swal.fire({\n            onBeforeOpen: () => {\n              swal.showLoading();\n            },\n            type: \"success\",\n            title: \"Estamos salvando o \" + this.nome + \"...\",\n            text: \"Só um momento\",\n            showConfirmButton: false,\n            timer: 10000\n          });\n          this.$http\n            .post(\n              this.$url + \"Instrumento/v1\",\n              {\n                id: 0,\n                nome: this.nome,\n                ano: this.ano,\n                status: \"1\",\n                aquisicao: tipo_aquisicao,\n                tombamento: this.tombamento,\n                componentes: this.componentes_sel.toString(),\n                caracteristica: this.caracteristica,\n                marca: this.marca,\n                descricao: this.descricao,\n                launchDate: new Date().toISOString().substr(0, 19)\n              },\n              {\n                headers: {\n                  authorization: \"Bearer \" + this.autorizacao.accessToken\n                }\n              }\n            )\n            .then(response => {\n              if (response.status == 200) {\n                //console.log(\"data value tombamento\", response.data.tombamento);\n                this.BuscarTombamento(response.data.tombamento);\n                this.ContinuarCadastro();\n              }\n              //console.log(response.data);\n            })\n            .catch(e => {\n              swal.fire(\n                \"Sua autorização expirou!\",\n                \"Entre com suas credencias novamente.\",\n                \"warning\"\n              );\n              this.$router.push(\"/\");\n              //console.error(e);\n              //console.data(e.data);\n            });\n          //console.log(this.data_doacao,this.origem_instrumento,this.observacao_instrumento );\n        }\n      }\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    BuscarTombamento(tombamento) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(\n          this.$url +\n            \"TombamentoInstrumento/v1/buscar-tombamento?tombamento=\" +\n            tombamento,\n          {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log( \"Buscando um numero de tombamento para modifica-lo\",  response.data  );\n            this.MudarStatusTombamento(\n              response.data.id,\n              response.data.numero,\n              response.data.launchDate\n            );\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    MudarStatusTombamento(id, numero, launch_date) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n\n        //console.log(\"entrou no update tombamento\");\n        //console.log(id, \"-\", numero, \"-\", launch_date);\n        this.$http\n          .put(\n            this.$url +\n              \"TombamentoInstrumento/v1/selecionar-tombamento?tombamento=\" +\n              numero,\n            {\n              id: id,\n              numero: numero,\n              status: \"2\",\n              launchDate: launch_date\n            },\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              //console.log(\"Salvo com sucesso!\");\n              //console.log(response.data);\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    AtualizarTombamentos() {\n      this.tombamentos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(this.$url + \"TombamentoInstrumento/v1\", {\n          headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n        })\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            response.data.forEach(element => {\n              //console.log(\"Pós cadastro\", element.nome);\n              if (element.status == 1) {\n                this.tombamentos.push(element.numero);\n                this.tombamentos_id.push(element.id);\n              }\n            });\n            //console.log(response.data);\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n\n    DeletarCaracteristica(caracteristica, instrumento) {\n      swal\n        .fire({\n          title: \"Deseja excluir a caracteristica \" + caracteristica + \"?\",\n          text: \"Após a confirmação esta ação não poderá ser revertida!\",\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Sim, deletar\"\n        })\n        .then(result => {\n          if (result.value) {\n            this.Deletar(caracteristica, instrumento);\n            swal.fire(\n              \"Deletado!\",\n              \"A caracteristica \" +\n                caracteristica +\n                \" foi deletado com sucesso.\",\n              \"success\"\n            );\n          }\n        });\n    },\n    Deletar(id) {\n      //endpoit que fará a deleção do item nome\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .delete(this.$url + \"CaracteristicaInstrumento/v1/\" + id, {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          })\n          .then(response => {\n            //console.log(response.status);\n            //console.log(\"deletando caracteristica\");\n            if (response.status == 204) {\n              //console.log(\"dados da caracteristica pos deletar\");\n              //console.log(response.data);\n              //console.log(this.nome);\n              this.AtualizarCaracteristicas(this.naipe);\n              //Criar um loop pois o dado \"data\" que é recebido é um array\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    BuscarNome(id) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(this.$url + \"NomeInstrumento/v1/\" + id, {\n          headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n        })\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            this.nomeInstrumento = response.data;\n            //console.log((this.naipe = this.nomeInstrumento.naipe));\n            //console.log((this.nome = this.nomeInstrumento.nome));\n            this.AtualizarCaracteristicas(this.naipe);\n          } else if (response.status == 401) {\n          }\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarCaracteristicas(nome) {\n      //console.log(\"nome para buscar caracteristica: \" + nome);\n      this.caracteristica = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(\n          this.$url +\n            \"CaracteristicaInstrumento/v1/buscar-caracteristica-por-naipe?naipe=\" +\n            nome,\n          {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            this.caracteristicas = response.data;\n            //console.log(response.data);\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarComponentes() {\n      this.componentes = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(this.$url + \"ComponenteInstrumento/v1\", {\n          headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n        })\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            this.componentes = response.data;\n            //console.log(response.data);\n            this.busca = false;\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarTudo() {\n      this.AtualizarTombamentos();\n      this.AtualizarComponentes();\n    },\n    ContinuarCadastro() {\n      const swalWithBootstrapButtons = swal.mixin({\n        confirmButtonClass: \"btn  btn-success\",\n        cancelButtonClass: \"btn btn-danger\",\n        buttonsStyling: true\n      });\n\n      return swalWithBootstrapButtons({\n        title:\n          \"Tombamento: \" +\n          this.tombamento +\n          \", \" +\n          this.nome +\n          \" cadastrado com sucesso!\",\n        text: \"Deseja continuar cadastrando?\",\n        type: \"success\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Sim\",\n        cancelButtonText: \"Não\",\n        reverseButtons: true\n      }).then(result => {\n        if (result.value) {\n          this.$router.push(\"/cadastro-patrimonio-instrumento\");\n          this.AtualizarTudo();\n        } else if (\n          // Read more about handling dismissals\n          result.dismiss === swal.DismissReason.cancel\n        ) {\n          this.$router.push(\"/inicio-patrimonio\");\n        }\n      });\n    }\n  }\n};\n",{"version":3,"sources":["Cadastro.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cadastro.vue","sourceRoot":"src/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento","sourcesContent":["<template>\n  <site-patrimonio>\n    <div class=\"mt-4\">\n      <div class=\"container-fluid container\">\n        <div class=\"block-header align-center\">\n          <h2 class=\"font-weight-bold headline teal--text text--darken-3\">Cadastro de instrumento</h2>\n        </div>\n\n        <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n          <span v-if=\"busca == true\">\n            <v-progress-circular\n              :size=\"50\"\n              color=\"teal darken-3\"\n              indeterminate\n              :width=\"3\"\n              class=\"align-center mt-4 mb-4\"\n            >\n              <v-icon color=\"teal darken-1\">fas fa-file-alt</v-icon>\n            </v-progress-circular>\n            <br />\n            <h4\n              class=\"teal--text text--darken-1\"\n            >Construindo formulario de cadastro de instrumento...</h4>\n          </span>\n        </v-flex>\n        <!-- Advanced Select -->\n        <div class=\"row clearfix\" v-if=\"busca == false\">\n          <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n            <div class=\"card\">\n              <div class=\"body\">\n                <v-container fluid grid-list-xl>\n                  <v-container fluid grid-list-xl>\n                    <v-flex xs12 sm12 md12 d-flex>\n                      <v-flex xs12 sm12 md6 lg6 class=\"pr-5\">\n                        <ativar-edicao @ativar_edicao=\"SelecionarEdicao\"></ativar-edicao>\n                      </v-flex>\n                      <v-flex xs12 sm12 md4 lg4 offset-md2 class=\"align-right pl-5\">\n                        <v-btn outline color=\"teal darken-4\" @click=\"Home\">\n                          <small>Voltar para o estoque</small>\n                          <v-icon right>fas fa-arrow-left</v-icon>\n                        </v-btn>\n                      </v-flex>\n                    </v-flex>\n                  </v-container>\n                  <v-layout align-center wrap>\n                    <selecao-nome v-if=\"edicao == true\" @instrumento=\"SelecionarNome\"></selecao-nome>\n                    <selecao-nome-sem v-if=\"edicao == false\" @instrumento=\"SelecionarNome\"></selecao-nome-sem>\n                    <selecao-ano v-if=\"edicao == true\" @ano_instrumento=\"SelecionarAno\"></selecao-ano>\n                    <selecao-ano-sem v-if=\"edicao == false\" @ano_instrumento=\"SelecionarAno\"></selecao-ano-sem>\n                    <v-flex xs12 sm6 md4 d-flex>\n                      <v-select\n                        :items=\"tombamentos\"\n                        label=\"Tombamento\"\n                        box\n                        color=\"teal darken-3\"\n                        append-icon=\"fas fa-barcode\"\n                        v-model=\"tombamento\"\n                        :rules=\"[() => !!tombamento || 'Este campo precisa ser selecionado!']\"\n                      ></v-select>\n\n                      <cad-tombamento\n                        v-show=\"edicao == true\"\n                        v-on:tombamentos=\"AtualizarTombamentos()\"\n                      ></cad-tombamento>\n                    </v-flex>\n                  </v-layout>\n                </v-container>\n                <v-container fluid grid-list-xl>\n                  <v-layout align-center wrap>\n                    <v-flex xs12 sm6 md4 d-flex v-if=\"edicao == false\">\n                      <v-select\n                        :items=\"caracteristicas\"\n                        item-value=\"caracteristica\"\n                        label=\"Caracteristica/Tonalidade\"\n                        append-icon=\"fas fa-music\"\n                        box\n                        color=\"teal darken-3\"\n                        v-model=\"caracteristica\"\n                        :rules=\"[() => !!caracteristica || 'Este campo precisa ser selecionado!']\"\n                      >\n                        <template slot=\"selection\" slot-scope=\"data\">{{ data.item.caracteristica }}</template>\n                        <template slot=\"item\" slot-scope=\"data\">\n                          <v-flex xs10 sm10>\n                            <v-list-tile>\n                              <v-list-tile-content>\n                                <v-list-tile-title>{{data.item.caracteristica}}</v-list-tile-title>\n                              </v-list-tile-content>\n                            </v-list-tile>\n                          </v-flex>\n                        </template>\n                      </v-select>\n                    </v-flex>\n                    <v-flex xs12 sm6 md4 d-flex v-if=\"edicao == true\">\n                      <v-select\n                        :items=\"caracteristicas\"\n                        item-value=\"caracteristica\"\n                        label=\"Caracteristica/Tonalidade\"\n                        append-icon=\"fas fa-music\"\n                        box\n                        color=\"teal darken-3\"\n                        v-model=\"caracteristica\"\n                        :rules=\"[() => !!caracteristica || 'Este campo precisa ser selecionado!']\"\n                      >\n                        <template slot=\"selection\" slot-scope=\"data\">{{ data.item.caracteristica }}</template>\n                        <template slot=\"item\" slot-scope=\"data\">\n                          <v-flex xs10 sm10>\n                            <v-list-tile>\n                              <v-list-tile-content>\n                                <v-list-tile-title>{{data.item.caracteristica}}</v-list-tile-title>\n                              </v-list-tile-content>\n                            </v-list-tile>\n                          </v-flex>\n                          <v-flex xs2 sm2>\n                            <v-btn\n                              flat\n                              icon\n                              color=\"red\"\n                              @click=\"DeletarCaracteristica(data.item.id)\"\n                            >\n                              <v-icon>fas fa-trash-alt</v-icon>\n                            </v-btn>\n                          </v-flex>\n                        </template>\n                      </v-select>\n                      <cad-caracteristica v-on:caracteristicas=\"AtualizarCaracteristicas(naipe)\"></cad-caracteristica>\n                    </v-flex>\n                    <selecao-marca v-if=\" edicao == true\" @marca_instrumento=\"SelecionarMarca\"></selecao-marca>\n                    <selecao-marca-sem v-if=\" edicao == false\" @marca_instrumento=\"SelecionarMarca\"></selecao-marca-sem>\n\n                    <selecao-componentes\n                      v-if=\"edicao == true\"\n                      @componentes_instrumento=\"SelecionarComponentes\"\n                    ></selecao-componentes>\n                    <selecao-componentes-sem\n                      v-if=\"edicao == false\"\n                      @componentes_instrumento=\"SelecionarComponentes\"\n                    ></selecao-componentes-sem>\n                  </v-layout>\n                </v-container>\n                <v-container fluid grid-list-xl>\n                  <v-layout align-center wrap>\n                    <v-flex xs12 sm12 md12 d-flex>\n                      <v-text-field\n                        append-icon=\"fas fa-eye\"\n                        v-model=\"descricao\"\n                        box\n                        color=\"teal darken-3\"\n                        :counter=\"1000\"\n                        label=\"Observações\"\n                      ></v-text-field>\n                    </v-flex>\n                  </v-layout>\n                </v-container>\n              </div>\n\n              <v-container fluid grid-list-xl>\n                <v-layout align-center wrap>\n                  <v-flex xs12 sm12 md6 d-flex>\n                    <div class=\"text-xs-center\">\n                      <v-btn\n                        round\n                        :color=\"cor_doacao\"\n                        outline\n                        @click=\"PreenchimentoInstrumento('compra'), cor_doacao='teal darken-3', cor_compra='grey lighten-1'\"\n                      >\n                        <v-icon>{{ compra ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}</v-icon>\n                        <small>Registrar Compra</small>\n                        <v-icon right dark small>fas fa-shopping-cart</v-icon>\n                      </v-btn>\n                    </div>\n                  </v-flex>\n                  <v-flex xs12 sm12 md6 d-flex>\n                    <div class=\"text-xs-center\">\n                      <v-btn\n                        round\n                        outline\n                        :color=\"cor_compra\"\n                        @click=\"PreenchimentoInstrumento('doacao'), cor_compra='teal darken-3', cor_doacao='grey lighten-1'\"\n                      >\n                        <v-icon>{{ doacao ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}</v-icon>\n                        <small>Registrar Doação</small>\n                        <v-icon right dark small>fas fa-donate</v-icon>\n                      </v-btn>\n                    </div>\n                  </v-flex>\n                </v-layout>\n                <div v-if=\"compra == true\">\n                  <v-flex xs12 sm12 md6 lg6 class=\"ml-3\">\n                    <ativar-edicao @ativar_edicao=\"SelecionarEdicao\"></ativar-edicao>\n                  </v-flex>\n                  <cad-compra\n                    v-if=\"edicao == true\"\n                    v-bind:numero_do_instrumento=\"tombamento\"\n                    v-on:cadastrarInstrumentos=\"CadastrarInstrumento('2')\"\n                  ></cad-compra>\n                  <cad-compra-sem\n                    v-if=\"edicao == false\"\n                    v-bind:numero_do_instrumento=\"tombamento\"\n                    v-on:cadastrarInstrumentos=\"CadastrarInstrumento('2')\"\n                  ></cad-compra-sem>\n                </div>\n                <div v-if=\"doacao == true\">\n                  <v-flex xs12 sm12 md6 lg6 class=\"ml-3\">\n                    <ativar-edicao @ativar_edicao=\"SelecionarEdicao\"></ativar-edicao>\n                  </v-flex>\n                  <cad-doacao\n                    v-bind:numero_do_instrumento=\"tombamento\"\n                    v-on:cadastrarInstrumentos=\"CadastrarInstrumento('1')\"\n                  ></cad-doacao>\n                </div>\n              </v-container>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- #END# Advanced Select -->\n    </div>\n  </site-patrimonio>\n</template>\n\n<script type=\"text/babel\">\nimport AcessoBotao from \"@/pages/Modulos/Patrimonio/Instrumento/Inicio/AcessoBotao\";\nimport SitePatrimonio from \"@/templates/SitePatrimonio\";\nimport CadCaracteristica from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Cadastro/Cadastro_Caracteristica\";\nimport CadTombamento from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Cadastro/Cadastro_Tombamento\";\nimport CadDoacao from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Doacao/Cadastro/CadDoacao\";\nimport CadDoacaoSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Doacao/Cadastro/CadDoacao_sem\";\nimport CadCompra from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Compra/Cadastro/Cadastro_Compra\";\nimport CadCompraSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Compra/Cadastro/Cadastro_Compra_sem\";\nimport SelecaoNome from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Nome\";\nimport SelecaoNomeSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Nome_sem\";\nimport SelecaoAno from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Ano\";\nimport SelecaoAnoSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Ano_sem\";\nimport SelecaoMarca from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Marca\";\nimport SelecaoMarcaSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Marca_sem\";\nimport SelecaoComponentes from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Componentes\";\nimport SelecaoComponentesSem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Selecao/Selecao_Componentes_sem\";\nimport SelecaoOrigem from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Doacao/Origem/CadastroOrigem\";\nimport AtivarEdicao from \"@/pages/Modulos/Patrimonio/CadastroInstrumento/Instrumento/Acoes/Adicionar\";\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Cadastro\",\n  components: {\n    AcessoBotao,\n    SitePatrimonio,\n    CadCaracteristica,\n    CadTombamento,\n    CadDoacao,\n    CadDoacaoSem,\n    CadCompra,\n    CadCompraSem,\n    SelecaoNome,\n    SelecaoNomeSem,\n    SelecaoAno,\n    SelecaoAnoSem,\n    SelecaoMarca,\n    SelecaoMarcaSem,\n    SelecaoComponentes,\n    SelecaoComponentesSem,\n    SelecaoOrigem,\n    AtivarEdicao\n  },\n  data() {\n    return {\n      valid: false,\n      tombamentos: [],\n      tombamentos_id: [],\n      caracteristicas: [],\n      componentes_sel: [],\n      componentes: [],\n      nome: \"\",\n      ano: \"\",\n      tombamento: \"\",\n      administracao: \"\",\n      caracteristica: \"\",\n      marca: \"\",\n      descricao: \"\",\n      aquisicao: \"\",\n      autorizacao: false,\n      link: [],\n      compra: false,\n      cor_compra: \"\",\n      doacao: false,\n      cor_doacao: \"\",\n      menu: false,\n      modal: false,\n      menu2: false,\n      id_tombamento_selecao: \"\",\n      numero_tombamento_selecao: \"\",\n      launch_date_tombamento_selecao: \"\",\n      naipe: \"\",\n      idNomeInstrumento: \"\",\n      edicao: false,\n      busca: true,\n      items: [\n        {\n          text: \"ESTOQUE\",\n          disabled: false,\n          href: \"/inicio-patrimonio\",\n          color: \"purple\"\n        },\n        {\n          text: \"CADASTRO DE INSTRUMENTOS\",\n          disabled: true,\n          href: \"#\"\n        }\n      ]\n    };\n  },\n  created() {\n    this.AtualizarTudo();\n    const toast = swal.mixin({\n      toast: true,\n      position: \"top-end\",\n      showConfirmButton: false,\n      timer: 5000\n    });\n    toast({\n      type: \"success\",\n      title: \"Cadastro de instrumento.\"\n    });\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_compra, this.data_doacao);\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_compra, this.data_doacao);\n    }\n  },\n\n  methods: {\n    Home() {\n      this.$router.push(\"/inicio-patrimonio\");\n    },\n    mostrarTombamento() {\n      //console.log(this.tombamento);\n    },\n    SelecionarEdicao(payload) {\n      //console.log(this.edicao);\n      this.edicao = payload.ativar;\n    },\n    SelecionarNome(payload) {\n      this.caracteristicas = [];\n      //console.log(\"antes: \", this.idNomeInstrumento);\n      this.idNomeInstrumento = payload.idNomeInstrumento;\n      //console.log(\"depois: \", this.idNomeInstrumento);\n      this.BuscarNome(this.idNomeInstrumento);\n      this.edicao = false;\n    },\n    SelecionarAno(payload) {\n      //console.log(\"antes: \", this.ano);\n      this.ano = payload.ano;\n      //console.log(\"depois: \", this.ano);\n    },\n    SelecionarMarca(payload) {\n      //console.log(\"antes: \", this.marca);\n      this.marca = payload.marca;\n      //console.log(\"depois: \", this.marca);\n    },\n    SelecionarComponentes(payload) {\n      //console.log(\"antes: \", this.componentes_sel);\n      this.componentes_sel = payload.componentes;\n      //console.log(\"depois: \", this.componentes_sel);\n    },\n    Compra() {\n      this.compra = true;\n    },\n    Doacao() {\n      this.doacao = true;\n    },\n    PreenchimentoInstrumento(aquisicao) {\n      //console.log(\"preenchimento\");\n      //console.log(this.componentes_sel.toString());\n      //console.log(\"compra antes\", this.compra);\n      //console.log(\"doacao antes\", this.doacao);\n      if (\n        this.nome == \"\" ||\n        this.caracteristica == \"\" ||\n        this.ano == \"\" ||\n        this.tombamento == \"\" ||\n        this.marca == \"\" ||\n        this.componentes_sel.toString() == \"\"\n      ) {\n        swal.fire({\n          type: \"warning\",\n          title:\n            \"Atenção verifique os dados antes de prosseguir para \" + aquisicao,\n          text: \"Todas as informações estão selecionadas corretamente?\"\n        });\n      } else {\n        this.valid == true;\n        if (aquisicao == \"compra\") {\n          this.compra = true;\n          this.doacao = false;\n          //console.log(\"compra \", this.compra);\n          //console.log(\"doacao \", this.doacao);\n        } else if (aquisicao == \"doacao\") {\n          this.doacao = true;\n          this.compra = false;\n          //console.log(\"compra \", this.compra);\n          //console.log(\"doacao \", this.doacao);\n        }\n      }\n    },\n    CadastrarInstrumento(tipo_aquisicao) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        if (\n          this.nome == \"\" ||\n          this.caracteristica == \"\" ||\n          this.ano == \"\" ||\n          this.tombamento == \"\" ||\n          this.marca == \"\" ||\n          this.componentes_sel.toString() == \"\"\n        ) {\n          swal.fire({\n            type: \"warning\",\n            title: \"Oops, verifique...\",\n            text: \"Tem algum campo obrigatório que ainda pode estar em branco!\"\n          });\n        } else {\n          //console.log(this.componentes.toString());\n          //console.log(\"entrou no cadastro\");\n          swal.fire({\n            onBeforeOpen: () => {\n              swal.showLoading();\n            },\n            type: \"success\",\n            title: \"Estamos salvando o \" + this.nome + \"...\",\n            text: \"Só um momento\",\n            showConfirmButton: false,\n            timer: 10000\n          });\n          this.$http\n            .post(\n              this.$url + \"Instrumento/v1\",\n              {\n                id: 0,\n                nome: this.nome,\n                ano: this.ano,\n                status: \"1\",\n                aquisicao: tipo_aquisicao,\n                tombamento: this.tombamento,\n                componentes: this.componentes_sel.toString(),\n                caracteristica: this.caracteristica,\n                marca: this.marca,\n                descricao: this.descricao,\n                launchDate: new Date().toISOString().substr(0, 19)\n              },\n              {\n                headers: {\n                  authorization: \"Bearer \" + this.autorizacao.accessToken\n                }\n              }\n            )\n            .then(response => {\n              if (response.status == 200) {\n                //console.log(\"data value tombamento\", response.data.tombamento);\n                this.BuscarTombamento(response.data.tombamento);\n                this.ContinuarCadastro();\n              }\n              //console.log(response.data);\n            })\n            .catch(e => {\n              swal.fire(\n                \"Sua autorização expirou!\",\n                \"Entre com suas credencias novamente.\",\n                \"warning\"\n              );\n              this.$router.push(\"/\");\n              //console.error(e);\n              //console.data(e.data);\n            });\n          //console.log(this.data_doacao,this.origem_instrumento,this.observacao_instrumento );\n        }\n      }\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    BuscarTombamento(tombamento) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(\n          this.$url +\n            \"TombamentoInstrumento/v1/buscar-tombamento?tombamento=\" +\n            tombamento,\n          {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log( \"Buscando um numero de tombamento para modifica-lo\",  response.data  );\n            this.MudarStatusTombamento(\n              response.data.id,\n              response.data.numero,\n              response.data.launchDate\n            );\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    MudarStatusTombamento(id, numero, launch_date) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n\n        //console.log(\"entrou no update tombamento\");\n        //console.log(id, \"-\", numero, \"-\", launch_date);\n        this.$http\n          .put(\n            this.$url +\n              \"TombamentoInstrumento/v1/selecionar-tombamento?tombamento=\" +\n              numero,\n            {\n              id: id,\n              numero: numero,\n              status: \"2\",\n              launchDate: launch_date\n            },\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              //console.log(\"Salvo com sucesso!\");\n              //console.log(response.data);\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    AtualizarTombamentos() {\n      this.tombamentos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(this.$url + \"TombamentoInstrumento/v1\", {\n          headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n        })\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            response.data.forEach(element => {\n              //console.log(\"Pós cadastro\", element.nome);\n              if (element.status == 1) {\n                this.tombamentos.push(element.numero);\n                this.tombamentos_id.push(element.id);\n              }\n            });\n            //console.log(response.data);\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n\n    DeletarCaracteristica(caracteristica, instrumento) {\n      swal\n        .fire({\n          title: \"Deseja excluir a caracteristica \" + caracteristica + \"?\",\n          text: \"Após a confirmação esta ação não poderá ser revertida!\",\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#3085d6\",\n          cancelButtonColor: \"#d33\",\n          confirmButtonText: \"Sim, deletar\"\n        })\n        .then(result => {\n          if (result.value) {\n            this.Deletar(caracteristica, instrumento);\n            swal.fire(\n              \"Deletado!\",\n              \"A caracteristica \" +\n                caracteristica +\n                \" foi deletado com sucesso.\",\n              \"success\"\n            );\n          }\n        });\n    },\n    Deletar(id) {\n      //endpoit que fará a deleção do item nome\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .delete(this.$url + \"CaracteristicaInstrumento/v1/\" + id, {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          })\n          .then(response => {\n            //console.log(response.status);\n            //console.log(\"deletando caracteristica\");\n            if (response.status == 204) {\n              //console.log(\"dados da caracteristica pos deletar\");\n              //console.log(response.data);\n              //console.log(this.nome);\n              this.AtualizarCaracteristicas(this.naipe);\n              //Criar um loop pois o dado \"data\" que é recebido é um array\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    BuscarNome(id) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(this.$url + \"NomeInstrumento/v1/\" + id, {\n          headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n        })\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            this.nomeInstrumento = response.data;\n            //console.log((this.naipe = this.nomeInstrumento.naipe));\n            //console.log((this.nome = this.nomeInstrumento.nome));\n            this.AtualizarCaracteristicas(this.naipe);\n          } else if (response.status == 401) {\n          }\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarCaracteristicas(nome) {\n      //console.log(\"nome para buscar caracteristica: \" + nome);\n      this.caracteristica = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(\n          this.$url +\n            \"CaracteristicaInstrumento/v1/buscar-caracteristica-por-naipe?naipe=\" +\n            nome,\n          {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            this.caracteristicas = response.data;\n            //console.log(response.data);\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarComponentes() {\n      this.componentes = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .get(this.$url + \"ComponenteInstrumento/v1\", {\n          headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n        })\n        .then(response => {\n          //console.log(response.status);\n          if (response.status == 200) {\n            //console.log(\"request ok! \", new Date().toISOString().substr(0, 16));\n            this.componentes = response.data;\n            //console.log(response.data);\n            this.busca = false;\n          } else if (response.status == 401) {\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          this.$router.push(\"/\");\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarTudo() {\n      this.AtualizarTombamentos();\n      this.AtualizarComponentes();\n    },\n    ContinuarCadastro() {\n      const swalWithBootstrapButtons = swal.mixin({\n        confirmButtonClass: \"btn  btn-success\",\n        cancelButtonClass: \"btn btn-danger\",\n        buttonsStyling: true\n      });\n\n      return swalWithBootstrapButtons({\n        title:\n          \"Tombamento: \" +\n          this.tombamento +\n          \", \" +\n          this.nome +\n          \" cadastrado com sucesso!\",\n        text: \"Deseja continuar cadastrando?\",\n        type: \"success\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Sim\",\n        cancelButtonText: \"Não\",\n        reverseButtons: true\n      }).then(result => {\n        if (result.value) {\n          this.$router.push(\"/cadastro-patrimonio-instrumento\");\n          this.AtualizarTudo();\n        } else if (\n          // Read more about handling dismissals\n          result.dismiss === swal.DismissReason.cancel\n        ) {\n          this.$router.push(\"/inicio-patrimonio\");\n        }\n      });\n    }\n  }\n};\n</script>\n\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n"]}]}