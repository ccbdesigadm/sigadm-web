{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/Irmaos/Cadastros/IrmaoModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/Irmaos/Cadastros/IrmaoModal.vue","mtime":1577190729848},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport swal from \"sweetalert2\";\n\nexport default {\n  data() {\n    return {\n      disabled:true,\n      cpf: null,\n      dialog_nascimento_modal: false,\n      data_nascimento: null,\n      nome: null,\n      rua: null,\n      complemento: null,\n      ddd: null,\n      telefone: null,\n      congregacao: null,\n      dialog: false,\n      modal: false,\n      cod_igreja: null,\n      cep: null,\n      cidade: null,\n      bairro: null,\n      endereco: null,\n      numero: \"\",\n      nomeRelatorio: null,\n      regional: null,\n      local: null,\n      dados: null,\n      errorCEP: \"Digite o cep\",\n      bairroDisable: true,\n      cepDisable: true,\n      cepValido: true,\n      enderecoDisable: true,\n      mask_cod_igreja: \"BR-##-####\",\n      regionais: [],\n      encLocais: [],\n      loadingCep: false,\n      igrejas: [],\n      cargos: [\n        \"Aluno\",\n        \"Músico\",\n        \"Instrutor\",\n        \"Encarregado Local\",\n        \"Encarregado Regional\"\n      ],\n      cargo: null,\n      vincular: false,\n      idCongregacao: null\n    };\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_nascimento);\n    }\n  },\n  watch: {\n    cpf: function() {\n      if (this.cpf.length == 11) {\n        let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(this.$url + \"Usuario/v1/\" + this.cpf, {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              let irmao = response.data;              \n              if (irmao.id != null) {\n                this.irmao_cadastrado = false;                \n                this.AlertaMixin(\n                  \"warning\",\n                  \"Irmão já se encontra cadastrado no sistema\",\n                  4000\n                );\n                this.disabled = true;\n              } else{\n                this.disabled = false;\n              }\n            }\n          })\n          .catch(e => {\n            /*console.error(e); //console.data(e.data);*/\n          });\n      }\n    },\n    congregacao: function() {\n      //console.log(this.congregacao);\n    },\n    cep: function() {\n      if (this.cep.length === 8) {\n        this.loadingCep = true;\n        //console.log(\"Buscando endereço\", this.loadingCep);\n        this.$http\n          .get(\"https://viacep.com.br/ws/\" + this.cep + \"/json/\")\n          .then(response => {\n            if (response.status == 200) {\n              this.dados = response.data;\n              //console.log(this.dados);\n\n              this.cidade = this.dados.localidade;\n              this.bairro = this.dados.bairro;\n              this.rua = this.dados.logradouro;\n              this.loadingCep = false;\n              if (this.bairro == \"\") {\n                this.bairroDisable = false;\n                this.enderecoDisable = false;\n              }\n              if (this.endereco == \"\") {\n                this.enderecoDisable = false;\n              }\n              if (this.dados.uf == \"RN\") {\n                this.cod_igreja = \"BR-17\";\n              }\n              if (this.dados.erro == true) {\n                this.enderecoDisable = false;\n                const toast = swal.mixin({\n                  toast: true,\n                  position: \"top-end\",\n                  showConfirmButton: false,\n                  timer: 3000\n                });\n\n                toast({\n                  type: \"error\",\n                  title: \"cep não encontrado!\"\n                });\n              }\n            }\n          });\n      }\n      if (this.cep.length < 8) {\n        this.errorCEP = \"CEP Inválido\";\n      } else {\n        this.errorCEP = \"CEP válido\";\n        this.cepDisable = false;\n      }\n    },\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_nascimento);\n    }\n  },\n  methods: {\n    AlertaMixin(type, title, time) {\n      const Toast = swal.mixin({\n        toast: true,\n        position: \"top\",\n        showConfirmButton: false,\n        timer: time\n      });\n\n      Toast.fire({\n        type: type,\n        title: title\n      });\n    },\n    LimparCampos() {\n      this.cpf = null;\n      this.data_nascimento = null;\n      this.nome = null;\n      this.cep = null;\n      this.rua = null;\n      this.cidade = null;\n      this.bairro = null;\n      this.numero = null;\n      this.complemento = null;\n      this.ddd = null;\n      this.telefone = null;\n      this.cargo = null;\n      this.congregacao = null;\n    },\n    EscolherRegional(regional) {\n      this.regional = regional;\n    },\n    EscolherEncLocal(local) {\n      this.local = local;\n    },\n    EscolherIgreja(idCongregacao) {\n      this.idCongregacao = idCongregacao;\n    },\n    BuscarIgrejas() {\n      this.igrejas = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Igreja/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              response.data.forEach(element => {\n                this.igrejas.push({\n                  id: element.id,\n                  comum:\n                    element.cidade +\n                    \" - \" +\n                    element.bairro +\n                    \" - \" +\n                    element.codigo\n                });\n              });\n              this.busca = false;\n            } else if (response.status == 401) {\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    SalvarIrmao() {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      if (this.cpf == null) {\n        this.cpf = \"00000000000\";\n      }\n      this.$http\n        .post(\n          this.$url + \"Usuario/v1\",\n          {\n            cpf: this.cpf,\n            nascimento: this.data_nascimento,\n            nome: this.nome,\n            cep: this.cep,\n            cidade: this.cidade,\n            bairro: this.bairro,\n            rua: this.rua,\n            numero: this.numero,\n            complemento: this.complemento,\n            ddd: this.ddd,\n            telefone: this.telefone,\n            cargo: this.cargo,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Irmão salvo com sucesso\");\n            let irmao = response.data;\n            swal.fire(\n              this.cargo + \" salvo com sucesso!\",\n              \"Irmão \" + irmao.nome + \" salvo com sucesso!\",\n              \"success\"\n            );\n            this.VincularIgreja(this.idCongregacao, irmao.id);\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    VincularIgreja(idIgreja, idIrmao) {\n      //console.log(idIgreja)\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .post(\n          this.$url + \"UsuarioIgreja/v1\",\n          {\n            idIgreja: idIgreja,\n            idUsuario: idIrmao,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Irmão vinculado a igreja com sucesso\");\n            this.dialog = false;\n            this.$emit(\"irmao\");\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    Loading(title, icon) {\n      swal.fire({\n        title: title,\n        html:\n          \"Por favor só um momento... \" + '<i class=\"fas fa-' + icon + \"></i>\",\n        timer: 3000,\n        onOpen: () => {\n          swal.enableLoading();\n        }\n      });\n    },\n    Salvo(title, msg, type) {\n      swal.fire(title, msg, type);\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    }\n  }\n};\n",{"version":3,"sources":["IrmaoModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"IrmaoModal.vue","sourceRoot":"src/pages/Modulos/Patrimonio/Irmaos/Cadastros","sourcesContent":["<template>\n  <v-layout>\n    <v-dialog v-model=\"dialog\" persistent max-width=\"800px\">\n      <v-btn\n        flat\n        outline\n        color=\"blue darken-4\"\n        @click=\"BuscarIgrejas(), LimparCampos()\"\n        slot=\"activator\"\n      >\n        <v-icon>fas fa-user-plus</v-icon>\n        <span class=\"pl-2\">\n          <b>Cadastrar irmão</b>\n        </span>\n      </v-btn>\n      <v-card>\n        <v-flex xs12 sm12>\n          <div class=\"pt-1\">\n            <v-btn\n              right\n              class=\"white--text\"\n              small\n              fab\n              round\n              box\n              color=\"red darken-1\"\n              absolute\n              v-on:click=\"dialog = false\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n          </div>\n        </v-flex>\n        <v-card-title>\n          <v-flex xs12 sm12 md12 lg12 align-center>\n            <span class=\"font-weight-bold headline blue--text text--darken-4\">Cadastrar irmão</span>\n          </v-flex>\n        </v-card-title>\n        <v-card-text>\n          <v-container grid-list-md>\n            <v-layout wrap>\n              <v-flex xs12 sm12 md6>\n                <v-text-field\n                  v-model=\"cpf\"\n                  box\n                  append-icon=\"fas fa-book\"\n                  color=\"blue darken-4\"\n                  label=\"CPF do irmão\"\n                  mask=\"###.###.###-##\"\n                  required\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md6 lg6>\n                <v-dialog\n                  ref=\"dialog_nascimento_modal\"\n                  v-model=\"modal\"\n                  :return-value.sync=\"data_nascimento\"\n                  persistent\n                  lazy\n                  full-width\n                  width=\"290px\"\n                >\n                  <v-text-field\n                    slot=\"activator\"\n                    v-model=\"computedDateFormatted\"\n                    label=\"Data de nascimento\"\n                    append-icon=\"event\"\n                    readonly\n                    color=\"teal darken-3\"\n                    hint\n                    persistent-hint\n                    box\n                  ></v-text-field>\n                  <v-date-picker\n                    v-model=\"data_nascimento\"\n                    scrollable\n                    locale=\"pt-BR\"\n                    color=\"blue darken-4\"\n                  >\n                    <v-spacer></v-spacer>\n                    <v-btn flat color=\"primary\" @click=\"modal = false\">Cancelar</v-btn>\n                    <v-btn\n                      flat\n                      color=\"primary\"\n                      @click=\"$refs.dialog_nascimento_modal.save(data_nascimento)\"\n                    >OK</v-btn>\n                  </v-date-picker>\n                </v-dialog>\n              </v-flex>\n              <v-flex xs12 sm12 md12>\n                <v-text-field\n                  v-model=\"nome\"\n                  box\n                  append-icon=\"fas fa-book\"\n                  color=\"blue darken-4\"\n                  label=\"Nome do irmão *\"\n                  required\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md3>\n                <v-text-field\n                  v-model=\"cep\"\n                  box\n                  color=\"blue darken-4\"\n                  append-icon=\"fas fa-envelope-open\"\n                  label=\"Cep *\"\n                  required\n                  mask=\"##.###-###\"\n                  :hint=\"errorCEP\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md4>\n                <v-text-field\n                  v-model=\"cidade\"\n                  box\n                  color=\"blue darken-4\"\n                  append-icon=\"fas fa-map-marker-alt\"\n                  label=\"Cidade *\"\n                  required\n                  :readonly=\"enderecoDisable\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md5>\n                <v-text-field\n                  v-model=\"bairro\"\n                  box\n                  color=\"blue darken-4\"\n                  append-icon=\"fas fa-map-marker\"\n                  label=\"Bairro - Localidade * \"\n                  required\n                  :readonly=\"enderecoDisable\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md9>\n                <v-text-field\n                  v-model=\"rua\"\n                  box\n                  color=\"blue darken-4\"\n                  append-icon=\"fas fa-map-marked-alt\"\n                  label=\"Rua *\"\n                  required\n                  :readonly=\"enderecoDisable\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md3>\n                <v-text-field\n                  v-model=\"numero\"\n                  box\n                  color=\"blue darken-4\"\n                  append-icon=\"fas fa-home\"\n                  label=\"Número \"\n                  required\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md6 lg6>\n                <v-text-field\n                  color=\"blue darken-4\"\n                  box\n                  append-icon=\"fas fa-puzzle-piece\"\n                  label=\"Complemento\"\n                  v-model=\"complemento\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md2 lg2>\n                <v-text-field\n                  color=\"blue darken-4\"\n                  box\n                  append-icon=\" fas fa-broadcast-tower\"\n                  label=\"DDD\"\n                  mask=\"(##)\"\n                  v-model=\"ddd\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md4 lg4 class=\"pl-1\">\n                <v-text-field\n                  color=\"blue darken-4\"\n                  box\n                  append-icon=\"fas fa-phone\"\n                  label=\"Telefone\"\n                  mask=\"# ####-####\"\n                  v-model=\"telefone\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex xs12 sm12 md12 lg12 d-flex>\n                <v-flex xs12 sm12 md5 lg5>\n                  <v-select v-model=\"cargo\" label=\"Cargo\" box :items=\"cargos\"></v-select>\n                </v-flex>\n                <v-flex xs12 sm12 md7 lg7 class=\"pl-2\">\n                  <v-autocomplete\n                    v-model=\"congregacao\"\n                    :items=\"igrejas\"\n                    label=\"Comum congregação\"\n                    item-text=\"comum\"\n                    item-value=\"comum\"\n                    color=\"blue darken-4\"\n                    box\n                  >\n                    <template slot=\"selection\" slot-scope=\"data\">{{ data.item.comum}}</template>\n                    <template slot=\"item\" slot-scope=\"data\">\n                      <v-flex\n                        xs10\n                        sm10\n                        :key=\"JSON.stringify(data.item.id)\"\n                        @click=\"EscolherIgreja(data.item.id)\"\n                      >\n                        <v-list-tile>\n                          <v-list-tile-content>{{data.item.comum}}</v-list-tile-content>\n                        </v-list-tile>\n                      </v-flex>\n                    </template>\n                  </v-autocomplete>\n                </v-flex>\n              </v-flex>\n            </v-layout>\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-flex xs12 sm12 md12 lg12 align-center class=\"mb-4\">\n            <v-btn\n              color=\"green darken-4\"\n              center\n              class=\"white--text\"\n              :disabled=\"disabled\"\n              v-on:click=\"SalvarIrmao()\"\n            >salvar irmão</v-btn>\n          </v-flex>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"loadingCep\" width=\"500\">\n      <v-card>\n        <v-card-title class=\"headline blue darken-4 white--text\" primary-title>Só um momento ...</v-card-title>\n\n        <v-card-text>\n          <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n            <span>\n              <v-progress-circular\n                :size=\"50\"\n                color=\"blue darken-4\"\n                indeterminate\n                :width=\"3\"\n                class=\"align-center mt-4 mb-4\"\n              >\n                <v-icon color=\"blue darken-4\">fas fa-user-maps</v-icon>\n              </v-progress-circular>\n              <br />\n              <small class=\"blue--text text--darken-4\">BUSCANDO ENDEREÇO...</small>\n            </span>\n          </v-flex>\n        </v-card-text>\n        <v-divider></v-divider>\n      </v-card>\n    </v-dialog>\n  </v-layout>\n</template>\n<script>\nimport swal from \"sweetalert2\";\n\nexport default {\n  data() {\n    return {\n      disabled:true,\n      cpf: null,\n      dialog_nascimento_modal: false,\n      data_nascimento: null,\n      nome: null,\n      rua: null,\n      complemento: null,\n      ddd: null,\n      telefone: null,\n      congregacao: null,\n      dialog: false,\n      modal: false,\n      cod_igreja: null,\n      cep: null,\n      cidade: null,\n      bairro: null,\n      endereco: null,\n      numero: \"\",\n      nomeRelatorio: null,\n      regional: null,\n      local: null,\n      dados: null,\n      errorCEP: \"Digite o cep\",\n      bairroDisable: true,\n      cepDisable: true,\n      cepValido: true,\n      enderecoDisable: true,\n      mask_cod_igreja: \"BR-##-####\",\n      regionais: [],\n      encLocais: [],\n      loadingCep: false,\n      igrejas: [],\n      cargos: [\n        \"Aluno\",\n        \"Músico\",\n        \"Instrutor\",\n        \"Encarregado Local\",\n        \"Encarregado Regional\"\n      ],\n      cargo: null,\n      vincular: false,\n      idCongregacao: null\n    };\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_nascimento);\n    }\n  },\n  watch: {\n    cpf: function() {\n      if (this.cpf.length == 11) {\n        let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(this.$url + \"Usuario/v1/\" + this.cpf, {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              let irmao = response.data;              \n              if (irmao.id != null) {\n                this.irmao_cadastrado = false;                \n                this.AlertaMixin(\n                  \"warning\",\n                  \"Irmão já se encontra cadastrado no sistema\",\n                  4000\n                );\n                this.disabled = true;\n              } else{\n                this.disabled = false;\n              }\n            }\n          })\n          .catch(e => {\n            /*console.error(e); //console.data(e.data);*/\n          });\n      }\n    },\n    congregacao: function() {\n      //console.log(this.congregacao);\n    },\n    cep: function() {\n      if (this.cep.length === 8) {\n        this.loadingCep = true;\n        //console.log(\"Buscando endereço\", this.loadingCep);\n        this.$http\n          .get(\"https://viacep.com.br/ws/\" + this.cep + \"/json/\")\n          .then(response => {\n            if (response.status == 200) {\n              this.dados = response.data;\n              //console.log(this.dados);\n\n              this.cidade = this.dados.localidade;\n              this.bairro = this.dados.bairro;\n              this.rua = this.dados.logradouro;\n              this.loadingCep = false;\n              if (this.bairro == \"\") {\n                this.bairroDisable = false;\n                this.enderecoDisable = false;\n              }\n              if (this.endereco == \"\") {\n                this.enderecoDisable = false;\n              }\n              if (this.dados.uf == \"RN\") {\n                this.cod_igreja = \"BR-17\";\n              }\n              if (this.dados.erro == true) {\n                this.enderecoDisable = false;\n                const toast = swal.mixin({\n                  toast: true,\n                  position: \"top-end\",\n                  showConfirmButton: false,\n                  timer: 3000\n                });\n\n                toast({\n                  type: \"error\",\n                  title: \"cep não encontrado!\"\n                });\n              }\n            }\n          });\n      }\n      if (this.cep.length < 8) {\n        this.errorCEP = \"CEP Inválido\";\n      } else {\n        this.errorCEP = \"CEP válido\";\n        this.cepDisable = false;\n      }\n    },\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_nascimento);\n    }\n  },\n  methods: {\n    AlertaMixin(type, title, time) {\n      const Toast = swal.mixin({\n        toast: true,\n        position: \"top\",\n        showConfirmButton: false,\n        timer: time\n      });\n\n      Toast.fire({\n        type: type,\n        title: title\n      });\n    },\n    LimparCampos() {\n      this.cpf = null;\n      this.data_nascimento = null;\n      this.nome = null;\n      this.cep = null;\n      this.rua = null;\n      this.cidade = null;\n      this.bairro = null;\n      this.numero = null;\n      this.complemento = null;\n      this.ddd = null;\n      this.telefone = null;\n      this.cargo = null;\n      this.congregacao = null;\n    },\n    EscolherRegional(regional) {\n      this.regional = regional;\n    },\n    EscolherEncLocal(local) {\n      this.local = local;\n    },\n    EscolherIgreja(idCongregacao) {\n      this.idCongregacao = idCongregacao;\n    },\n    BuscarIgrejas() {\n      this.igrejas = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Igreja/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              response.data.forEach(element => {\n                this.igrejas.push({\n                  id: element.id,\n                  comum:\n                    element.cidade +\n                    \" - \" +\n                    element.bairro +\n                    \" - \" +\n                    element.codigo\n                });\n              });\n              this.busca = false;\n            } else if (response.status == 401) {\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    SalvarIrmao() {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      if (this.cpf == null) {\n        this.cpf = \"00000000000\";\n      }\n      this.$http\n        .post(\n          this.$url + \"Usuario/v1\",\n          {\n            cpf: this.cpf,\n            nascimento: this.data_nascimento,\n            nome: this.nome,\n            cep: this.cep,\n            cidade: this.cidade,\n            bairro: this.bairro,\n            rua: this.rua,\n            numero: this.numero,\n            complemento: this.complemento,\n            ddd: this.ddd,\n            telefone: this.telefone,\n            cargo: this.cargo,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Irmão salvo com sucesso\");\n            let irmao = response.data;\n            swal.fire(\n              this.cargo + \" salvo com sucesso!\",\n              \"Irmão \" + irmao.nome + \" salvo com sucesso!\",\n              \"success\"\n            );\n            this.VincularIgreja(this.idCongregacao, irmao.id);\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    VincularIgreja(idIgreja, idIrmao) {\n      //console.log(idIgreja)\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .post(\n          this.$url + \"UsuarioIgreja/v1\",\n          {\n            idIgreja: idIgreja,\n            idUsuario: idIrmao,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: {\n              authorization: \"Bearer \" + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Irmão vinculado a igreja com sucesso\");\n            this.dialog = false;\n            this.$emit(\"irmao\");\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    Loading(title, icon) {\n      swal.fire({\n        title: title,\n        html:\n          \"Por favor só um momento... \" + '<i class=\"fas fa-' + icon + \"></i>\",\n        timer: 3000,\n        onOpen: () => {\n          swal.enableLoading();\n        }\n      });\n    },\n    Salvo(title, msg, type) {\n      swal.fire(title, msg, type);\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    }\n  }\n};\n</script>\n<style>\n.mesmo-tamanho {\n  width: 100%;\n  white-space: normal;\n}\n</style>\n"]}]}