{"remainingRequest":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/sigadm-team/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroTermos.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroTermos.vue","mtime":1577190729000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/css-loader/dist/cjs.js","mtime":1569691725000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1569691710000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/postcss-loader/src/index.js","mtime":1569691706000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* the text color of the drop label*/\n.filepond--drop-label {\n  color: white;\n}\n.filepond--panel-root {\n  background-color: rgb(43, 48, 128);\n}\n",{"version":3,"sources":["CadastroTermos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoXA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadastroTermos.vue","sourceRoot":"src/pages/Modulos/Patrimonio/Instrumento/Cadastros","sourcesContent":["<template>\n  <v-layout>\n    <v-flex xs12 sm12 md12 lg12>\n      <v-layout>\n        <v-flex xs12 sm12 md4 lg4>\n          <v-hover>\n            <v-card slot-scope=\"{ hover }\" :class=\"`elevation-${hover ? 12 : 2}`\" class=\"mx-auto\">\n              <v-card-title primary-title>\n                <div>\n                  <h3 class=\"font-weight-bold subheading blue--text text--darken-4\">\n                    Termo da doação\n                  </h3>\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <span id=\"cadastrotermos\">\n                  <file-pond\n                    style=\"cursor:pointer\"\n                    name=\"test\"\n                    ref=\"pondtermodoacao\"\n                    class-name=\"my-pond\"\n                    label-idle=\"anexar aqui\"\n                    :accepted-file-types=\"tipo\"\n                    v-bind:files=\"myFiles\"\n                    labelFileTypeNotAllowed=\"NÃO ACEITO\"\n                    fileValidateTypeLabelExpectedTypes=\"É esperado um PDF\"\n                  ></file-pond>\n                </span>\n              </v-card-text>\n            </v-card>\n          </v-hover>\n        </v-flex>\n        <v-flex xs12 sm12 md4 lg4>\n          <v-hover>\n            <v-card slot-scope=\"{ hover }\" :class=\"`elevation-${hover ? 12 : 2}`\" class=\"mx-auto\">\n              <v-card-title primary-title>\n                <div>\n                  <h3 class=\"font-weight-bold subheading blue--text text--darken-4\">\n                    Nota fiscal\n                  </h3>\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <span id=\"cadastrotermos\">\n                  <file-pond\n                    style=\"cursor:pointer\"\n                    name=\"test\"\n                    ref=\"pondnotafiscal\"\n                    class-name=\"my-pond\"\n                    label-idle=\"Anexar aqui\"\n                    :accepted-file-types=\"tipo\"\n                    v-bind:files=\"myFiles\"\n                    labelFileTypeNotAllowed=\"NÃO ACEITO\"\n                    fileValidateTypeLabelExpectedTypes=\"É esperado um PDF\"\n                  ></file-pond>\n                </span>\n              </v-card-text>\n            </v-card>\n          </v-hover>\n        </v-flex>\n        <v-flex xs12 sm12 md4 lg4>\n          <v-hover>\n            <v-card slot-scope=\"{ hover }\" :class=\"`elevation-${hover ? 12 : 2}`\" class=\"mx-auto\">\n              <v-card-title primary-title>\n                <div>\n                  <h3 class=\"font-weight-bold subheading blue--text text--darken-4\">\n                    Outros documentos\n                  </h3>\n                </div>\n              </v-card-title>\n              <v-card-text>\n                <span id=\"cadastrotermos\">\n                  <file-pond\n                    style=\"cursor:pointer\"\n                    name=\"test\"\n                    ref=\"pondoutrosdocs\"\n                    class-name=\"my-pond\"\n                    label-idle=\"Anexar aqui\"\n                    :accepted-file-types=\"tipo\"\n                    v-bind:files=\"myFiles\"\n                    labelFileTypeNotAllowed=\"NÃO ACEITO\"\n                    fileValidateTypeLabelExpectedTypes=\"É esperado um PDF\"\n                  ></file-pond>\n                </span>\n              </v-card-text>\n            </v-card>\n          </v-hover>\n        </v-flex>\n      </v-layout>\n       <!--\n    <v-flex xs12 sm12 md12 lg12 align-center>\n      <v-btn        \n        color=\"green darken-4\"\n        dark\n        v-on:click=\"handleFilePondInit\"\n      >\n        SALVAR INSTRUMENTO\n      </v-btn>\n    </v-flex>-->\n    <v-flex xs12 sm12 md12 lg12 align-center>\n      <v-btn        \n        color=\"green darken-4\"\n        dark\n      >\n        SALVAR INSTRUMENTO\n      </v-btn>\n    </v-flex>\n    </v-flex>\n  </v-layout>\n</template>  \n  <script>\n// Import FilePond\nimport vueFilePond from \"vue-filepond\";\n// Import plugins\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.esm.js\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.esm.js\";\nimport FilePondPluginFileRename from \"filepond-plugin-file-rename\";\nimport swal from \"sweetalert2\";\n// Import styles\nimport \"filepond/dist/filepond.min.css\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\n// Create FilePond component\nconst FilePond = vueFilePond(\n  FilePondPluginFileValidateType,\n  FilePondPluginImagePreview,\n  FilePondPluginFileRename\n);\nexport default {\n  props: [\"numero_tombamento\"],\n  name: \"cadastrotermos\",\n  data: function() {\n    return {\n      myFiles: [],\n      arquivos: [],\n      tipo: [\"application/pdf\"],\n      termo_valid: false\n    };\n  },\n  methods: {\n    handleFilePondInit: function() {\n      ////console.log(\"FilePond has initialized\");\n      // example of instance method call on pond reference\n      ////console.log('Termo Doacao arquivo',this.$refs.pondtermodoacao.getFiles());\n      this.termoDoacao(this.$refs.pondtermodoacao.getFiles());\n      ////console.log(\"Nota fiscal doação arquivo\",this.$refs.pondnotafiscal.getFiles());\n      this.notaFiscal(this.$refs.pondnotafiscal.getFiles());\n      ////console.log(\"outros docs doação arquivo\",this.$refs.pondoutrosdocs.getFiles());\n      this.outrosDocs(this.$refs.pondoutrosdocs.getFiles());\n      if (this.termo_valid == false) {\n        swal.fire(\n          \"Atenção!\",\n          \"O Termo de  precisa ser anexada ao instrumento!\",\n          \"warning\"\n        );\n      } else {\n        this.$emit(\"cadastrarDoacao\");\n      }\n    },\n    termoDoacao(termo) {\n      ////console.log('Tamanho da quantidade termos de doacao',termo.length);\n      if (termo.length == 0) {\n        ////console.log('Tamanho da quantidade termos de doacao dentro do eslse if',termo.length);\n        swal.fire(\n          \"Atenção!\",\n          \"O Termo de  precisa ser anexada ao instrumento!\",\n          \"warning\"\n        );\n      } else if (termo.length == 1) {\n        termo.forEach(element => {\n          ////console.log(element.file);\n          let formData = new FormData();\n          ////console.log(\"numero\", this.numero_tombamento);\n          if (this.numero_tombamento == \"\") {\n            swal.fire(\n              \"Atenção!\",\n              \"Para continuar numero de tombamento precisa ser selecionado!\",\n              \"warning\"\n            );\n          } else {\n            formData.append(\n              \"file\",\n              element.file,\n              this.numero_tombamento + \"-\" + element.filename\n            );\n          }\n          this.salvarTermo(formData);\n          this.termo_valid = true;\n          // //console.log(formData.getAll(\"file\"));\n        });\n      }\n    },\n    salvarTermo(termo) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        //console.log(\"entrou para anexar termo de doação\");\n        this.$http\n          .post(\n            this.$url + \"DoacaoInstrumento/v1/salvar-termo-doacao-instrumento\",\n            termo,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              swal.fire({\n                type: \"success\",\n                title: \"Anexado com sucesso\",\n                text: \"...\"\n              });\n              //console.log(response.data);\n              this.$emit(\"path_nota\", { path: response.data });\n            } else if (response.status == 401) {\n            } else if (response.status == 500) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    notaFiscal(nota) {\n      //console.log(\"Tamanho da quantidade outros docs de doacao\", nota.length);\n      if (nota.length == 1) {\n        nota.forEach(element => {\n          //console.log(element.file);\n          let formData = new FormData();\n          //console.log(\"numero\", this.numero_tombamento);\n          if (this.numero_tombamento == \"\") {\n            swal.fire(\n              \"Atenção!\",\n              \"Para continuar numero de tombamento precisa ser selecionado!\",\n              \"warning\"\n            );\n          } else {\n            formData.append(\n              \"file\",\n              element.file,\n              this.numero_tombamento + \"-\" + element.filename\n            );\n          }\n          this.salvarNota(formData);\n          //console.log(formData.getAll(\"file\"));\n        });\n      }\n    },\n    salvarNota(nota) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        //console.log(\"entrou para anexar Nota Fiscal\");\n        this.$http\n          .post(\n            this.$url + \"DoacaoInstrumento/v1/salvar-nota-doacao-instrumento\",\n            nota,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              swal.fire({\n                type: \"success\",\n                title: \"Anexado com sucesso\",\n                text: \"...\"\n              });\n              //console.log(response.data);\n              this.$emit(\"path_nota\", { path: response.data });\n            } else if (response.status == 401) {\n            } else if (response.status == 500) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    outrosDocs(docs) {\n      //console.log(\"Tamanho da quantidade notas de doacao\", docs.length);\n      docs.forEach(element => {\n        //console.log(element.file);\n        let formData = new FormData();\n        //console.log(\"numero\", this.numero_tombamento);\n        if (this.numero_tombamento == \"\") {\n          swal.fire(\n            \"Atenção!\",\n            \"Para continuar o numero de tombamento precisa ser selecionado!\",\n            \"warning\"\n          );\n        } else {\n          formData.append(\n            \"file\",\n            element.file,\n            this.numero_tombamento + \"-\" + element.filename\n          );\n        }\n        this.salvarDocs(formData);\n        //console.log(formData.getAll(\"file\"));\n      });\n    },\n    salvarDocs(doc) {\n      let autorizacaoAux = sessionStorage.getItem(\"usuario\");\n      if (autorizacaoAux) {\n        this.autorizacao = JSON.parse(autorizacaoAux);\n        //console.log(\"entrou para anexar Nota Fiscal\");\n        this.$http\n          .post(\n            this.$url + \"DoacaoInstrumento/v1/salvar-outros-doacao-instrumento\",\n            doc,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            if (response.status == 200) {\n              this.dialog = false;\n              swal.fire({\n                type: \"success\",\n                title: \"Anexado com sucesso\",\n                text: \"...\"\n              });\n              //console.log(response.data);\n              this.$emit(\"path_nota\", { path: response.data });\n            } else if (response.status == 401) {\n            } else if (response.status == 500) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    }\n  },\n  components: {\n    FilePond\n  }\n};\n</script>\n  <style  type=\"text/css\">\n/* the text color of the drop label*/\n.filepond--drop-label {\n  color: white;\n}\n.filepond--panel-root {\n  background-color: rgb(43, 48, 128);\n}\n</style>\n  \n  "]}]}