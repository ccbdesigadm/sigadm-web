{"remainingRequest":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/sigadm-team/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Emprestimo/EmprestimoModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Emprestimo/EmprestimoModal.vue","mtime":1578317877000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702000},{"path":"/home/joel/Projetos/sigadm-team/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport swal from 'sweetalert2';\nimport Termos from '@/pages/Modulos/Patrimonio/Instrumento/Emprestimo/Termos';\nexport default {\n  name: 'emprestimo',\n  components: {\n    Termos\n  },\n  data: () => ({\n    dialog_emprestimo: false,\n    dialog: false,\n    nome: null,\n    emprestimo: false,\n    data_emprestimo: new Date().toISOString().substr(0, 10),\n    encarregado: '',\n    congregacao: '',\n    modal: false,\n    tombamento_instrumento: '',\n    igreja: '',\n    regional: '',\n    local: '',\n    irmao_solicitacao: '',\n    irmaoEndereco: '',\n    irmaoCidade: '',\n    irmaoTelefone: '',\n    irmaoCongregacao: '',\n    irmaoRegional: '',\n    irmaoLocal: '',\n    irmaoNome: '',\n    usuario: ''\n  }),\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_emprestimo);\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_emprestimo);\n    }\n  },\n  props: [\n    'numero_do_tombamento',\n    'numero_do_instrumento',\n    'irmao',\n    'nome_instrumento',\n    'solicitacao',\n    'instrumento'\n  ],\n  methods: {\n    SalvarEmprestimo() {\n      console.log(this.numero_do_tombamento);\n      console.log(this.numero_do_instrumento);\n      console.log(this.usuario.nome);\n      console.log(this.congregacao);\n      console.log(this.local);\n      console.log(this.regional);\n      console.log(this.data_emprestimo);\n    },\n  \n    GerarTermoResponsabilidade() {\n      let usuarioAux = sessionStorage.getItem(\"usuario\");\n      let usuario_autorizado = JSON.parse(usuarioAux);\n\n      let data_da_impressao = new Date().toISOString().substr(0, 19);\n      \n\n      \n      var doc = new jsPDF();\n      doc.setFont('times');\n      doc.setFontSize(14);\n      doc.setFontType('bold');\n      doc.text('Congregação Cristã no Brasil', 105, 10, null, null, 'center');\n      doc.setFontSize(13);\n      doc.setFontType('bold');\n      doc.text('Estado do Rio Grande do Norte', 105, 20, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(14);\n      doc.text('TERMO DE RESPONSABILIDADE ', 105, 30, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(13);\n      doc.text(\n        '      Declaro encontrar em minhas mãos para louvar a DEUS, um instrumento musical ' +\n          this.instrumento.nome +\n          ' de tonalidade/característica ' +\n          this.instrumento.caracteristica +\n          ' pertencente ao patrimônio da Congregação Cristã no Brasil do Estado do Rio Grande do Norte, com número de identificação ' +\n          this.instrumento.tombamento +\n          '.',\n        10,\n        40,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Comprometo-me a desfrutar deste instrumento obedecendo as seguintes condições:',\n        10,\n        55,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text('                 - Enquanto morar neste Estado;', 10, 65, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        '                 - Enquanto não conseguir comprar meu instrumento;',\n        10,\n        70,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se eu permanecer com vida e saúde física;',\n        10,\n        75,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se permanecer fiel à doutrina da Congregação;',\n        10,\n        80,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Ser frequente nos cultos e ensaios musicais;',\n        10,\n        85,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - A manutenção do instrumento ficará por minha conta;',\n        10,\n        90,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Em caso de morte, o instrumento deverá ser devolvido à Congregação.',\n        10,\n        95,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Fico ciente que se não obedecer aos itens acima, sofrerei a pena de perder o direito de usufruir do instrumento, obrigando-me a devolvê-lo imediatamente quando solicitado pelo Ministério local.',\n        10,\n        110,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 120, 205, 120);\n      doc.text('Nome: ' + this.usuario.nome, 10, 125, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        'Data de Nascimento: ' +\n          this.formatDate(this.usuario.nascimento.substring(0, 10)) +\n          '   CPF: ' +\n          this.usuario.cpf +\n          '   Telefone: ' +\n          this.usuario.telefone,\n        10,\n        130,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Endereço: ' +\n          this.usuario.rua +\n          ', ' +\n          this.usuario.numero +\n          '  ' +\n          this.usuario.bairro +\n          ' - ' +\n          this.usuario.cidade,\n        10,\n        135,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Congregação/Código: ' +\n          this.igreja.nomeRelatorio +\n          ' - ' +\n          this.igreja.codigo,\n        10,\n        140,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 145, 205, 145);\n      doc.text(\n        '       Por ser verdade e por aceitar as condições mencionadas assino a presente declaração.',\n        10,\n        155,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(20, 170, 92, 170);\n      doc.setFontSize(10);\n      doc.text('Cidade', 55, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' , ', 94, 170, 'center');\n      doc.line(97, 170, 109, 170);\n      doc.setFontSize(10);\n      doc.text('Dia', 103, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 113, 170, 'center');\n      doc.line(118, 170, 150, 170);\n      doc.setFontSize(10);\n      doc.text('Mês', 136, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 154, 170, 'center');\n      doc.line(160, 170, 180, 170);\n      doc.setFontSize(10);\n      doc.text('Ano', 172, 175, 'center');\n      doc.setFontSize(13);\n      doc.text('.', 181, 170, 'center');\n      doc.line(40, 190, 170, 190);\n      doc.setFontSize(10);\n      doc.text('Assinatura do músico', 103, 193, 'center');\n      doc.setFontSize(13);\n      doc.text(\n        ' --------------- Via da secretaria ---------------',\n        102,\n        210,\n        'center'\n      );\n      doc.setFontSize(10);\n      doc.text(\"Pág 1\",105,280,'center');\n      doc.text(\"Emitido digitalmente por \"+ usuario_autorizado.email+\" Data: \"+this.formatDate(data_da_impressao.substring(0, 10)),105,285,'center');\n\n      doc.addPage();\n\n      doc.setFont('times');\n      doc.setFontSize(14);\n      doc.setFontType('bold');\n      doc.text('Congregação Cristã no Brasil', 105, 10, null, null, 'center');\n      doc.setFontSize(13);\n      doc.setFontType('bold');\n      doc.text('Estado do Rio Grande do Norte', 105, 20, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(14);\n      doc.text('TERMO DE RESPONSABILIDADE ', 105, 30, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(13);\n\n      doc.text(\n        '      Declaro encontrar em minhas mãos para louvar a DEUS, um instrumento musical ' +\n          this.instrumento.nome +\n          ' de tonalidade/característica ' +\n          this.instrumento.caracteristica +\n          ' pertencente ao patrimônio da Congregação Cristã no Brasil do Estado do Rio Grande do Norte, com número de identificação ' +\n          this.instrumento.tombamento +\n          '.',\n        10,\n        40,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Comprometo-me a desfrutar deste instrumento obedecendo as seguintes condições:',\n        10,\n        55,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text('                 - Enquanto morar neste Estado;', 10, 65, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        '                 - Enquanto não conseguir comprar meu instrumento;',\n        10,\n        70,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se eu permanecer com vida e saúde física;',\n        10,\n        75,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se permanecer fiel à doutrina da Congregação;',\n        10,\n        80,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Ser frequente nos cultos e ensaios musicais;',\n        10,\n        85,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - A manutenção do instrumento ficará por minha conta;',\n        10,\n        90,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Em caso de morte, o instrumento deverá ser devolvido à Congregação.',\n        10,\n        95,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Fico ciente que se não obedecer aos itens acima, sofrerei a pena de perder o direito de usufruir do instrumento, obrigando-me a devolvê-lo imediatamente quando solicitado pelo Ministério local.',\n        10,\n        110,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 120, 205, 120);\n      doc.text('Nome: ' + this.usuario.nome, 10, 125, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        'Data de Nascimento: ' +\n          this.formatDate(this.usuario.nascimento.substring(0, 10)) +\n          '   CPF: ' +\n          this.usuario.cpf +\n          '   Telefone: ' +\n          this.usuario.telefone,\n        10,\n        130,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Endereço: ' +\n          this.usuario.rua +\n          ', ' +\n          this.usuario.numero +\n          '  ' +\n          this.usuario.bairro +\n          ' - ' +\n          this.usuario.cidade,\n        10,\n        135,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Congregação/Código: ' +\n          this.igreja.nomeRelatorio +\n          ' - ' +\n          this.igreja.codigo,\n        10,\n        140,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 145, 205, 145);\n      doc.text(\n        '       Por ser verdade e por aceitar as condições mencionadas assino a presente declaração.',\n        10,\n        155,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(20, 170, 92, 170);\n      doc.setFontSize(10);\n      doc.text('Cidade', 55, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' , ', 94, 170, 'center');\n      doc.line(97, 170, 109, 170);\n      doc.setFontSize(10);\n      doc.text('Dia', 103, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 113, 170, 'center');\n      doc.line(118, 170, 150, 170);\n      doc.setFontSize(10);\n      doc.text('Mês', 136, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 154, 170, 'center');\n      doc.line(160, 170, 180, 170);\n      doc.setFontSize(10);\n      doc.text('Ano', 172, 175, 'center');\n      doc.setFontSize(13);\n      doc.text('.', 181, 170, 'center');\n      doc.line(40, 190, 170, 190);\n      doc.setFontSize(10);\n      doc.text('Assinatura do músico', 103, 193, 'center');\n      doc.setFontSize(13);\n      doc.text(\n        ' --------------- Via do músico ---------------',\n        102,\n        210,\n        'center'\n      );\n      doc.setFontSize(10);\n      doc.text(\"Pág 2\",105,280,'center');\n      doc.text(\"Emitido digitalmente por \"+ usuario_autorizado.email+\" Data: \"+this.formatDate(data_da_impressao.substring(0, 10)),105,285,'center');\n      doc.addPage();\n\n      doc.setFont('times');\n      doc.setFontSize(14);\n      doc.setFontType('bold');\n      doc.text('Congregação Cristã no Brasil', 105, 10, null, null, 'center');\n      doc.setFontSize(13);\n      doc.setFontType('bold');\n      doc.text('Estado do Rio Grande do Norte', 105, 20, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(14);\n      doc.text(\n        'TERMO DE CIENCIA DE EMPRÉSTIMO DE INSTRUMENTO ',\n        105,\n        30,\n        null,\n        null,\n        'center'\n      );\n      doc.text('PARA O MINISTÉRIO LOCAL ', 105, 35, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(13);\n      doc.text('A paz de Deus, ', 10, 60, { maxWidth: 185, align: 'justify' });\n      doc.text(\n        '      Informamos que está sendo realizado empréstimo do instrumento musical ' +\n          this.instrumento.nome +\n          ' de tonalidade/característica ' +\n          this.instrumento.caracteristica +\n          ' de número de tombamento ' +\n          this.instrumento.tombamento +\n          ' na data de ' +\n          this.formatDate(this.data_emprestimo.substring(0, 10)) +\n          ', para o irmão ' +\n          this.usuario.nome +\n          ' que faz comum nesta congregação. ',\n        10,\n        90,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '      O atendimento foi atendido com consentimento dos irmãos responsáveis pelo fundo musical. ',\n        10,\n        120,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text('Deus vos abençoe! ', 10, 130, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.line(20, 170, 92, 170);\n      doc.setFontSize(10);\n      doc.text('Cidade', 55, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' , ', 94, 170, 'center');\n      doc.line(97, 170, 109, 170);\n      doc.setFontSize(10);\n      doc.text('Dia', 103, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 113, 170, 'center');\n      doc.line(118, 170, 150, 170);\n      doc.setFontSize(10);\n      doc.text('Mês', 136, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 154, 170, 'center');\n      doc.line(160, 170, 180, 170);\n      doc.setFontSize(10);\n      doc.text('Ano', 172, 175, 'center');\n      doc.setFontSize(13);\n      doc.text('.', 181, 170, 'center');\n      doc.line(40, 205, 170, 205);\n      doc.setFontSize(10);\n      doc.text('Assinatura do ministério local', 103, 208, 'center');\n      doc.line(40, 220, 170, 220);\n      doc.setFontSize(10);\n      doc.text('Assinatura do Encarregado Regional/Local', 105, 223, 'center');\n      doc.text(\"Pág 3\",105,280,'center');\n      doc.text(\"Emitido digitalmente por \"+ usuario_autorizado.email+\" Data: \"+this.formatDate(data_da_impressao.substring(0, 10)),105,285,'center');\n      doc.save('export.pdf');\n    },\n    CadastrarEmprestimo() {\n      ////console.log(this.numero_do_instrumento);\n\n      //console.log(\"Nome: \", this.irmaoNome);\n      if (this.irmaoNome == null) {\n        swal.fire('Não é possivel salvar!', 'Dados incompletos.', 'warning');\n      } else {\n        let autorizacaoAux = sessionStorage.getItem('usuario');\n        if (autorizacaoAux) {\n          this.Loading(\n            'Realizando empréstimo e gerando Termos...',\n            'hourglass-half'\n          );\n          this.autorizacao = JSON.parse(autorizacaoAux);\n          ////console.log(\"entrou no cadastro de emprestimo\");\n          this.$http\n            .post(\n              this.$url + 'EmprestimoInstrumento/v1',\n              {\n                id: 0,\n                idInstrumento: this.numero_do_instrumento,\n                nome: this.usuario.nome,\n                congregacao: this.congregacao,\n                tombamento: this.numero_do_tombamento,\n                status: '2',\n                encarregado: this.local,\n                encarregadoRegional: this.regional,\n                devolucaoDate: new Date().toISOString().substr(0, 19),\n                emprestimoDate: this.data_emprestimo,\n                launchDate: new Date().toISOString().substr(0, 19)\n              },\n              {\n                headers: {\n                  authorization: 'Bearer ' + this.autorizacao.accessToken\n                }\n              }\n            )\n            .then(response => {\n              if (response.status == 200) {\n              }\n            })\n            .catch(e => {});\n        }\n      }\n    },\n    BuscarIrmao() {\n      this.usuario = '';\n      let usuarioAutorize = sessionStorage.getItem('usuario');\n      if (!usuarioAutorize) {\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + 'Usuario/v1/id?id=' + this.irmao, {\n            headers: { authorization: 'Bearer ' + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              console.log(response.data);\n              this.usuario = response.data;\n            }\n          })\n          .catch(e => {});\n      }\n      console.log(this.usuario);\n    },\n    BuscarComumCongregacao(id) {\n      this.irmao_solicitacao = [];\n      let usuarioAutorize = sessionStorage.getItem('usuario');\n      if (!usuarioAutorize) {\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(this.$url + 'UsuarioIgreja/v1/usuario-por-id?id=' + id, {\n            headers: {\n              authorization: 'Bearer ' + this.autorizacao.accessToken\n            }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              this.$http\n                .get(this.$url + 'Igreja/v1/' + response.data.idIgreja, {\n                  headers: {\n                    authorization: 'Bearer ' + this.autorizacao.accessToken\n                  }\n                })\n                .then(response => {\n                  if (response.status == 200) {\n                    this.igreja = response.data;\n                    (this.congregacao = response.data.cidade),\n                      (this.regional = response.data.encRegional),\n                      (this.local = response.data.encLocal);\n                  }\n                })\n                .catch(e => {});\n            }\n          })\n          .catch(e => {});\n      }\n    },\n    Loading(title, icon) {\n      swal.fire({\n        title: title,\n        html:\n          'Por favor só um momento... ' + '<i class=\"fas fa-' + icon + '></i>',\n        timer: 3000,\n        onOpen: () => {\n          swal.enableLoading();\n        }\n      });\n    },\n    Salvo(title, msg, type) {\n      swal.fire(title, msg, type);\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`;\n    },\n    SalvarStatusAnexarSolicitacaoEmprestimo() {\n      console.log(this.solicitacao);\n      let usuarioAutorize = sessionStorage.getItem('usuario');\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .put(\n          this.$url + 'SolicitacaoEmprestimo/v1',\n          {\n            id: this.solicitacao.id,\n            nome: this.solicitacao.nome,\n            comumCongregacao: this.solicitacao.comumCongregacao,\n            primeiroInstrumento: this.solicitacao.primeiroInstrumento,\n            primeiraCategoria: this.solicitacao.primeiraCategoria,\n            segundoInstrumento: this.solicitacao.segundoInstrumento,\n            segundaCategoria: this.solicitacao.segundaCategoria,\n            dataCadastro: this.solicitacao.dataCadastro,\n            status: 'Anexar',\n            launchDate: this.solicitacao.launchDate\n          },\n          {\n            headers: {\n              authorization: 'Bearer ' + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Solicitação de empréstimo salva com sucesso\");\n            //let irmao = response.data;\n            //this.$emit('solicitacaoSalva');\n            this.dialog = false;\n            this.$emit('emprestimo_sucesso');\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    }\n  }\n};\n",{"version":3,"sources":["EmprestimoModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EmprestimoModal.vue","sourceRoot":"src/pages/Modulos/Patrimonio/Instrumento/Emprestimo","sourcesContent":["<template>\n  <v-layout row>\n    <v-dialog v-model=\"dialog\" max-width=\"820px\">\n      <v-btn\n        slot=\"activator\"\n        flat\n        color=\"green darken-2\"\n        dark\n        class=\"align-left\"\n        @click=\"BuscarIrmao(), BuscarComumCongregacao(irmao)\"\n      >\n        <v-icon small left dark>fas fa-check</v-icon>\n        <small>Escolher</small>\n      </v-btn>\n      <v-card>\n        <v-flex xs12 sm12>\n          <div class=\"pt-3\">\n            <v-btn\n              right\n              class=\"white--text\"\n              small\n              fab\n              round\n              color=\"red darken-1\"\n              absolute\n              v-on:click=\"dialog = false\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n          </div>\n        </v-flex>\n        <v-card-text>\n          <v-flex xs12 sm12 md12 lg12 align-center>\n            <span class=\"font-weight-bold headline blue--text text--darken-4\"\n              >Informações sobre o empréstimo</span\n            >\n          </v-flex>\n\n          <v-container grid-list-md>\n            <v-layout wrap>\n              <v-flex sm6 lg6 md6>\n                <v-text-field\n                  :readonly=\"true\"\n                  v-model=\"usuario.nome\"\n                  label=\"Nome do irmão\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex sm6 lg6 md6>\n                <v-text-field\n                  :readonly=\"true\"\n                  v-model=\"nome_instrumento\"\n                  label=\"Instrumento\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex sm6 md6 lg6>\n                <v-text-field\n                  v-model=\"computedDateFormatted\"\n                  label=\"Data do empréstimo \"\n                  append-icon=\"event\"\n                  :readonly=\"true\"\n                  color=\"blue darken-3\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex sm6 lg6 md6>\n                <v-text-field\n                  :readonly=\"true\"\n                  v-model=\"congregacao\"\n                  label=\"Comum congregação\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex sm6 lg6 md6>\n                <v-text-field\n                  :readonly=\"true\"\n                  v-model=\"local\"\n                  label=\"Encarregado local\"\n                ></v-text-field>\n              </v-flex>\n              <v-flex sm6 lg6 md6>\n                <v-text-field\n                  :readonly=\"true\"\n                  v-model=\"regional\"\n                  label=\"Encarregado regional\"\n                ></v-text-field>\n              </v-flex>\n\n              <!--           \n              <v-flex align-center>\n                <termos\n                  v-bind:numero_tombamento=\"numero_do_tombamento\"\n                  v-on:cadastrarEmprestimo=\"\n                    CadastrarEmprestimo(), (dialog = false)\n                  \"\n                ></termos>\n              </v-flex>\n              -->\n              <v-flex align-center>\n                <v-btn\n                  color=\"success\"\n                  @click=\"\n                    GerarTermoResponsabilidade(),\n                      CadastrarEmprestimo(),\n                      SalvarStatusAnexarSolicitacaoEmprestimo()\n                  \"\n                >\n                  <v-icon small left>fas fa-file-signature</v-icon>\n                  Gerar Termos</v-btn\n                >\n              </v-flex>\n            </v-layout>\n          </v-container>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-layout>\n</template>\n<script>\nimport swal from 'sweetalert2';\nimport Termos from '@/pages/Modulos/Patrimonio/Instrumento/Emprestimo/Termos';\nexport default {\n  name: 'emprestimo',\n  components: {\n    Termos\n  },\n  data: () => ({\n    dialog_emprestimo: false,\n    dialog: false,\n    nome: null,\n    emprestimo: false,\n    data_emprestimo: new Date().toISOString().substr(0, 10),\n    encarregado: '',\n    congregacao: '',\n    modal: false,\n    tombamento_instrumento: '',\n    igreja: '',\n    regional: '',\n    local: '',\n    irmao_solicitacao: '',\n    irmaoEndereco: '',\n    irmaoCidade: '',\n    irmaoTelefone: '',\n    irmaoCongregacao: '',\n    irmaoRegional: '',\n    irmaoLocal: '',\n    irmaoNome: '',\n    usuario: ''\n  }),\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(this.data_emprestimo);\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(this.data_emprestimo);\n    }\n  },\n  props: [\n    'numero_do_tombamento',\n    'numero_do_instrumento',\n    'irmao',\n    'nome_instrumento',\n    'solicitacao',\n    'instrumento'\n  ],\n  methods: {\n    SalvarEmprestimo() {\n      console.log(this.numero_do_tombamento);\n      console.log(this.numero_do_instrumento);\n      console.log(this.usuario.nome);\n      console.log(this.congregacao);\n      console.log(this.local);\n      console.log(this.regional);\n      console.log(this.data_emprestimo);\n    },\n  \n    GerarTermoResponsabilidade() {\n      let usuarioAux = sessionStorage.getItem(\"usuario\");\n      let usuario_autorizado = JSON.parse(usuarioAux);\n\n      let data_da_impressao = new Date().toISOString().substr(0, 19);\n      \n\n      \n      var doc = new jsPDF();\n      doc.setFont('times');\n      doc.setFontSize(14);\n      doc.setFontType('bold');\n      doc.text('Congregação Cristã no Brasil', 105, 10, null, null, 'center');\n      doc.setFontSize(13);\n      doc.setFontType('bold');\n      doc.text('Estado do Rio Grande do Norte', 105, 20, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(14);\n      doc.text('TERMO DE RESPONSABILIDADE ', 105, 30, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(13);\n      doc.text(\n        '      Declaro encontrar em minhas mãos para louvar a DEUS, um instrumento musical ' +\n          this.instrumento.nome +\n          ' de tonalidade/característica ' +\n          this.instrumento.caracteristica +\n          ' pertencente ao patrimônio da Congregação Cristã no Brasil do Estado do Rio Grande do Norte, com número de identificação ' +\n          this.instrumento.tombamento +\n          '.',\n        10,\n        40,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Comprometo-me a desfrutar deste instrumento obedecendo as seguintes condições:',\n        10,\n        55,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text('                 - Enquanto morar neste Estado;', 10, 65, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        '                 - Enquanto não conseguir comprar meu instrumento;',\n        10,\n        70,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se eu permanecer com vida e saúde física;',\n        10,\n        75,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se permanecer fiel à doutrina da Congregação;',\n        10,\n        80,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Ser frequente nos cultos e ensaios musicais;',\n        10,\n        85,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - A manutenção do instrumento ficará por minha conta;',\n        10,\n        90,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Em caso de morte, o instrumento deverá ser devolvido à Congregação.',\n        10,\n        95,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Fico ciente que se não obedecer aos itens acima, sofrerei a pena de perder o direito de usufruir do instrumento, obrigando-me a devolvê-lo imediatamente quando solicitado pelo Ministério local.',\n        10,\n        110,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 120, 205, 120);\n      doc.text('Nome: ' + this.usuario.nome, 10, 125, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        'Data de Nascimento: ' +\n          this.formatDate(this.usuario.nascimento.substring(0, 10)) +\n          '   CPF: ' +\n          this.usuario.cpf +\n          '   Telefone: ' +\n          this.usuario.telefone,\n        10,\n        130,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Endereço: ' +\n          this.usuario.rua +\n          ', ' +\n          this.usuario.numero +\n          '  ' +\n          this.usuario.bairro +\n          ' - ' +\n          this.usuario.cidade,\n        10,\n        135,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Congregação/Código: ' +\n          this.igreja.nomeRelatorio +\n          ' - ' +\n          this.igreja.codigo,\n        10,\n        140,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 145, 205, 145);\n      doc.text(\n        '       Por ser verdade e por aceitar as condições mencionadas assino a presente declaração.',\n        10,\n        155,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(20, 170, 92, 170);\n      doc.setFontSize(10);\n      doc.text('Cidade', 55, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' , ', 94, 170, 'center');\n      doc.line(97, 170, 109, 170);\n      doc.setFontSize(10);\n      doc.text('Dia', 103, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 113, 170, 'center');\n      doc.line(118, 170, 150, 170);\n      doc.setFontSize(10);\n      doc.text('Mês', 136, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 154, 170, 'center');\n      doc.line(160, 170, 180, 170);\n      doc.setFontSize(10);\n      doc.text('Ano', 172, 175, 'center');\n      doc.setFontSize(13);\n      doc.text('.', 181, 170, 'center');\n      doc.line(40, 190, 170, 190);\n      doc.setFontSize(10);\n      doc.text('Assinatura do músico', 103, 193, 'center');\n      doc.setFontSize(13);\n      doc.text(\n        ' --------------- Via da secretaria ---------------',\n        102,\n        210,\n        'center'\n      );\n      doc.setFontSize(10);\n      doc.text(\"Pág 1\",105,280,'center');\n      doc.text(\"Emitido digitalmente por \"+ usuario_autorizado.email+\" Data: \"+this.formatDate(data_da_impressao.substring(0, 10)),105,285,'center');\n\n      doc.addPage();\n\n      doc.setFont('times');\n      doc.setFontSize(14);\n      doc.setFontType('bold');\n      doc.text('Congregação Cristã no Brasil', 105, 10, null, null, 'center');\n      doc.setFontSize(13);\n      doc.setFontType('bold');\n      doc.text('Estado do Rio Grande do Norte', 105, 20, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(14);\n      doc.text('TERMO DE RESPONSABILIDADE ', 105, 30, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(13);\n\n      doc.text(\n        '      Declaro encontrar em minhas mãos para louvar a DEUS, um instrumento musical ' +\n          this.instrumento.nome +\n          ' de tonalidade/característica ' +\n          this.instrumento.caracteristica +\n          ' pertencente ao patrimônio da Congregação Cristã no Brasil do Estado do Rio Grande do Norte, com número de identificação ' +\n          this.instrumento.tombamento +\n          '.',\n        10,\n        40,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Comprometo-me a desfrutar deste instrumento obedecendo as seguintes condições:',\n        10,\n        55,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text('                 - Enquanto morar neste Estado;', 10, 65, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        '                 - Enquanto não conseguir comprar meu instrumento;',\n        10,\n        70,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se eu permanecer com vida e saúde física;',\n        10,\n        75,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Se permanecer fiel à doutrina da Congregação;',\n        10,\n        80,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Ser frequente nos cultos e ensaios musicais;',\n        10,\n        85,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - A manutenção do instrumento ficará por minha conta;',\n        10,\n        90,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '                 - Em caso de morte, o instrumento deverá ser devolvido à Congregação.',\n        10,\n        95,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '        Fico ciente que se não obedecer aos itens acima, sofrerei a pena de perder o direito de usufruir do instrumento, obrigando-me a devolvê-lo imediatamente quando solicitado pelo Ministério local.',\n        10,\n        110,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 120, 205, 120);\n      doc.text('Nome: ' + this.usuario.nome, 10, 125, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.text(\n        'Data de Nascimento: ' +\n          this.formatDate(this.usuario.nascimento.substring(0, 10)) +\n          '   CPF: ' +\n          this.usuario.cpf +\n          '   Telefone: ' +\n          this.usuario.telefone,\n        10,\n        130,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Endereço: ' +\n          this.usuario.rua +\n          ', ' +\n          this.usuario.numero +\n          '  ' +\n          this.usuario.bairro +\n          ' - ' +\n          this.usuario.cidade,\n        10,\n        135,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        'Congregação/Código: ' +\n          this.igreja.nomeRelatorio +\n          ' - ' +\n          this.igreja.codigo,\n        10,\n        140,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(5, 145, 205, 145);\n      doc.text(\n        '       Por ser verdade e por aceitar as condições mencionadas assino a presente declaração.',\n        10,\n        155,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.line(20, 170, 92, 170);\n      doc.setFontSize(10);\n      doc.text('Cidade', 55, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' , ', 94, 170, 'center');\n      doc.line(97, 170, 109, 170);\n      doc.setFontSize(10);\n      doc.text('Dia', 103, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 113, 170, 'center');\n      doc.line(118, 170, 150, 170);\n      doc.setFontSize(10);\n      doc.text('Mês', 136, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 154, 170, 'center');\n      doc.line(160, 170, 180, 170);\n      doc.setFontSize(10);\n      doc.text('Ano', 172, 175, 'center');\n      doc.setFontSize(13);\n      doc.text('.', 181, 170, 'center');\n      doc.line(40, 190, 170, 190);\n      doc.setFontSize(10);\n      doc.text('Assinatura do músico', 103, 193, 'center');\n      doc.setFontSize(13);\n      doc.text(\n        ' --------------- Via do músico ---------------',\n        102,\n        210,\n        'center'\n      );\n      doc.setFontSize(10);\n      doc.text(\"Pág 2\",105,280,'center');\n      doc.text(\"Emitido digitalmente por \"+ usuario_autorizado.email+\" Data: \"+this.formatDate(data_da_impressao.substring(0, 10)),105,285,'center');\n      doc.addPage();\n\n      doc.setFont('times');\n      doc.setFontSize(14);\n      doc.setFontType('bold');\n      doc.text('Congregação Cristã no Brasil', 105, 10, null, null, 'center');\n      doc.setFontSize(13);\n      doc.setFontType('bold');\n      doc.text('Estado do Rio Grande do Norte', 105, 20, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(14);\n      doc.text(\n        'TERMO DE CIENCIA DE EMPRÉSTIMO DE INSTRUMENTO ',\n        105,\n        30,\n        null,\n        null,\n        'center'\n      );\n      doc.text('PARA O MINISTÉRIO LOCAL ', 105, 35, null, null, 'center');\n      doc.setFontType('normal');\n      doc.setFontSize(13);\n      doc.text('A paz de Deus, ', 10, 60, { maxWidth: 185, align: 'justify' });\n      doc.text(\n        '      Informamos que está sendo realizado empréstimo do instrumento musical ' +\n          this.instrumento.nome +\n          ' de tonalidade/característica ' +\n          this.instrumento.caracteristica +\n          ' de número de tombamento ' +\n          this.instrumento.tombamento +\n          ' na data de ' +\n          this.formatDate(this.data_emprestimo.substring(0, 10)) +\n          ', para o irmão ' +\n          this.usuario.nome +\n          ' que faz comum nesta congregação. ',\n        10,\n        90,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text(\n        '      O atendimento foi atendido com consentimento dos irmãos responsáveis pelo fundo musical. ',\n        10,\n        120,\n        { maxWidth: 185, align: 'justify' }\n      );\n      doc.text('Deus vos abençoe! ', 10, 130, {\n        maxWidth: 185,\n        align: 'justify'\n      });\n      doc.line(20, 170, 92, 170);\n      doc.setFontSize(10);\n      doc.text('Cidade', 55, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' , ', 94, 170, 'center');\n      doc.line(97, 170, 109, 170);\n      doc.setFontSize(10);\n      doc.text('Dia', 103, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 113, 170, 'center');\n      doc.line(118, 170, 150, 170);\n      doc.setFontSize(10);\n      doc.text('Mês', 136, 175, 'center');\n      doc.setFontSize(13);\n      doc.text(' de', 154, 170, 'center');\n      doc.line(160, 170, 180, 170);\n      doc.setFontSize(10);\n      doc.text('Ano', 172, 175, 'center');\n      doc.setFontSize(13);\n      doc.text('.', 181, 170, 'center');\n      doc.line(40, 205, 170, 205);\n      doc.setFontSize(10);\n      doc.text('Assinatura do ministério local', 103, 208, 'center');\n      doc.line(40, 220, 170, 220);\n      doc.setFontSize(10);\n      doc.text('Assinatura do Encarregado Regional/Local', 105, 223, 'center');\n      doc.text(\"Pág 3\",105,280,'center');\n      doc.text(\"Emitido digitalmente por \"+ usuario_autorizado.email+\" Data: \"+this.formatDate(data_da_impressao.substring(0, 10)),105,285,'center');\n      doc.save('export.pdf');\n    },\n    CadastrarEmprestimo() {\n      ////console.log(this.numero_do_instrumento);\n\n      //console.log(\"Nome: \", this.irmaoNome);\n      if (this.irmaoNome == null) {\n        swal.fire('Não é possivel salvar!', 'Dados incompletos.', 'warning');\n      } else {\n        let autorizacaoAux = sessionStorage.getItem('usuario');\n        if (autorizacaoAux) {\n          this.Loading(\n            'Realizando empréstimo e gerando Termos...',\n            'hourglass-half'\n          );\n          this.autorizacao = JSON.parse(autorizacaoAux);\n          ////console.log(\"entrou no cadastro de emprestimo\");\n          this.$http\n            .post(\n              this.$url + 'EmprestimoInstrumento/v1',\n              {\n                id: 0,\n                idInstrumento: this.numero_do_instrumento,\n                nome: this.usuario.nome,\n                congregacao: this.congregacao,\n                tombamento: this.numero_do_tombamento,\n                status: '2',\n                encarregado: this.local,\n                encarregadoRegional: this.regional,\n                devolucaoDate: new Date().toISOString().substr(0, 19),\n                emprestimoDate: this.data_emprestimo,\n                launchDate: new Date().toISOString().substr(0, 19)\n              },\n              {\n                headers: {\n                  authorization: 'Bearer ' + this.autorizacao.accessToken\n                }\n              }\n            )\n            .then(response => {\n              if (response.status == 200) {\n              }\n            })\n            .catch(e => {});\n        }\n      }\n    },\n    BuscarIrmao() {\n      this.usuario = '';\n      let usuarioAutorize = sessionStorage.getItem('usuario');\n      if (!usuarioAutorize) {\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + 'Usuario/v1/id?id=' + this.irmao, {\n            headers: { authorization: 'Bearer ' + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              console.log(response.data);\n              this.usuario = response.data;\n            }\n          })\n          .catch(e => {});\n      }\n      console.log(this.usuario);\n    },\n    BuscarComumCongregacao(id) {\n      this.irmao_solicitacao = [];\n      let usuarioAutorize = sessionStorage.getItem('usuario');\n      if (!usuarioAutorize) {\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(this.$url + 'UsuarioIgreja/v1/usuario-por-id?id=' + id, {\n            headers: {\n              authorization: 'Bearer ' + this.autorizacao.accessToken\n            }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              this.$http\n                .get(this.$url + 'Igreja/v1/' + response.data.idIgreja, {\n                  headers: {\n                    authorization: 'Bearer ' + this.autorizacao.accessToken\n                  }\n                })\n                .then(response => {\n                  if (response.status == 200) {\n                    this.igreja = response.data;\n                    (this.congregacao = response.data.cidade),\n                      (this.regional = response.data.encRegional),\n                      (this.local = response.data.encLocal);\n                  }\n                })\n                .catch(e => {});\n            }\n          })\n          .catch(e => {});\n      }\n    },\n    Loading(title, icon) {\n      swal.fire({\n        title: title,\n        html:\n          'Por favor só um momento... ' + '<i class=\"fas fa-' + icon + '></i>',\n        timer: 3000,\n        onOpen: () => {\n          swal.enableLoading();\n        }\n      });\n    },\n    Salvo(title, msg, type) {\n      swal.fire(title, msg, type);\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`;\n    },\n    SalvarStatusAnexarSolicitacaoEmprestimo() {\n      console.log(this.solicitacao);\n      let usuarioAutorize = sessionStorage.getItem('usuario');\n      this.autorizacao = JSON.parse(usuarioAutorize);\n      this.$http\n        .put(\n          this.$url + 'SolicitacaoEmprestimo/v1',\n          {\n            id: this.solicitacao.id,\n            nome: this.solicitacao.nome,\n            comumCongregacao: this.solicitacao.comumCongregacao,\n            primeiroInstrumento: this.solicitacao.primeiroInstrumento,\n            primeiraCategoria: this.solicitacao.primeiraCategoria,\n            segundoInstrumento: this.solicitacao.segundoInstrumento,\n            segundaCategoria: this.solicitacao.segundaCategoria,\n            dataCadastro: this.solicitacao.dataCadastro,\n            status: 'Anexar',\n            launchDate: this.solicitacao.launchDate\n          },\n          {\n            headers: {\n              authorization: 'Bearer ' + this.autorizacao.accessToken\n            }\n          }\n        )\n        .then(response => {\n          if (response.status == 200) {\n            //console.log(\"Solicitação de empréstimo salva com sucesso\");\n            //let irmao = response.data;\n            //this.$emit('solicitacaoSalva');\n            this.dialog = false;\n            this.$emit('emprestimo_sucesso');\n          }\n          //console.log(response.data);\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    }\n  }\n};\n</script>\n<style>\n.mesmo-tamanho {\n  width: 100%;\n  white-space: normal;\n}\n</style>\n"]}]}