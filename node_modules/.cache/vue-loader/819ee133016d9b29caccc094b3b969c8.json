{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarInstrumentoModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarInstrumentoModal.vue","mtime":1577194563499},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport swal from \"sweetalert2\";\nimport CadDoacao from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarDoacaoModal\";\nimport CadCompra from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarCompraModal\";\nimport StoreInstrumento from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeInstrumento\";\nimport StoreDoacao from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeDoacao\";\nimport StoreCompra from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeCompra\";\n\nexport default {\n  components: {\n    CadDoacao,\n    CadCompra\n  },\n  data() {\n    return {\n      nome: null,\n      nomes: [],\n      naipe: null,\n      ano: null,\n      anos: [],\n      tombamento: null,\n      tombamentos: [],\n      caracteristica: null,\n      caracteristicas: [],\n      marca: null,\n      marcas: [],\n      componente: null,\n      componentes: [],\n      data_nascimento: null,\n      dialog: false,\n      observacao: \"Sem observações\",\n      editar:false\n    };\n  },\n  watch: {\n    dialog: function() {\n      if (this.dialog == true) {\n        this.Fechar();\n        this.CarregarDados();\n      }\n    }\n  },\n  methods: {\n    Editar(){\n      this.editar = true;\n    },\n    NaoEditar(){\n      this.editar = false;\n    },\n    SalvarCompraInstrumento() {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .post(\n          this.$url + \"Instrumento/v1\",\n          {\n            id: 0,\n            nome: this.nome.nome,\n            ano: this.ano,\n            status: \"1\",\n            aquisicao: \"2\",\n            tombamento: this.tombamento,\n            componentes: this.componente.toString(),\n            caracteristica: this.caracteristica,\n            marca: this.marca,\n            descricao: this.descricao,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: { authorization: \"Bearer \" + autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n            this.AtualizarStatusTombamento(this.tombamento);\n          }\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarStatusTombamento(tombamento) {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .put(\n          this.$url +\n            \"TombamentoInstrumento/v1/selecionar-tombamento?tombamento=\" +\n            tombamento,\n          {\n            headers: { authorization: \"Bearer \" + autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n          }\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    Fechar() {\n      this.ano = null;\n      this.nome = null;\n      this.tombamento = null;\n      this.marca = null;\n      this.componente = null;\n      this.caracteristica = null;\n      this.observacao = \"Sem observações\";\n    },\n    CarregarDados() {\n      StoreInstrumento.state.anos.forEach(element => {\n        this.anos.push({ id: element.id, numeroAno: element.numeroAno });\n      });\n      StoreInstrumento.state.nomes.forEach(element => {\n        this.nomes.push({\n          id: element.id,\n          nome: element.nome,\n          naipe: element.naipe\n        });\n      });\n      this.tombamentos = [];\n      this.tombamentos = StoreInstrumento.state.tombamentos;\n      //console.log(StoreInstrumento.state.tombamentos);\n      StoreInstrumento.state.marcas.forEach(element => {\n        this.marcas.push({ id: element.id, marca: element.marca });\n      });\n      StoreInstrumento.state.componentes.forEach(element => {\n        this.componentes.push({\n          id: element.id,\n          componente: element.componente\n        });\n      });\n      StoreDoacao.dispatch(\"BuscandoOrigensInstrumentos\");\n      StoreCompra.dispatch(\"BuscandoEmpresasInstrumentos\");\n    },\n    EscolherNaipe(payload) {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .get(\n          this.$url +\n            \"CaracteristicaInstrumento/v1/buscar-caracteristica-por-naipe?naipe=\" +\n            payload,\n          { headers: { authorization: \"Bearer \" + autorizacao.accessToken } }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            ////console.log(response.data)\n            this.caracteristicas = response.data;\n          }\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    }\n  }\n};\n",{"version":3,"sources":["CadastrarInstrumentoModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8YA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadastrarInstrumentoModal.vue","sourceRoot":"src/pages/Modulos/Patrimonio/Instrumento/Cadastros","sourcesContent":["<template>\n  <v-layout>\n    <v-dialog v-model=\"dialog\" persistent max-width=\"950px\">\n      <v-btn flat dark color=\"blue darken-4\" slot=\"activator\" outline>\n        <v-icon>fas fa-music</v-icon>\n        <span class=\"pl-2\"><b>Cadastrar instrumento</b></span>        \n      </v-btn>\n      <v-card>\n        <v-flex xs12 sm12>\n          <div class=\"pt-1\">\n            <v-btn\n              right\n              class=\"white--text\"\n              small\n              fab\n              round\n              box\n              color=\"red darken-1\"\n              absolute\n              v-on:click=\"dialog = false, Fechar()\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n          </div>\n        </v-flex>\n        <v-card-title>\n          <v-flex xs12 sm12 md12 lg12 align-center>\n            <span class=\"font-weight-bold headline blue--text text--darken-4\">Cadastrar instrumento</span>\n          </v-flex>\n        </v-card-title>\n        <v-card-text v-if=\"editar == false\">\n          <v-container grid-list-md>\n            <v-layout wrap>\n              <v-flex xs12 sm12 md4 lg4 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"nome\"\n                  :items=\"nomes\"\n                  label=\"Nome do instrumento\"\n                  item-text=\"nome\"\n                  item-value=\"nome\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                  :return-object=\"true\"\n                >\n                  <template v-slot:selection=\"data\">{{ data.item.nome}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex\n                      xs10\n                      sm10\n                      :key=\"JSON.stringify(data.item.id)\"\n                      @click=\"EscolherNaipe(data.item.naipe)\"\n                    >\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.nome}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>             \n              <v-flex xs12 sm12 md4 lg4 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"ano\"\n                  :items=\"anos\"\n                  label=\"Ano de fabricação\"\n                  item-text=\"numeroAno\"\n                  item-value=\"numeroAno\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.numeroAno}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.numeroAno}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex xs12 sm12 md4 lg4 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"tombamento\"\n                  :items=\"tombamentos\"\n                  label=\"Número de tombamento\"\n                  item-text=\"numero\"\n                  item-value=\"numero\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.numero}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.numero}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex xs12 sm12 md4 lg4 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"caracteristica\"\n                  :items=\"caracteristicas\"\n                  label=\"Característica/Tonalidade\"\n                  item-text=\"caracteristica\"\n                  item-value=\"caracteristica\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.caracteristica}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.caracteristica}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex xs12 sm12 md4 lg4 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"marca\"\n                  :items=\"marcas\"\n                  label=\"Marca do instrumento\"\n                  item-text=\"marca\"\n                  item-value=\"marca\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.marca}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.marca}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex xs12 sm12 md4 lg4 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"componente\"\n                  :items=\"componentes\"\n                  item-text=\"componente\"\n                  item-value=\"componente\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                  label=\"Componentes do instrumento\"\n                  multiple\n                  deletable-chips\n                  chips\n                  :rules=\"[() => !!componentes || 'Este campo precisa ser selecionado!']\"\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">\n                    <v-chip color=\"blue darken-4\" text-color=\"white\">{{data.item.componente}}</v-chip>\n                  </template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.componente}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex xs12 sm12 md12 d-flex>\n                <v-textarea\n                  v-model=\"observacao\"\n                  :counter=\"1000\"\n                  append-icon=\"fas fa-eye\"\n                  box\n                  rows=\"2\"\n                  outline\n                  label=\"Observações\"\n                ></v-textarea>\n              </v-flex>\n            </v-layout>\n          </v-container>\n        </v-card-text>\n         <v-card-text v-if=\"editar == true\">\n          <v-container grid-list-md>\n            <v-layout wrap>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"nome\"\n                  :items=\"nomes\"\n                  label=\"Nome do instrumento\"\n                  item-text=\"nome\"\n                  item-value=\"nome\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                  :return-object=\"true\"\n                >\n                  <template v-slot:selection=\"data\">{{ data.item.nome}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex\n                      xs10\n                      sm10\n                      :key=\"JSON.stringify(data.item.id)\"\n                      @click=\"EscolherNaipe(data.item.naipe)\"\n                    >\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.nome}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n               <v-flex sm1>\n                <v-btn fab small color=\"blue darken-4\" outline><v-icon>add</v-icon></v-btn>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"ano\"\n                  :items=\"anos\"\n                  label=\"Ano de fabricação\"\n                  item-text=\"numeroAno\"\n                  item-value=\"numeroAno\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.numeroAno}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.numeroAno}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex sm1>\n                <v-btn fab small color=\"blue darken-4\" outline><v-icon>add</v-icon></v-btn>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"tombamento\"\n                  :items=\"tombamentos\"\n                  label=\"Número de tombamento\"\n                  item-text=\"numero\"\n                  item-value=\"numero\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.numero}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.numero}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex sm1>\n                <v-btn fab small color=\"blue darken-4\" outline><v-icon>add</v-icon></v-btn>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"caracteristica\"\n                  :items=\"caracteristicas\"\n                  label=\"Característica/Tonalidade\"\n                  item-text=\"caracteristica\"\n                  item-value=\"caracteristica\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.caracteristica}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.caracteristica}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex sm1>\n                <v-btn fab small color=\"blue darken-4\" outline><v-icon>add</v-icon></v-btn>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"marca\"\n                  :items=\"marcas\"\n                  label=\"Marca do instrumento\"\n                  item-text=\"marca\"\n                  item-value=\"marca\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">{{ data.item.marca}}</template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.marca}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex sm1>\n                <v-btn fab small color=\"blue darken-4\" outline><v-icon>add</v-icon></v-btn>\n              </v-flex>\n              <v-flex xs12 sm12 md3 lg3 class=\"pl-2\">\n                <v-autocomplete\n                  v-model=\"componente\"\n                  :items=\"componentes\"\n                  item-text=\"componente\"\n                  item-value=\"componente\"\n                  color=\"blue darken-4\"\n                  single-line\n                  box\n                  label=\"Componentes do instrumento\"\n                  multiple\n                  deletable-chips\n                  chips\n                  :rules=\"[() => !!componentes || 'Este campo precisa ser selecionado!']\"\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">\n                    <v-chip color=\"blue darken-4\" text-color=\"white\">{{data.item.componente}}</v-chip>\n                  </template>\n                  <template slot=\"item\" slot-scope=\"data\">\n                    <v-flex xs10 sm10 :key=\"JSON.stringify(data.item.id)\">\n                      <v-list-tile>\n                        <v-list-tile-content>{{data.item.componente}}</v-list-tile-content>\n                      </v-list-tile>\n                    </v-flex>\n                  </template>\n                </v-autocomplete>\n              </v-flex>\n              <v-flex sm1>\n                <v-btn fab small color=\"blue darken-4\" outline><v-icon>add</v-icon></v-btn>\n              </v-flex>\n              <v-flex xs12 sm12 md12 d-flex>\n                <v-textarea\n                  v-model=\"observacao\"\n                  :counter=\"1000\"\n                  append-icon=\"fas fa-eye\"\n                  box\n                  rows=\"2\"\n                  outline\n                  label=\"Observações\"\n                ></v-textarea>\n              </v-flex>\n            </v-layout>\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-flex sm12 md4 lg4 offset-sm1>\n            <v-btn color=\"orange\" outline class=\"white--text\" v-if=\"editar == false\" @click=\"Editar\">\n              <small>Editar </small>\n              <v-icon right>fas fa-edit</v-icon>\n            </v-btn>\n            <v-btn color=\"orange\"  class=\"white--text\" v-if=\"editar == true\" @click=\"NaoEditar\">\n              <small>Não Editar </small>\n              <v-icon right>fas fa-edit</v-icon>\n            </v-btn>\n          </v-flex>\n          <v-flex sm12 md4 lg4>\n            <!--v-btn\n              color=\"indigo darken-4\"\n              center\n              class=\"white--text\"              \n            >Registrar compra\n            <v-icon right color=\"white\">fas fa-shopping-cart</v-icon>\n            </v-btn-->\n            <cad-doacao :tombamento=\"tombamento\"></cad-doacao>\n          </v-flex>\n          <v-flex sm12 md4 lg4>\n            <!--v-btn\n              color=\"indigo darken-4\"\n              center\n              class=\"white--text\"              \n            >Registrar compra\n            <v-icon right color=\"white\">fas fa-shopping-cart</v-icon>\n            </v-btn-->\n            <cad-compra\n              :numero_tombamento=\"tombamento\"\n              @SalvarInstrumento=\"SalvarCompraInstrumento\"\n            ></cad-compra>\n          </v-flex>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-layout>\n</template>\n<script>\nimport swal from \"sweetalert2\";\nimport CadDoacao from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarDoacaoModal\";\nimport CadCompra from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastrarCompraModal\";\nimport StoreInstrumento from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeInstrumento\";\nimport StoreDoacao from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeDoacao\";\nimport StoreCompra from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeCompra\";\n\nexport default {\n  components: {\n    CadDoacao,\n    CadCompra\n  },\n  data() {\n    return {\n      nome: null,\n      nomes: [],\n      naipe: null,\n      ano: null,\n      anos: [],\n      tombamento: null,\n      tombamentos: [],\n      caracteristica: null,\n      caracteristicas: [],\n      marca: null,\n      marcas: [],\n      componente: null,\n      componentes: [],\n      data_nascimento: null,\n      dialog: false,\n      observacao: \"Sem observações\",\n      editar:false\n    };\n  },\n  watch: {\n    dialog: function() {\n      if (this.dialog == true) {\n        this.Fechar();\n        this.CarregarDados();\n      }\n    }\n  },\n  methods: {\n    Editar(){\n      this.editar = true;\n    },\n    NaoEditar(){\n      this.editar = false;\n    },\n    SalvarCompraInstrumento() {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .post(\n          this.$url + \"Instrumento/v1\",\n          {\n            id: 0,\n            nome: this.nome.nome,\n            ano: this.ano,\n            status: \"1\",\n            aquisicao: \"2\",\n            tombamento: this.tombamento,\n            componentes: this.componente.toString(),\n            caracteristica: this.caracteristica,\n            marca: this.marca,\n            descricao: this.descricao,\n            launchDate: new Date().toISOString().substr(0, 19)\n          },\n          {\n            headers: { authorization: \"Bearer \" + autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n            this.AtualizarStatusTombamento(this.tombamento);\n          }\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    AtualizarStatusTombamento(tombamento) {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .put(\n          this.$url +\n            \"TombamentoInstrumento/v1/selecionar-tombamento?tombamento=\" +\n            tombamento,\n          {\n            headers: { authorization: \"Bearer \" + autorizacao.accessToken }\n          }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n          }\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    Fechar() {\n      this.ano = null;\n      this.nome = null;\n      this.tombamento = null;\n      this.marca = null;\n      this.componente = null;\n      this.caracteristica = null;\n      this.observacao = \"Sem observações\";\n    },\n    CarregarDados() {\n      StoreInstrumento.state.anos.forEach(element => {\n        this.anos.push({ id: element.id, numeroAno: element.numeroAno });\n      });\n      StoreInstrumento.state.nomes.forEach(element => {\n        this.nomes.push({\n          id: element.id,\n          nome: element.nome,\n          naipe: element.naipe\n        });\n      });\n      this.tombamentos = [];\n      this.tombamentos = StoreInstrumento.state.tombamentos;\n      //console.log(StoreInstrumento.state.tombamentos);\n      StoreInstrumento.state.marcas.forEach(element => {\n        this.marcas.push({ id: element.id, marca: element.marca });\n      });\n      StoreInstrumento.state.componentes.forEach(element => {\n        this.componentes.push({\n          id: element.id,\n          componente: element.componente\n        });\n      });\n      StoreDoacao.dispatch(\"BuscandoOrigensInstrumentos\");\n      StoreCompra.dispatch(\"BuscandoEmpresasInstrumentos\");\n    },\n    EscolherNaipe(payload) {\n      let Usuario = sessionStorage.getItem(\"usuario\");\n      let autorizacao = JSON.parse(Usuario);\n      this.$http\n        .get(\n          this.$url +\n            \"CaracteristicaInstrumento/v1/buscar-caracteristica-por-naipe?naipe=\" +\n            payload,\n          { headers: { authorization: \"Bearer \" + autorizacao.accessToken } }\n        )\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            ////console.log(response.data)\n            this.caracteristicas = response.data;\n          }\n        })\n        .catch(e => {\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    }\n  }\n};\n</script>\n<style>\n.mesmo-tamanho {\n  width: 100%;\n  white-space: normal;\n}\n</style>\n"]}]}