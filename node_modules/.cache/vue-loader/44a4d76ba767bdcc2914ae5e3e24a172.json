{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/app/Modulos/Patrimonio/Instrumento/Inicio/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/app/Modulos/Patrimonio/Instrumento/Inicio/Home.vue","mtime":1577188125710},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SitePatrimonio from \"@/templates/SitePatrimonio\";\nimport EmprestimoModal from \"@/pages/Modulos/Patrimonio/Instrumento/Emprestimo/EmprestimoModal\";\nimport DevolucaoModal from \"@/pages/Modulos/Patrimonio/Instrumento/Devolucao/DevolucaoModal\";\nimport InstrumentoModal from \"@/pages/Modulos/Patrimonio/Instrumento/Historico/InstrumentoModal\";\nimport PdfView from \"@/pages/Modulos/Patrimonio/Instrumento/Inicio/PDF\";\nimport CadInstrumento from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroInstrumentoModal\";\nimport Store from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeInstrumento.js\";\n\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    EmprestimoModal,\n    DevolucaoModal,\n    InstrumentoModal,\n    PdfView,\n    CadInstrumento\n  },\n  data() {\n    return {\n      dialog: false,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      items_breads: [\n        {\n          text: \"ESTOQUE\",\n          disabled: true,\n          href: \"breadcrumbs_dashboard\"\n        }\n      ],\n      headers: [\n        {\n          text: \"TOMBAMENTO\",\n          align: \"left\",\n          value: \"tombamento\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"INSTRUMENTO\",\n          value: \"nome\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CARACTERÍSTICAS/TONALIDADE\",\n          value: \"caracteristica\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"AÇÃO\",\n           align: \"justify\",\n          value: \"ação\",\n          class: \"blue darken-3 white--text\"\n        }\n      ],\n      instrumentos_devolucao: \"\",\n      instrumentos_emprestimo: \"\",\n      autorizacao: false,\n      instrumentos: [],\n      show: false,\n      doacao: [],\n      origem_doacao: \"\",\n      data_doacao: \"\",\n      obs_doacao: \"\",\n      data_compra: \"\",\n      valor_compra: \"\",\n      nota_fiscal_compra: \"\",\n      empresa_compra: \"\",\n      emprestimos: [],\n      items: [{ header: \"Today\" }, { divider: true, inset: true }],\n      busca: true,\n      nome: null,\n      ano: null,\n      tombamento: null,\n      caracteristicas: null,\n      marca: null,\n      componentes: null,\n      aquisicao: null,\n      buscaAquisicao: true,\n      data_emprestimo: \"\",\n      data_devolucao: \"\",\n      pdfTermo: null,\n      imagem: null,\n      dialogPdf: false\n    };\n  },\n  created() {\n    this.BuscarInstrumentos();\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(\n        this.data_compra,\n        this.data_doacao,\n        this.data_emprestimo,\n        this.data_devolucao\n      );\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(\n        this.data_compra,\n        this.data_doacao,\n        this.data_emprestimo,\n        this.data_devolucao\n      );\n    }\n  },\n  methods: {\n    InformarComoEmprestar(){\n        this.Salvo(\"Para realizar o empréstimo!\",\"Entre na opção \"+\"<strong>\"+\"SOLICITAÇÕES\"+\"</strong>\"+\" e realize o cadastro e o emprestimo desse instrumento.\",\"warning\")\n    },\n    Salvo(title,msg,type) {\n      swal.fire(title, msg,type);\n    },\n    BuscarTermo() {\n      this.$http\n        .get(this.$url + \"DoacaoInstrumento/v1/termo-doacao-download\", {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          },\n          responseType: \"blob\"\n        })\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n\n            var fileURL = URL.createObjectURL(response.data);\n            //console.log(fileURL);\n            this.pdfTermo = fileURL;\n            //window.open(fileURL);\n          }\n          ////console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    BuscarImagem() {\n      this.$http\n        .get(this.$url + \"DoacaoInstrumento/v1/termo-imagem-download\", {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          },\n          responseType: \"blob\"\n        })\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n\n            var fileURL = URL.createObjectURL(response.data);\n            //console.log(fileURL);\n            this.imagem = fileURL;\n\n            //window.open(fileURL);\n          }\n          ////console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    b64EncodeUnicode(str) {\n      return btoa(\n        encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {\n          return String.fromCharCode(parseInt(p1, 16));\n        })\n      );\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    CadastrarInstrumento() {\n      this.$router.push(\"/cadastro-patrimonio-instrumento\");\n    },\n    CorTimeline: function(status) {\n      if (status == 2) {\n        return \"red\";\n      } else if (status == 3) {\n        return \"green\";\n      }\n    },\n    IconTimeline(status) {\n      if (status == 2) {\n        return \"close\";\n      } else if (status == 3) {\n        return \"fas fa-check\";\n      }\n    },\n    DadosInstrumento(\n      nome,\n      ano,\n      tombamento,\n      caracteristicas,\n      marca,\n      componentes,\n      aquisicao\n    ) {\n      this.nome = nome;\n      this.ano = ano;\n      this.tombamento = tombamento;\n      this.caracteristicas = caracteristicas;\n      this.marca = marca;\n      this.componentes = componentes;\n      this.aquisicao = aquisicao;\n      if (aquisicao == \"1\") {\n        this.buscarDoacao(tombamento);\n      } else if (aquisicao == \"2\") {\n        this.buscarCompra(tombamento);\n      } else {\n      }\n    },\n    BuscarEmprestimos(tombamento) {\n      //console.log(\"buscar emprestimo do tombo \", tombamento);\n      this.emprestimos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(\n            this.$url +\n              \"EmprestimoInstrumento/v1/buscar-emprestimo?tombamento=\" +\n              tombamento,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            ////console.log(response.status);\n            if (response.status == 200) {\n              this.emprestimos = response.data;\n              this.emprestimos = this.emprestimos.reverse();\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    buscarDoacao(tombamento) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(\n            this.$url +\n              \"DoacaoInstrumento/v1/buscar-doacao?tombamento=\" +\n              tombamento,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            //console.log(response.status);\n            //console.log(\"Buscando doação\");\n            if (response.status == 200) {\n              //console.log(\"dados da doação\");\n              //console.log(response.data);\n              //Criar um loop pois o dado \"data\" que é recebido é um array\n              response.data.forEach(element => {\n                this.empresa_compra = null;\n                this.nota_fiscal_compra = null;\n                this.data_compra = null;\n                this.valor_compra = null;\n                this.data_doacao = this.formatDate(\n                  element.dataDoacao.substr(0, 10)\n                );\n                this.origem_doacao = element.origem;\n                this.obs_doacao = element.observacao;\n                this.buscaAquisicao = false;\n              });\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    buscarCompra(id) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(this.$url + \"CompraInstrumento/v1/buscar-compra?=\" + id, {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              //console.log(\"Dados da compra:\", response.data);\n              response.data.forEach(element => {\n                this.origem_doacao = null;\n                this.data_doacao = null;\n                this.obs_doacao = null;\n                this.data_compra = this.formatDate(\n                  element.dataCompra.substr(0, 10)\n                );\n                this.nota_fiscal_compra = element.notafiscal;\n                this.empresa_compra = element.empresa;\n                this.valor_compra = element.valor;\n                this.buscaAquisicao = false;\n              });\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    BuscarInstrumentos() {\n      this.instrumentos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Instrumento/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              this.instrumentos = response.data;\n              Store.dispatch(\"BuscandoNomesInstrumentos\");\n              Store.dispatch(\"BuscandoAnosInstrumentos\");\n              Store.dispatch(\"BuscandoTombamentosInstrumentos\");\n              Store.dispatch(\"BuscandoMarcasInstrumentos\");\n              Store.dispatch(\"BuscandoComponentesInstrumentos\");\n              this.busca = false;\n            } else if (response.status == 401) {\n              swal.fire(\n                \"Sua autorização expirou!\",\n                \"Entre com suas credencias novamente.\",\n                \"warning\"\n              );\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            this.busca = false;\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    }\n  }\n};\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwYA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/app/Modulos/Patrimonio/Instrumento/Inicio","sourcesContent":["<template>\n  <site-patrimonio>\n    <div class=\"block-header align-center pt-4\">\n      <h2 class=\"font-weight-bold headline light-blue--text text--darken-4 upper-case\">ESTOQUE DE INSTRUMENTOS</h2>\n    </div>\n    <!-- Exportable Table -->\n    <!--\n    ACESSO PDF E IMAGEM\n    <v-btn @click=\"BuscarTermo\">PDF</v-btn>\n    <v-btn @click=\"BuscarImagem\">IMAGEM</v-btn>\n    <v-avatar size=\"36px\">\n      <img :src=\"imagem\" alt=\"Avatar\">\n    </v-avatar>\n  \n     <div class=\"text-xs-center\">\n    <v-dialog\n      v-model=\"dialogPdf\"\n      width=\"800\"\n    >\n      <template v-slot:activator=\"{ on }\" >\n        <v-btn\n          color=\"teal lighten-2\"\n          class=\"mb-4\"\n          dark\n          outline\n          v-on=\"on\"\n          @click=\"BuscarTermo\"\n        >\n         Ver PDF\n        </v-btn>\n      </template>\n\n      <v-card>\n        <v-card-title\n          class=\"headline grey lighten-2\"\n          primary-title\n        >\n          TERMO DA DOAÇÃO\n        </v-card-title>\n\n        <v-card-text>\n           <pdf-view :pdfArquivo=\"pdfTermo\"></pdf-view>\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"primary\"\n            outline=\"\"\n            @click=\"dialogPdf = false\"\n          >\n            FECHAR\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n    -->\n\n    <v-card>\n      <v-flex xs12 sm12 md12 lg12 d-flex>\n        <v-flex xs4 sm4 md6 lg3  v-if=\"busca == false\" class=\"pt-5 pl-4\">\n          <v-hover>\n            <v-text-field\n              v-model=\"procurar\"\n              append-icon=\"search\"\n              label=\"Buscar instrumento ...\"\n              class=\"text--pink\"\n              color=\"light-blue darken-4\"\n              \n              hide-details\n            ></v-text-field>\n          </v-hover>\n        </v-flex>\n        <v-flex xs6 sm6 md4 lg4 offset-md5 align-center class=\"pt-5 pl-4\" v-if=\"busca == false\">\n          <cad-instrumento></cad-instrumento>\n        </v-flex>\n      </v-flex>\n      <v-layout row align-center>\n        <v-dialog v-model=\"busca\" max-width=\"350\" persistent>\n          <v-card>\n            <v-card-title class=\"headline light-blue darken-4 white--text\">\n              <v-flex align-center class=\"white--text text--darken-4\"> ESTOQUE |\n            <span class=\"grey--text text--lighten-1\">INSTRUMENTOS</span></v-flex>\n            </v-card-title>\n            <v-card-text>\n              <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n                <span>\n                  <v-progress-circular\n                    :size=\"50\"\n                    :width=\"3\"\n                    color=\"light-blue darken-4\"\n                    indeterminate\n                  >\n                    <v-icon color=\"light-blue darken-4\">fas fa-layer-group</v-icon>\n                  </v-progress-circular>\n                  <br />\n                  <h5 class=\"light-blue--text text--darken-4\">Esperando informações ...</h5>\n                </span>\n              </v-flex>\n            </v-card-text>\n          </v-card>\n        </v-dialog>\n      </v-layout>\n\n      <v-data-table\n        class=\"mt-5\"\n        :search=\"procurar\"\n        :headers=\"headers\"\n        v-if=\"busca == false\"\n        :items=\"instrumentos\"\n        :item-key=\"instrumentos.id\"\n        :pagination.sync=\"pagination\"\n      >\n        <template slot=\"items\" slot-scope=\"props\">\n          <tr\n            style=\"cursor:pointer;\"\n            @click=\"dialog = true, BuscarEmprestimos(props.item.tombamento), DadosInstrumento(props.item.nome,props.item.ano, props.item.tombamento, props.item.caracteristica, props.item.marca, props.item.componentes, props.item.aquisicao)\"\n          >\n            <td>\n              <span\n                class=\"green--text text--darken-3\"\n                v-if=\"props.item.status =='1'\"\n              >{{ props.item.tombamento }}</span>\n              <span\n                class=\"red--text text--darken-3\"\n                v-if=\"props.item.status =='2'\"\n              >{{ props.item.tombamento }}</span>\n            </td>\n            <td>{{ props.item.nome }}</td>\n            <td>{{ props.item.caracteristica }}</td>\n            <td>\n              <span class=\"center-block\" v-if=\"props.item.status =='1'\">\n                <v-btn flat color=\"green darken-2\" @click=\"InformarComoEmprestar()\"><small>Disponível</small></v-btn>\n              </span>\n              <span v-if=\"props.item.status =='2'\">\n                <devolucao-modal\n                  v-bind:numero_do_tombamento_devolucao=\"props.item.tombamento\"\n                  v-bind:numero_do_instrumento_devolucao=\"props.item.id\"\n                  v-on:devolucao_atualizar=\"BuscarInstrumentos()\"\n                ></devolucao-modal>\n              </span>\n            </td>\n          </tr>\n        </template>\n      </v-data-table>\n    </v-card>\n    <v-dialog v-model=\"dialog\" transition=\"dialog-bottom-transition\" scrollable width=\"800\">\n      <v-card tile>\n        <v-toolbar\n          card\n          dark\n          color=\"light-blue darken-4\"\n          @click=\"dialog = false, buscaAquisicao = true\"\n        >\n          <v-toolbar-title class=\"font-weight-bold display-1\">{{nome}} {{tombamento}}</v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn color=\"red\" fab small @click=\"dialog = false, buscaAquisicao = true\">\n            <v-icon color=\"white\">close</v-icon>\n          </v-btn>\n          <!--v-menu bottom right offset-y>\n              <template v-slot:activator=\"{ on }\">\n                <v-btn dark icon v-on=\"on\">\n                  <v-icon>more_vert</v-icon>\n                </v-btn>\n              </template>\n              <v-list>\n                <v-list-tile v-for=\"(item, i) in 4\" :key=\"i\" @click=\"\">\n                  <v-list-tile-title>Dados dados</v-list-tile-title>\n                </v-list-tile>\n              </v-list>\n          </v-menu-->\n        </v-toolbar>\n        <v-layout wrap>\n          <v-flex xs12 sm12 md12 lg12>\n            <v-card-title>\n              <v-flex xs12 sm12 md12 lg12 align-center>\n                <h4\n                  class=\"font-weight-bold headline light-blue--text text--darken-4\"\n                >Informações do instrumento</h4>\n              </v-flex>\n            </v-card-title>\n            <v-divider></v-divider>\n            <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n              <span v-if=\"buscaAquisicao == true\">\n                <v-progress-circular\n                  :size=\"50\"\n                  color=\"light-blue darken-4\"\n                  indeterminate\n                  :width=\"3\"\n                  class=\"align-center mt-4 mb-4\"\n                >\n                  <v-icon color=\"light-blue darken-4\">fas fa-music</v-icon>\n                </v-progress-circular>\n                <br />\n                <small class=\"light-blue--text text--darken-4\">BUSCANDO DADOS DO INSTRUMENTO</small>\n              </span>\n            </v-flex>\n            <v-list v-if=\"buscaAquisicao == false\">\n              <v-list-tile>\n                <v-flex xs12 sm12 md12 lg12 d-flex>\n                  <v-flex xs12 sm12 md2 lg2>\n                    <v-list-tile-content>\n                      <span class=\"font-weight-bold light-blue--text text--darken-4\">Ano</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{ano}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                  <v-flex xs12 sm12 md2 lg2>\n                    <v-list-tile-content>\n                      <span class=\"font-weight-bold light-blue--text text--darken-4\">Marca</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{marca}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                  <v-flex xs12 sm12 md3 lg3>\n                    <v-list-tile-content>\n                      <span\n                        class=\"font-weight-bold light-blue--text text--darken-4\"\n                      >Característica/Tonalidade</span>\n                      <v-flex xs12 sm12 md12 lg12>\n                        <span class=\"font-weight-regular text-uppercase ml-5\">{{caracteristicas}}</span>\n                      </v-flex>\n                    </v-list-tile-content>\n                  </v-flex>\n                  <v-flex xs12 sm12 md4 lg4 offset-md1>\n                    <v-list-tile-content>\n                      <span class=\"font-weight-bold light-blue--text text--darken-4\">Componentes</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{componentes}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                </v-flex>\n              </v-list-tile>\n            </v-list>\n            <v-divider class=\"mt-4\"></v-divider>\n            <v-card-title v-if=\"buscaAquisicao == false\">\n              <v-flex xs12 sm12 md12 lg12 align-center>\n                <h4\n                  class=\"font-weight-bold headline light-blue--text text--darken-4\"\n                  v-if=\"aquisicao == 1\"\n                >Informações sobre a doação</h4>\n                <h4\n                  class=\"font-weight-bold headline light-blue--text text--darken-4\"\n                  v-if=\"aquisicao == 2\"\n                >Informações sobre a compra</h4>\n              </v-flex>\n            </v-card-title>\n            <v-divider class=\"mb-4\" v-if=\"buscaAquisicao == false\"></v-divider>\n            <v-list v-if=\"buscaAquisicao == false\">\n              <v-list-tile>\n                <v-flex xs12 sm12 md12 lg12 d-flex>\n                  <v-flex xs12 sm12 md4 lg4>\n                    <v-list-tile-content>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 1\"\n                      >Data da doação</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{data_doacao}}</span>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 2\"\n                      >Data da compra</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{data_compra}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                  <v-flex xs12 sm12 md4 lg4>\n                    <v-list-tile-content>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 1\"\n                      >Origem da doação</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{origem_doacao}}</span>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 2\"\n                      >Empresa</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{empresa_compra}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                  <v-flex xs12 sm12 md4 lg4>\n                    <v-list-tile-content>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 1\"\n                      >Observações</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{obs_doacao}}</span>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 2\"\n                      >Valor da compra</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{valor_compra}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                  <v-flex xs12 sm12 md4 lg4>\n                    <v-list-tile-content>\n                      <span\n                        class=\"light-blue--text text--darken-4 font-weight-bold\"\n                        v-if=\"aquisicao == 2\"\n                      >Nota fiscal</span>\n                      <span class=\"font-weight-regular text-uppercase\">{{nota_fiscal_compra}}</span>\n                    </v-list-tile-content>\n                  </v-flex>\n                </v-flex>\n              </v-list-tile>\n            </v-list>\n          </v-flex>\n\n          <v-flex xs12 sm12 md12 lg12>\n            <v-divider></v-divider>\n            <v-card-title>\n              <v-flex xs12 sm12 md12 lg12 align-center>\n                <h4\n                  class=\"text-uppercase light-blue--text text--darken-4 font-weight-bold title\"\n                >Informações sobre os empréstimos</h4>\n              </v-flex>\n            </v-card-title>\n            <v-divider></v-divider>\n            <v-card v-if=\"emprestimos === []\">Sem empréstimos cadastrados para esse instrumento</v-card>\n            <v-card>\n              <!--{{item.links[0]['href']}}-->\n              <v-timeline dense class=\"ml-5\" align-top>\n                <v-slide-x-reverse-transition group hide-on-leave>\n                  <v-timeline-item\n                    v-for=\"item in emprestimos\"\n                    :key=\"item.id\"\n                    :color=\"CorTimeline(item.status)\"\n                    :icon=\"IconTimeline(item.status)\"\n                    fill-dot\n                  >\n                    <v-card dark color=\"gray darken-3\">\n                      <v-card-title class=\"title\">{{item.nome}}</v-card-title>\n                    </v-card>\n                    <v-flex xs12 sm12 md12 lg12 d-flex class=\"pt-3 pb-3\">\n                      <v-flex xs12 sm12 md4 lg4>\n                        <v-list-tile-content>\n                          <span\n                            class=\"light-blue--text text--darken-4 font-weight-bold\"\n                          >Enc Regional</span>\n                          <span\n                            class=\"font-weight-regular text-uppercase\"\n                          >{{item.encarregadoRegional}}</span>\n                          <span class=\"light-blue--text text--darken-4 font-weight-bold\">Enc local</span>\n                          <span class=\"font-weight-regular text-uppercase\">{{item.encarregado}}</span>\n                        </v-list-tile-content>\n                      </v-flex>\n                      <v-flex xs12 sm12 md4 lg4>\n                        <v-list-tile-content>\n                          <span class=\"light-blue--text text--darken-4 font-weight-bold\">Igreja</span>\n                          <span class=\"font-weight-regular text-uppercase\">{{item.congregacao}}</span>\n                          <span\n                            class=\"light-blue--text text--darken-4 font-weight-bold\"\n                          >Data do empréstimo</span>\n                          <span\n                            class=\"font-weight-regular text-uppercase\"\n                          >{{formatDate(item.emprestimoDate.substr(0, 10))}}</span>\n                        </v-list-tile-content>\n                      </v-flex>\n                      <v-flex xs12 sm12 md4 lg4>\n                        <v-list-tile-content>\n                          <span\n                            class=\"light-blue--text text--darken-4 font-weight-bold\"\n                            v-if=\"item.status == 3\"\n                          >Data da Devolução</span>\n                          <span\n                            class=\"font-weight-regular text-uppercase\"\n                            v-if=\"item.status == 3\"\n                          >{{formatDate(item.devolucaoDate.substr(0, 10))}}</span>\n\n                          <span\n                            class=\"font-weight-regular text-uppercase red--text mt-3\"\n                            v-if=\"item.status == 2\"\n                          >Aguardando devolução</span>\n                        </v-list-tile-content>\n                      </v-flex>\n                    </v-flex>\n\n                    <v-divider></v-divider>\n                  </v-timeline-item>\n                </v-slide-x-reverse-transition>\n              </v-timeline>\n            </v-card>\n          </v-flex>\n        </v-layout>\n\n        <div style=\"flex: 1 1 auto;\"></div>\n      </v-card>\n    </v-dialog>\n    <!-- #END# Exportable Table -->\n  </site-patrimonio>\n</template>\n\n<script>\nimport SitePatrimonio from \"@/templates/SitePatrimonio\";\nimport EmprestimoModal from \"@/pages/Modulos/Patrimonio/Instrumento/Emprestimo/EmprestimoModal\";\nimport DevolucaoModal from \"@/pages/Modulos/Patrimonio/Instrumento/Devolucao/DevolucaoModal\";\nimport InstrumentoModal from \"@/pages/Modulos/Patrimonio/Instrumento/Historico/InstrumentoModal\";\nimport PdfView from \"@/pages/Modulos/Patrimonio/Instrumento/Inicio/PDF\";\nimport CadInstrumento from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/CadastroInstrumentoModal\";\nimport Store from \"@/pages/Modulos/Patrimonio/Instrumento/Cadastros/store/storeInstrumento.js\";\n\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    EmprestimoModal,\n    DevolucaoModal,\n    InstrumentoModal,\n    PdfView,\n    CadInstrumento\n  },\n  data() {\n    return {\n      dialog: false,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      items_breads: [\n        {\n          text: \"ESTOQUE\",\n          disabled: true,\n          href: \"breadcrumbs_dashboard\"\n        }\n      ],\n      headers: [\n        {\n          text: \"TOMBAMENTO\",\n          align: \"left\",\n          value: \"tombamento\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"INSTRUMENTO\",\n          value: \"nome\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CARACTERÍSTICAS/TONALIDADE\",\n          value: \"caracteristica\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"AÇÃO\",\n           align: \"justify\",\n          value: \"ação\",\n          class: \"blue darken-3 white--text\"\n        }\n      ],\n      instrumentos_devolucao: \"\",\n      instrumentos_emprestimo: \"\",\n      autorizacao: false,\n      instrumentos: [],\n      show: false,\n      doacao: [],\n      origem_doacao: \"\",\n      data_doacao: \"\",\n      obs_doacao: \"\",\n      data_compra: \"\",\n      valor_compra: \"\",\n      nota_fiscal_compra: \"\",\n      empresa_compra: \"\",\n      emprestimos: [],\n      items: [{ header: \"Today\" }, { divider: true, inset: true }],\n      busca: true,\n      nome: null,\n      ano: null,\n      tombamento: null,\n      caracteristicas: null,\n      marca: null,\n      componentes: null,\n      aquisicao: null,\n      buscaAquisicao: true,\n      data_emprestimo: \"\",\n      data_devolucao: \"\",\n      pdfTermo: null,\n      imagem: null,\n      dialogPdf: false\n    };\n  },\n  created() {\n    this.BuscarInstrumentos();\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate(\n        this.data_compra,\n        this.data_doacao,\n        this.data_emprestimo,\n        this.data_devolucao\n      );\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate(\n        this.data_compra,\n        this.data_doacao,\n        this.data_emprestimo,\n        this.data_devolucao\n      );\n    }\n  },\n  methods: {\n    InformarComoEmprestar(){\n        this.Salvo(\"Para realizar o empréstimo!\",\"Entre na opção \"+\"<strong>\"+\"SOLICITAÇÕES\"+\"</strong>\"+\" e realize o cadastro e o emprestimo desse instrumento.\",\"warning\")\n    },\n    Salvo(title,msg,type) {\n      swal.fire(title, msg,type);\n    },\n    BuscarTermo() {\n      this.$http\n        .get(this.$url + \"DoacaoInstrumento/v1/termo-doacao-download\", {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          },\n          responseType: \"blob\"\n        })\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n\n            var fileURL = URL.createObjectURL(response.data);\n            //console.log(fileURL);\n            this.pdfTermo = fileURL;\n            //window.open(fileURL);\n          }\n          ////console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    BuscarImagem() {\n      this.$http\n        .get(this.$url + \"DoacaoInstrumento/v1/termo-imagem-download\", {\n          headers: {\n            authorization: \"Bearer \" + this.autorizacao.accessToken\n          },\n          responseType: \"blob\"\n        })\n        .then(response => {\n          ////console.log(response.status);\n          if (response.status == 200) {\n            //console.log(response.data);\n\n            var fileURL = URL.createObjectURL(response.data);\n            //console.log(fileURL);\n            this.imagem = fileURL;\n\n            //window.open(fileURL);\n          }\n          ////console.log(response.data);\n        })\n        .catch(e => {\n          swal.fire(\n            \"Sua autorização expirou!\",\n            \"Entre com suas credencias novamente.\",\n            \"warning\"\n          );\n          //console.error(e);\n          //console.data(e.data);\n        });\n    },\n    b64EncodeUnicode(str) {\n      return btoa(\n        encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {\n          return String.fromCharCode(parseInt(p1, 16));\n        })\n      );\n    },\n    formatDate(date) {\n      if (!date) return null;\n\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    CadastrarInstrumento() {\n      this.$router.push(\"/cadastro-patrimonio-instrumento\");\n    },\n    CorTimeline: function(status) {\n      if (status == 2) {\n        return \"red\";\n      } else if (status == 3) {\n        return \"green\";\n      }\n    },\n    IconTimeline(status) {\n      if (status == 2) {\n        return \"close\";\n      } else if (status == 3) {\n        return \"fas fa-check\";\n      }\n    },\n    DadosInstrumento(\n      nome,\n      ano,\n      tombamento,\n      caracteristicas,\n      marca,\n      componentes,\n      aquisicao\n    ) {\n      this.nome = nome;\n      this.ano = ano;\n      this.tombamento = tombamento;\n      this.caracteristicas = caracteristicas;\n      this.marca = marca;\n      this.componentes = componentes;\n      this.aquisicao = aquisicao;\n      if (aquisicao == \"1\") {\n        this.buscarDoacao(tombamento);\n      } else if (aquisicao == \"2\") {\n        this.buscarCompra(tombamento);\n      } else {\n      }\n    },\n    BuscarEmprestimos(tombamento) {\n      //console.log(\"buscar emprestimo do tombo \", tombamento);\n      this.emprestimos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(\n            this.$url +\n              \"EmprestimoInstrumento/v1/buscar-emprestimo?tombamento=\" +\n              tombamento,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            ////console.log(response.status);\n            if (response.status == 200) {\n              this.emprestimos = response.data;\n              this.emprestimos = this.emprestimos.reverse();\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    buscarDoacao(tombamento) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(\n            this.$url +\n              \"DoacaoInstrumento/v1/buscar-doacao?tombamento=\" +\n              tombamento,\n            {\n              headers: {\n                authorization: \"Bearer \" + this.autorizacao.accessToken\n              }\n            }\n          )\n          .then(response => {\n            //console.log(response.status);\n            //console.log(\"Buscando doação\");\n            if (response.status == 200) {\n              //console.log(\"dados da doação\");\n              //console.log(response.data);\n              //Criar um loop pois o dado \"data\" que é recebido é um array\n              response.data.forEach(element => {\n                this.empresa_compra = null;\n                this.nota_fiscal_compra = null;\n                this.data_compra = null;\n                this.valor_compra = null;\n                this.data_doacao = this.formatDate(\n                  element.dataDoacao.substr(0, 10)\n                );\n                this.origem_doacao = element.origem;\n                this.obs_doacao = element.observacao;\n                this.buscaAquisicao = false;\n              });\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    buscarCompra(id) {\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.$http\n          .get(this.$url + \"CompraInstrumento/v1/buscar-compra?=\" + id, {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              //console.log(\"Dados da compra:\", response.data);\n              response.data.forEach(element => {\n                this.origem_doacao = null;\n                this.data_doacao = null;\n                this.obs_doacao = null;\n                this.data_compra = this.formatDate(\n                  element.dataCompra.substr(0, 10)\n                );\n                this.nota_fiscal_compra = element.notafiscal;\n                this.empresa_compra = element.empresa;\n                this.valor_compra = element.valor;\n                this.buscaAquisicao = false;\n              });\n            } else if (response.status == 401) {\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n          })\n          .catch(e => {\n            swal.fire(\n              \"Sua autorização expirou!\",\n              \"Entre com suas credencias novamente.\",\n              \"warning\"\n            );\n            this.$router.push(\"/\");\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    },\n    BuscarInstrumentos() {\n      this.instrumentos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Instrumento/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            //console.log(response.status);\n            if (response.status == 200) {\n              this.instrumentos = response.data;\n              Store.dispatch(\"BuscandoNomesInstrumentos\");\n              Store.dispatch(\"BuscandoAnosInstrumentos\");\n              Store.dispatch(\"BuscandoTombamentosInstrumentos\");\n              Store.dispatch(\"BuscandoMarcasInstrumentos\");\n              Store.dispatch(\"BuscandoComponentesInstrumentos\");\n              this.busca = false;\n            } else if (response.status == 401) {\n              swal.fire(\n                \"Sua autorização expirou!\",\n                \"Entre com suas credencias novamente.\",\n                \"warning\"\n              );\n              this.$router.push(\"/\");\n              const toast = swal.mixin({\n                toast: true,\n                position: \"top-end\",\n                showConfirmButton: false,\n                timer: 3000\n              });\n            }\n            //console.log(response.data);\n          })\n          .catch(e => {\n            this.busca = false;\n            //console.error(e);\n            //console.data(e.data);\n          });\n      }\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n"]}]}