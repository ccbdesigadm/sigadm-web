{"remainingRequest":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/joel/Projetos/Web/sigadm-web/src/app/modulos/patrimonio/Irmaos/Inicio/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/joel/Projetos/Web/sigadm-web/src/app/modulos/patrimonio/Irmaos/Inicio/Home.vue","mtime":1569691366139},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/babel-loader/lib/index.js","mtime":1569691629983},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/cache-loader/dist/cjs.js","mtime":1569691702388},{"path":"/home/joel/Projetos/Web/sigadm-web/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1569691710961}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport CadIrmao from \"@/pages/Modulos/Patrimonio/Irmaos/Cadastros/IrmaoModal.vue\";\nimport SitePatrimonio from \"@/templates/SitePatrimonio.vue\";\nimport EditarIrmao from \"@/pages/Modulos/Patrimonio/Irmaos/EditarIrmao/EditarIrmaoModal.vue\";\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    CadIrmao,\n    EditarIrmao\n  },\n  data() {\n    return {\n      ativar_edicao: \"\",\n      irmao_edicao: Object,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      headers: [\n        {\n          text: \"NOME\",\n          align: \"left\",\n          value: \"nome\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CARGO\",\n          align: \"left\",\n          value: \"cargo\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CIDADE\",\n          align: \"left\",\n          value: \"cidade\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"TELEFONE\",\n          align: \"left\",\n          value: \"telefone\",\n          sortable: false,\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"COMUM\",\n          align: \"left\",\n          value: \"status\",\n          class: \"blue darken-3 white--text\"\n        }\n      ],\n      autorizacao: false,\n      irmaos: [],\n      show: false,\n      busca: true,\n      identificacaoIgreja: \"\",\n      igreja: [],\n      idUsuario: null\n    };\n  },\n  created() {\n    this.BuscarIrmaos();\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate();\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate();\n    },\n    igreja: function() {\n      ////console.log(\"Whatch igrejas\", this.igreja);\n    }\n  },\n  methods: {\n    AtivarEdicao(irmao) {\n      this.ativar_edicao = Math.random();\n      this.irmao_edicao = irmao;\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    CadastrarIrmao() {\n      this.$router.push(\"/cadastro-patrimonio-novo-irmao\");\n    },\n    BuscarIrmaos() {\n      this.irmaos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        //this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Usuario/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              if (response.data.length == 0) {\n                this.busca = false;\n              }\n              response.data.forEach(element => {\n                this.$http\n                  .get(\n                    this.$url +\n                      \"UsuarioIgreja/v1/usuario-por-id?id=\" +\n                      element.id,\n                    {\n                      headers: {\n                        authorization: \"Bearer \" + this.autorizacao.accessToken\n                      }\n                    }\n                  )\n                  .then(response => {\n                    ////console.log(response.status);\n                    if (response.status == 200) {\n                      this.$http\n                        .get(\n                          this.$url + \"Igreja/v1/\" + response.data.idIgreja,\n                          {\n                            headers: {\n                              authorization:\n                                \"Bearer \" + this.autorizacao.accessToken\n                            }\n                          }\n                        )\n                        .then(response => {\n                          ////console.log(response.status);\n                          if (response.status == 200) {\n                            ////console.log(response.data)\n\n                            this.irmaos.push({\n                              nome: element.nome,\n                              cargo: element.cargo,\n                              endereco: element.endereco,\n                              cidade: element.cidade,\n                              telefone: element.telefone,\n                              congregacao: response.data.cidade,\n                              regional: response.data.encRegional,\n                              local: response.data.encLocal,\n                              dados: element\n                            });\n                            this.busca = false;\n                            ////console.log(this.igreja);\n                          }\n                          ////console.log(response.data);\n                        })\n                        .catch(e => {\n                          //console.error(e.status);\n                          //console.data(e.data);\n                        });\n                    }\n                  })\n                  .catch(e => {\n                    //console.error(e);\n                    //console.data(e.data);\n                  });\n              });\n            } else if (response.status == 401) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            //console.error(e);\n            this.busca = false;\n          });\n      }\n    }\n  }\n};\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/app/Modulos/Patrimonio/Irmaos/Inicio","sourcesContent":["<template>\n  <site-patrimonio>\n    <div class=\"block-header align-center pt-5\">\n      <h2 class=\"font-weight-bold headline blue--text text--darken-4\">Irmãos cadastrados</h2>\n    </div>\n    <!-- Exportable Table -->\n    <v-card>\n      <v-flex xs12 sm12 md12 lg12 d-flex>\n        <v-flex xs4 sm4 md6 lg3 v-if=\"busca == false\" class=\"pt-5 pl-4\">\n          <v-hover>\n            <v-text-field\n              v-model=\"procurar\"\n              box\n              append-icon=\"search\"\n              label=\"Procurar irmão ...\"\n              color=\"blue darken-4\"\n              hide-details\n            ></v-text-field>\n          </v-hover>\n        </v-flex>\n        <v-flex xs6 sm6 md4 lg4 offset-md5 align-center class=\"pt-5 pl-4\" v-if=\"busca == false\">\n          <cad-irmao @irmao=\"BuscarIrmaos()\"></cad-irmao>\n          <editar-irmao\n            :dialog_ativar=\"ativar_edicao\"\n            :irmao_dados=\"irmao_edicao\"\n            @IrmaoDeletado=\"BuscarIrmaos\"\n            @IrmaoAtualizado=\"BuscarIrmaos\"\n          ></editar-irmao>\n        </v-flex>\n      </v-flex>\n      <v-layout row align-center>\n        <v-dialog v-model=\"busca\" max-width=\"350\" persistent>\n          <v-card>\n            <v-card-title class=\"headline light-blue darken-4 white--text\">\n              <v-flex align-center class=\"white--text text--darken-4\">IRMÃOS |\n            <span class=\"grey--text text--lighten-1\">CADASTROS</span></v-flex>\n            </v-card-title>\n            <v-card-text>\n              <v-flex sm12 xs12 md12 lg12 align-center d-flex>\n                <span>\n                  <v-progress-circular\n                    :size=\"50\"\n                    :width=\"3\"\n                    color=\"light-blue darken-4\"\n                    indeterminate\n                  >\n                    <v-icon color=\"light-blue darken-4\">fas fa-user-tie</v-icon>\n                  </v-progress-circular>\n                  <br />\n                  <h5 class=\"light-blue--text text--darken-4\">Esperando informações ...</h5>\n                </span>\n              </v-flex>\n            </v-card-text>\n          </v-card>\n        </v-dialog>\n      </v-layout>\n\n      <v-data-table\n        class=\"mt-5\"\n        :search=\"procurar\"\n        :headers=\"headers\"\n        v-if=\"busca == false\"\n        :items=\"irmaos\"\n        :item-key=\"irmaos.id\"\n        :pagination.sync=\"pagination\"\n      >\n        <template slot=\"items\" slot-scope=\"props\" class=\"mb-3\">\n          <tr\n            class=\"pl-4 text-xs-left\"\n            @click=\"AtivarEdicao(props.item.dados)\"\n            style=\"cursor:pointer;\"\n          >\n            <td>{{ props.item.nome }}</td>\n            <td>{{ props.item.cargo }}</td>\n            <td>{{ props.item.cidade }}</td>\n            <td>{{ props.item.telefone }}</td>\n            <td>{{ props.item.congregacao }}</td>\n          </tr>\n        </template>\n      </v-data-table>\n    </v-card>\n    <!-- #END# Exportable Table -->\n  </site-patrimonio>\n</template>\n\n<script>\nimport CadIrmao from \"@/pages/Modulos/Patrimonio/Irmaos/Cadastros/IrmaoModal.vue\";\nimport SitePatrimonio from \"@/templates/SitePatrimonio.vue\";\nimport EditarIrmao from \"@/pages/Modulos/Patrimonio/Irmaos/EditarIrmao/EditarIrmaoModal.vue\";\nimport swal from \"sweetalert2\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    SitePatrimonio,\n    CadIrmao,\n    EditarIrmao\n  },\n  data() {\n    return {\n      ativar_edicao: \"\",\n      irmao_edicao: Object,\n      procurar: \"\",\n      pagination: {\n        descending: true,\n        page: 1,\n        rowsPerPage: -1,\n        sortBy: \"fat\",\n        totalItems: 0,\n        rowsPerPageItems: [1, 2, 4, 8, 16]\n      },\n      headers: [\n        {\n          text: \"NOME\",\n          align: \"left\",\n          value: \"nome\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CARGO\",\n          align: \"left\",\n          value: \"cargo\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"CIDADE\",\n          align: \"left\",\n          value: \"cidade\",\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"TELEFONE\",\n          align: \"left\",\n          value: \"telefone\",\n          sortable: false,\n          class: \"blue darken-3 white--text\"\n        },\n        {\n          text: \"COMUM\",\n          align: \"left\",\n          value: \"status\",\n          class: \"blue darken-3 white--text\"\n        }\n      ],\n      autorizacao: false,\n      irmaos: [],\n      show: false,\n      busca: true,\n      identificacaoIgreja: \"\",\n      igreja: [],\n      idUsuario: null\n    };\n  },\n  created() {\n    this.BuscarIrmaos();\n  },\n  computed: {\n    computedDateFormatted() {\n      return this.formatDate();\n    }\n  },\n  watch: {\n    date(val) {\n      this.dateFormatted = this.formatDate();\n    },\n    igreja: function() {\n      ////console.log(\"Whatch igrejas\", this.igreja);\n    }\n  },\n  methods: {\n    AtivarEdicao(irmao) {\n      this.ativar_edicao = Math.random();\n      this.irmao_edicao = irmao;\n    },\n    formatDate(date) {\n      if (!date) return null;\n      const [year, month, day] = date.split(\"-\");\n      return `${day}/${month}/${year}`;\n    },\n    CadastrarIrmao() {\n      this.$router.push(\"/cadastro-patrimonio-novo-irmao\");\n    },\n    BuscarIrmaos() {\n      this.irmaos = [];\n      let usuarioAutorize = sessionStorage.getItem(\"usuario\");\n      if (!usuarioAutorize) {\n        //this.$router.push(\"/\");\n        const toast = swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000\n        });\n\n        toast({\n          type: \"error\",\n          title: \"Sem autorização, entre com seus dados novamente!\"\n        });\n      } else if (usuarioAutorize) {\n        this.autorizacao = JSON.parse(usuarioAutorize);\n        this.busca = true;\n        this.$http\n          .get(this.$url + \"Usuario/v1\", {\n            headers: { authorization: \"Bearer \" + this.autorizacao.accessToken }\n          })\n          .then(response => {\n            if (response.status == 200) {\n              if (response.data.length == 0) {\n                this.busca = false;\n              }\n              response.data.forEach(element => {\n                this.$http\n                  .get(\n                    this.$url +\n                      \"UsuarioIgreja/v1/usuario-por-id?id=\" +\n                      element.id,\n                    {\n                      headers: {\n                        authorization: \"Bearer \" + this.autorizacao.accessToken\n                      }\n                    }\n                  )\n                  .then(response => {\n                    ////console.log(response.status);\n                    if (response.status == 200) {\n                      this.$http\n                        .get(\n                          this.$url + \"Igreja/v1/\" + response.data.idIgreja,\n                          {\n                            headers: {\n                              authorization:\n                                \"Bearer \" + this.autorizacao.accessToken\n                            }\n                          }\n                        )\n                        .then(response => {\n                          ////console.log(response.status);\n                          if (response.status == 200) {\n                            ////console.log(response.data)\n\n                            this.irmaos.push({\n                              nome: element.nome,\n                              cargo: element.cargo,\n                              endereco: element.endereco,\n                              cidade: element.cidade,\n                              telefone: element.telefone,\n                              congregacao: response.data.cidade,\n                              regional: response.data.encRegional,\n                              local: response.data.encLocal,\n                              dados: element\n                            });\n                            this.busca = false;\n                            ////console.log(this.igreja);\n                          }\n                          ////console.log(response.data);\n                        })\n                        .catch(e => {\n                          //console.error(e.status);\n                          //console.data(e.data);\n                        });\n                    }\n                  })\n                  .catch(e => {\n                    //console.error(e);\n                    //console.data(e.data);\n                  });\n              });\n            } else if (response.status == 401) {\n            }\n            ////console.log(response.data);\n          })\n          .catch(e => {\n            //console.error(e);\n            this.busca = false;\n          });\n      }\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n"]}]}